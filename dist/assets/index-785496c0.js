import{j as h,P as kn,c as Ew,a as Iw,u as zm,B as Aw,b as Cw,d as Pw,e as oo,f as wt,R as Sw,g as Rw,h as Nw,i as kw,S as Vw,_ as lc,k as qm,O as Hm,C as Gm,l as jw,T as Wm,D as Km,m as Dw,n as Mw}from"./ui-1f6cd5ae.js";import{a as Qm,r as I,c as Ow,R as Fe,u as sr,S as Dh,U as Mh,d as Oh,e as Ft,g as Lo,C as Lw}from"./vendor-3cad852a.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var hl={},Lh=Qm;hl.createRoot=Lh.createRoot,hl.hydrateRoot=Lh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Os.apply(this,arguments)}var un;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(un||(un={}));const Fh="popstate";function Fw(n){n===void 0&&(n={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return dl("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:ao(s)}return Bw(e,t,null,n)}function Ne(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Xm(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Uw(){return Math.random().toString(36).substr(2,8)}function Uh(n,e){return{usr:n.state,key:n.key,idx:e}}function dl(n,e,t,r){return t===void 0&&(t=null),Os({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wr(e):e,{state:t,key:e&&e.key||r||Uw()})}function ao(n){let{pathname:e="/",search:t="",hash:r=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wr(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substr(r),n=n.substr(0,r)),n&&(e.pathname=n)}return e}function Bw(n,e,t,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=un.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(Os({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function m(){l=un.Pop;let x=d(),V=x==null?null:x-u;u=x,c&&c({action:l,location:T.location,delta:V})}function g(x,V){l=un.Push;let k=dl(T.location,x,V);t&&t(k,x),u=d()+1;let R=Uh(k,u),D=T.createHref(k);try{o.pushState(R,"",D)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(D)}i&&c&&c({action:l,location:T.location,delta:1})}function y(x,V){l=un.Replace;let k=dl(T.location,x,V);t&&t(k,x),u=d();let R=Uh(k,u),D=T.createHref(k);o.replaceState(R,"",D),i&&c&&c({action:l,location:T.location,delta:0})}function b(x){let V=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof x=="string"?x:ao(x);return k=k.replace(/ $/,"%20"),Ne(V,"No window.location.(origin|href) available to create URL for href: "+k),new URL(k,V)}let T={get action(){return l},get location(){return n(s,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Fh,m),c=x,()=>{s.removeEventListener(Fh,m),c=null}},createHref(x){return e(s,x)},createURL:b,encodeLocation(x){let V=b(x);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:g,replace:y,go(x){return o.go(x)}};return T}var Bh;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Bh||(Bh={}));function Yw(n,e,t){return t===void 0&&(t="/"),$w(n,e,t,!1)}function $w(n,e,t,r){let s=typeof e=="string"?Wr(e):e,i=cc(s.pathname||"/",t);if(i==null)return null;let o=Jm(n);zw(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=t_(i);l=Zw(o[c],u,r)}return l}function Jm(n,e,t,r){e===void 0&&(e=[]),t===void 0&&(t=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ne(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let u=dn([r,c.relativePath]),d=t.concat(c);i.children&&i.children.length>0&&(Ne(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Jm(i.children,e,d,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:Xw(u,i.index),routesMeta:d})};return n.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Zm(i.path))s(i,o,c)}),e}function Zm(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Zm(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function zw(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Jw(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}const qw=/^:[\w-]+$/,Hw=3,Gw=2,Ww=1,Kw=10,Qw=-2,Yh=n=>n==="*";function Xw(n,e){let t=n.split("/"),r=t.length;return t.some(Yh)&&(r+=Qw),e&&(r+=Gw),t.filter(s=>!Yh(s)).reduce((s,i)=>s+(qw.test(i)?Hw:i===""?Ww:Kw),r)}function Jw(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function Zw(n,e,t){t===void 0&&(t=!1);let{routesMeta:r}=n,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],u=l===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",m=$h({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),g=c.route;if(!m&&u&&t&&!r[r.length-1].route.index&&(m=$h({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:dn([i,m.pathname]),pathnameBase:i_(dn([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=dn([i,m.pathnameBase]))}return o}function $h(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=e_(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((u,d,m)=>{let{paramName:g,isOptional:y}=d;if(g==="*"){let T=l[m]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const b=l[m];return y&&!b?u[g]=void 0:u[g]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:n}}function e_(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Xm(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function t_(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xm(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function cc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function n_(n,e){e===void 0&&(e="/");let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?Wr(n):n;return{pathname:t?t.startsWith("/")?t:r_(t,e):e,search:o_(r),hash:a_(s)}}function r_(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function Ma(n,e,t,r){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s_(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ep(n,e){let t=s_(n);return e?t.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):t.map(r=>r.pathnameBase)}function tp(n,e,t,r){r===void 0&&(r=!1);let s;typeof n=="string"?s=Wr(n):(s=Os({},n),Ne(!s.pathname||!s.pathname.includes("?"),Ma("?","pathname","search",s)),Ne(!s.pathname||!s.pathname.includes("#"),Ma("#","pathname","hash",s)),Ne(!s.search||!s.search.includes("#"),Ma("#","search","hash",s)));let i=n===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=t;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let c=n_(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const dn=n=>n.join("/").replace(/\/\/+/g,"/"),i_=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),o_=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,a_=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function l_(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const np=["post","put","patch","delete"];new Set(np);const c_=["get",...np];new Set(c_);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ls(){return Ls=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},Ls.apply(this,arguments)}const uc=I.createContext(null),u_=I.createContext(null),ir=I.createContext(null),Fo=I.createContext(null),or=I.createContext({outlet:null,matches:[],isDataRoute:!1}),rp=I.createContext(null);function h_(n,e){let{relative:t}=e===void 0?{}:e;ti()||Ne(!1);let{basename:r,navigator:s}=I.useContext(ir),{hash:i,pathname:o,search:l}=ip(n,{relative:t}),c=o;return r!=="/"&&(c=o==="/"?r:dn([r,o])),s.createHref({pathname:c,search:l,hash:i})}function ti(){return I.useContext(Fo)!=null}function ar(){return ti()||Ne(!1),I.useContext(Fo).location}function sp(n){I.useContext(ir).static||I.useLayoutEffect(n)}function d_(){let{isDataRoute:n}=I.useContext(or);return n?I_():f_()}function f_(){ti()||Ne(!1);let n=I.useContext(uc),{basename:e,future:t,navigator:r}=I.useContext(ir),{matches:s}=I.useContext(or),{pathname:i}=ar(),o=JSON.stringify(ep(s,t.v7_relativeSplatPath)),l=I.useRef(!1);return sp(()=>{l.current=!0}),I.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let m=tp(u,JSON.parse(o),i,d.relative==="path");n==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:dn([e,m.pathname])),(d.replace?r.replace:r.push)(m,d.state,d)},[e,r,o,i,n])}function ip(n,e){let{relative:t}=e===void 0?{}:e,{future:r}=I.useContext(ir),{matches:s}=I.useContext(or),{pathname:i}=ar(),o=JSON.stringify(ep(s,r.v7_relativeSplatPath));return I.useMemo(()=>tp(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function m_(n,e){return p_(n,e)}function p_(n,e,t,r){ti()||Ne(!1);let{navigator:s}=I.useContext(ir),{matches:i}=I.useContext(or),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=ar(),d;if(e){var m;let x=typeof e=="string"?Wr(e):e;c==="/"||(m=x.pathname)!=null&&m.startsWith(c)||Ne(!1),d=x}else d=u;let g=d.pathname||"/",y=g;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=Yw(n,{pathname:y}),T=__(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:dn([c,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:dn([c,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,t,r);return e&&T?I.createElement(Fo.Provider,{value:{location:Ls({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:un.Pop}},T):T}function g_(){let n=E_(),e=l_(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),t?I.createElement("pre",{style:s},t):null,i)}const y_=I.createElement(g_,null);class v_ extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?I.createElement(or.Provider,{value:this.props.routeContext},I.createElement(rp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function w_(n){let{routeContext:e,match:t,children:r}=n,s=I.useContext(uc);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),I.createElement(or.Provider,{value:e},r)}function __(n,e,t,r){var s;if(e===void 0&&(e=[]),t===void 0&&(t=null),r===void 0&&(r=null),n==null){var i;if(!t)return null;if(t.errors)n=t.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,l=(s=t)==null?void 0:s.errors;if(l!=null){let d=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);d>=0||Ne(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(t&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let m=o[d];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(u=d),m.route.id){let{loaderData:g,errors:y}=t,b=m.route.loader&&g[m.route.id]===void 0&&(!y||y[m.route.id]===void 0);if(m.route.lazy||b){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,m,g)=>{let y,b=!1,T=null,x=null;t&&(y=l&&m.route.id?l[m.route.id]:void 0,T=m.route.errorElement||y_,c&&(u<0&&g===0?(A_("route-fallback",!1),b=!0,x=null):u===g&&(b=!0,x=m.route.hydrateFallbackElement||null)));let V=e.concat(o.slice(0,g+1)),k=()=>{let R;return y?R=T:b?R=x:m.route.Component?R=I.createElement(m.route.Component,null):m.route.element?R=m.route.element:R=d,I.createElement(w_,{match:m,routeContext:{outlet:d,matches:V,isDataRoute:t!=null},children:R})};return t&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?I.createElement(v_,{location:t.location,revalidation:t.revalidation,component:T,error:y,children:k(),routeContext:{outlet:null,matches:V,isDataRoute:!0}}):k()},null)}var op=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(op||{}),lo=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(lo||{});function x_(n){let e=I.useContext(uc);return e||Ne(!1),e}function b_(n){let e=I.useContext(u_);return e||Ne(!1),e}function T_(n){let e=I.useContext(or);return e||Ne(!1),e}function ap(n){let e=T_(),t=e.matches[e.matches.length-1];return t.route.id||Ne(!1),t.route.id}function E_(){var n;let e=I.useContext(rp),t=b_(lo.UseRouteError),r=ap(lo.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function I_(){let{router:n}=x_(op.UseNavigateStable),e=ap(lo.UseNavigateStable),t=I.useRef(!1);return sp(()=>{t.current=!0}),I.useCallback(function(s,i){i===void 0&&(i={}),t.current&&(typeof s=="number"?n.navigate(s):n.navigate(s,Ls({fromRouteId:e},i)))},[n,e])}const zh={};function A_(n,e,t){!e&&!zh[n]&&(zh[n]=!0)}function C_(n,e){n==null||n.v7_startTransition,(n==null?void 0:n.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function _r(n){Ne(!1)}function P_(n){let{basename:e="/",children:t=null,location:r,navigationType:s=un.Pop,navigator:i,static:o=!1,future:l}=n;ti()&&Ne(!1);let c=e.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:c,navigator:i,static:o,future:Ls({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Wr(r));let{pathname:d="/",search:m="",hash:g="",state:y=null,key:b="default"}=r,T=I.useMemo(()=>{let x=cc(d,c);return x==null?null:{location:{pathname:x,search:m,hash:g,state:y,key:b},navigationType:s}},[c,d,m,g,y,b,s]);return T==null?null:I.createElement(ir.Provider,{value:u},I.createElement(Fo.Provider,{children:t,value:T}))}function S_(n){let{children:e,location:t}=n;return m_(fl(e),t)}new Promise(()=>{});function fl(n,e){e===void 0&&(e=[]);let t=[];return I.Children.forEach(n,(r,s)=>{if(!I.isValidElement(r))return;let i=[...e,s];if(r.type===I.Fragment){t.push.apply(t,fl(r.props.children,i));return}r.type!==_r&&Ne(!1),!r.props.index||!r.props.children||Ne(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fl(r.props.children,i)),t.push(o)}),t}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ml.apply(this,arguments)}function R_(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}function N_(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function k_(n,e){return n.button===0&&(!e||e==="_self")&&!N_(n)}const V_=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],j_="6";try{window.__reactRouterVersion=j_}catch{}const D_="startTransition",qh=Ow[D_];function M_(n){let{basename:e,children:t,future:r,window:s}=n,i=I.useRef();i.current==null&&(i.current=Fw({window:s,v5Compat:!0}));let o=i.current,[l,c]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},d=I.useCallback(m=>{u&&qh?qh(()=>c(m)):c(m)},[c,u]);return I.useLayoutEffect(()=>o.listen(d),[o,d]),I.useEffect(()=>C_(r),[r]),I.createElement(P_,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:o,future:r})}const O_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",L_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fn=I.forwardRef(function(e,t){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:m}=e,g=R_(e,V_),{basename:y}=I.useContext(ir),b,T=!1;if(typeof u=="string"&&L_.test(u)&&(b=u,O_))try{let R=new URL(window.location.href),D=u.startsWith("//")?new URL(R.protocol+u):new URL(u),F=cc(D.pathname,y);D.origin===R.origin&&F!=null?u=F+D.search+D.hash:T=!0}catch{}let x=h_(u,{relative:s}),V=F_(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:m});function k(R){r&&r(R),R.defaultPrevented||V(R)}return I.createElement("a",ml({},g,{href:b||x,onClick:T||i?r:k,ref:t,target:c}))});var Hh;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(Hh||(Hh={}));var Gh;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(Gh||(Gh={}));function F_(n,e){let{target:t,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=d_(),u=ar(),d=ip(n,{relative:o});return I.useCallback(m=>{if(k_(m,t)){m.preventDefault();let g=r!==void 0?r:ao(u)===ao(d);c(n,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,r,s,t,n,i,o,l])}function lp(n){var e,t,r="";if(typeof n=="string"||typeof n=="number")r+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=lp(n[e]))&&(r&&(r+=" "),r+=t)}else for(t in n)n[t]&&(r&&(r+=" "),r+=t);return r}function cp(){for(var n,e,t=0,r="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=lp(n))&&(r&&(r+=" "),r+=e);return r}function U_(){for(var n=0,e,t,r="";n<arguments.length;)(e=arguments[n++])&&(t=up(e))&&(r&&(r+=" "),r+=t);return r}function up(n){if(typeof n=="string")return n;for(var e,t="",r=0;r<n.length;r++)n[r]&&(e=up(n[r]))&&(t&&(t+=" "),t+=e);return t}var hc="-";function B_(n){var e=$_(n),t=n.conflictingClassGroups,r=n.conflictingClassGroupModifiers,s=r===void 0?{}:r;function i(l){var c=l.split(hc);return c[0]===""&&c.length!==1&&c.shift(),hp(c,e)||Y_(l)}function o(l,c){var u=t[l]||[];return c&&s[l]?[].concat(u,s[l]):u}return{getClassGroupId:i,getConflictingClassGroupIds:o}}function hp(n,e){var o;if(n.length===0)return e.classGroupId;var t=n[0],r=e.nextPart.get(t),s=r?hp(n.slice(1),r):void 0;if(s)return s;if(e.validators.length!==0){var i=n.join(hc);return(o=e.validators.find(function(l){var c=l.validator;return c(i)}))==null?void 0:o.classGroupId}}var Wh=/^\[(.+)\]$/;function Y_(n){if(Wh.test(n)){var e=Wh.exec(n)[1],t=e==null?void 0:e.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}}function $_(n){var e=n.theme,t=n.prefix,r={nextPart:new Map,validators:[]},s=q_(Object.entries(n.classGroups),t);return s.forEach(function(i){var o=i[0],l=i[1];pl(l,r,o,e)}),r}function pl(n,e,t,r){n.forEach(function(s){if(typeof s=="string"){var i=s===""?e:Kh(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(z_(s)){pl(s(r),e,t,r);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(function(o){var l=o[0],c=o[1];pl(c,Kh(e,l),t,r)})})}function Kh(n,e){var t=n;return e.split(hc).forEach(function(r){t.nextPart.has(r)||t.nextPart.set(r,{nextPart:new Map,validators:[]}),t=t.nextPart.get(r)}),t}function z_(n){return n.isThemeGetter}function q_(n,e){return e?n.map(function(t){var r=t[0],s=t[1],i=s.map(function(o){return typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(function(l){var c=l[0],u=l[1];return[e+c,u]})):o});return[r,i]}):n}function H_(n){if(n<1)return{get:function(){},set:function(){}};var e=0,t=new Map,r=new Map;function s(i,o){t.set(i,o),e++,e>n&&(e=0,r=t,t=new Map)}return{get:function(o){var l=t.get(o);if(l!==void 0)return l;if((l=r.get(o))!==void 0)return s(o,l),l},set:function(o,l){t.has(o)?t.set(o,l):s(o,l)}}}var dp="!";function G_(n){var e=n.separator||":",t=e.length===1,r=e[0],s=e.length;return function(o){for(var l=[],c=0,u=0,d,m=0;m<o.length;m++){var g=o[m];if(c===0){if(g===r&&(t||o.slice(m,m+s)===e)){l.push(o.slice(u,m)),u=m+s;continue}if(g==="/"){d=m;continue}}g==="["?c++:g==="]"&&c--}var y=l.length===0?o:o.substring(u),b=y.startsWith(dp),T=b?y.substring(1):y,x=d&&d>u?d-u:void 0;return{modifiers:l,hasImportantModifier:b,baseClassName:T,maybePostfixModifierPosition:x}}}function W_(n){if(n.length<=1)return n;var e=[],t=[];return n.forEach(function(r){var s=r[0]==="[";s?(e.push.apply(e,t.sort().concat([r])),t=[]):t.push(r)}),e.push.apply(e,t.sort()),e}function K_(n){return{cache:H_(n.cacheSize),splitModifiers:G_(n),...B_(n)}}var Q_=/\s+/;function X_(n,e){var t=e.splitModifiers,r=e.getClassGroupId,s=e.getConflictingClassGroupIds,i=new Set;return n.trim().split(Q_).map(function(o){var l=t(o),c=l.modifiers,u=l.hasImportantModifier,d=l.baseClassName,m=l.maybePostfixModifierPosition,g=r(m?d.substring(0,m):d),y=!!m;if(!g){if(!m)return{isTailwindClass:!1,originalClassName:o};if(g=r(d),!g)return{isTailwindClass:!1,originalClassName:o};y=!1}var b=W_(c).join(":"),T=u?b+dp:b;return{isTailwindClass:!0,modifierId:T,classGroupId:g,originalClassName:o,hasPostfixModifier:y}}).reverse().filter(function(o){if(!o.isTailwindClass)return!0;var l=o.modifierId,c=o.classGroupId,u=o.hasPostfixModifier,d=l+c;return i.has(d)?!1:(i.add(d),s(c,u).forEach(function(m){return i.add(l+m)}),!0)}).reverse().map(function(o){return o.originalClassName}).join(" ")}function J_(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];var r,s,i,o=l;function l(u){var d=e[0],m=e.slice(1),g=m.reduce(function(y,b){return b(y)},d());return r=K_(g),s=r.cache.get,i=r.cache.set,o=c,c(u)}function c(u){var d=s(u);if(d)return d;var m=X_(u,r);return i(u,m),m}return function(){return o(U_.apply(null,arguments))}}function fe(n){var e=function(r){return r[n]||[]};return e.isThemeGetter=!0,e}var fp=/^\[(?:([a-z-]+):)?(.+)\]$/i,Z_=/^\d+\/\d+$/,ex=new Set(["px","full","screen"]),tx=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,nx=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,rx=/^-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/;function dt(n){return Hn(n)||ex.has(n)||Z_.test(n)||gl(n)}function gl(n){return lr(n,"length",cx)}function sx(n){return lr(n,"size",mp)}function ix(n){return lr(n,"position",mp)}function ox(n){return lr(n,"url",ux)}function Vi(n){return lr(n,"number",Hn)}function Hn(n){return!Number.isNaN(Number(n))}function ax(n){return n.endsWith("%")&&Hn(n.slice(0,-1))}function ys(n){return Qh(n)||lr(n,"number",Qh)}function ee(n){return fp.test(n)}function vs(){return!0}function tn(n){return tx.test(n)}function lx(n){return lr(n,"",hx)}function lr(n,e,t){var r=fp.exec(n);return r?r[1]?r[1]===e:t(r[2]):!1}function cx(n){return nx.test(n)}function mp(){return!1}function ux(n){return n.startsWith("url(")}function Qh(n){return Number.isInteger(Number(n))}function hx(n){return rx.test(n)}function dx(){var n=fe("colors"),e=fe("spacing"),t=fe("blur"),r=fe("brightness"),s=fe("borderColor"),i=fe("borderRadius"),o=fe("borderSpacing"),l=fe("borderWidth"),c=fe("contrast"),u=fe("grayscale"),d=fe("hueRotate"),m=fe("invert"),g=fe("gap"),y=fe("gradientColorStops"),b=fe("gradientColorStopPositions"),T=fe("inset"),x=fe("margin"),V=fe("opacity"),k=fe("padding"),R=fe("saturate"),D=fe("scale"),F=fe("sepia"),$=fe("skew"),A=fe("space"),w=fe("translate"),_=function(){return["auto","contain","none"]},C=function(){return["auto","hidden","clip","visible","scroll"]},S=function(){return["auto",ee,e]},P=function(){return[ee,e]},E=function(){return["",dt]},B=function(){return["auto",Hn,ee]},ce=function(){return["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"]},se=function(){return["solid","dashed","dotted","double","none"]},ye=function(){return["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter"]},Ee=function(){return["start","end","center","between","around","evenly","stretch"]},Ie=function(){return["","0",ee]},yt=function(){return["auto","avoid","all","avoid-page","page","left","right","column"]},ie=function(){return[Hn,Vi]},ve=function(){return[Hn,ee]};return{cacheSize:500,theme:{colors:[vs],spacing:[dt],blur:["none","",tn,ee],brightness:ie(),borderColor:[n],borderRadius:["none","","full",tn,ee],borderSpacing:P(),borderWidth:E(),contrast:ie(),grayscale:Ie(),hueRotate:ve(),invert:Ie(),gap:P(),gradientColorStops:[n],gradientColorStopPositions:[ax,gl],inset:S(),margin:S(),opacity:ie(),padding:P(),saturate:ie(),scale:ie(),sepia:Ie(),skew:ve(),space:P(),translate:P()},classGroups:{aspect:[{aspect:["auto","square","video",ee]}],container:["container"],columns:[{columns:[tn]}],"break-after":[{"break-after":yt()}],"break-before":[{"break-before":yt()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none"]}],clear:[{clear:["left","right","both","none"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[].concat(ce(),[ee])}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:_()}],"overscroll-x":[{"overscroll-x":_()}],"overscroll-y":[{"overscroll-y":_()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[T]}],"inset-x":[{"inset-x":[T]}],"inset-y":[{"inset-y":[T]}],start:[{start:[T]}],end:[{end:[T]}],top:[{top:[T]}],right:[{right:[T]}],bottom:[{bottom:[T]}],left:[{left:[T]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ys]}],basis:[{basis:S()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ee]}],grow:[{grow:Ie()}],shrink:[{shrink:Ie()}],order:[{order:["first","last","none",ys]}],"grid-cols":[{"grid-cols":[vs]}],"col-start-end":[{col:["auto",{span:["full",ys]},ee]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[vs]}],"row-start-end":[{row:["auto",{span:[ys]},ee]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ee]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ee]}],gap:[{gap:[g]}],"gap-x":[{"gap-x":[g]}],"gap-y":[{"gap-y":[g]}],"justify-content":[{justify:["normal"].concat(Ee())}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal"].concat(Ee(),["baseline"])}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[].concat(Ee(),["baseline"])}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[k]}],px:[{px:[k]}],py:[{py:[k]}],ps:[{ps:[k]}],pe:[{pe:[k]}],pt:[{pt:[k]}],pr:[{pr:[k]}],pb:[{pb:[k]}],pl:[{pl:[k]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit",ee,e]}],"min-w":[{"min-w":["min","max","fit",ee,dt]}],"max-w":[{"max-w":["0","none","full","min","max","fit","prose",{screen:[tn]},tn,ee]}],h:[{h:[ee,e,"auto","min","max","fit"]}],"min-h":[{"min-h":["min","max","fit",ee,dt]}],"max-h":[{"max-h":[ee,e,"min","max","fit"]}],"font-size":[{text:["base",tn,gl]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Vi]}],"font-family":[{font:[vs]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractons"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ee]}],"line-clamp":[{"line-clamp":["none",Hn,Vi]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ee,dt]}],"list-image":[{"list-image":["none",ee]}],"list-style-type":[{list:["none","disc","decimal",ee]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[n]}],"placeholder-opacity":[{"placeholder-opacity":[V]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[n]}],"text-opacity":[{"text-opacity":[V]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[].concat(se(),["wavy"])}],"text-decoration-thickness":[{decoration:["auto","from-font",dt]}],"underline-offset":[{"underline-offset":["auto",ee,dt]}],"text-decoration-color":[{decoration:[n]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],indent:[{indent:P()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ee]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ee]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[V]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[].concat(ce(),[ix])}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",sx]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},ox]}],"bg-color":[{bg:[n]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[V]}],"border-style":[{border:[].concat(se(),["hidden"])}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[V]}],"divide-style":[{divide:se()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:[""].concat(se())}],"outline-offset":[{"outline-offset":[ee,dt]}],"outline-w":[{outline:[dt]}],"outline-color":[{outline:[n]}],"ring-w":[{ring:E()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[n]}],"ring-opacity":[{"ring-opacity":[V]}],"ring-offset-w":[{"ring-offset":[dt]}],"ring-offset-color":[{"ring-offset":[n]}],shadow:[{shadow:["","inner","none",tn,lx]}],"shadow-color":[{shadow:[vs]}],opacity:[{opacity:[V]}],"mix-blend":[{"mix-blend":ye()}],"bg-blend":[{"bg-blend":ye()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",tn,ee]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[m]}],saturate:[{saturate:[R]}],sepia:[{sepia:[F]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[m]}],"backdrop-opacity":[{"backdrop-opacity":[V]}],"backdrop-saturate":[{"backdrop-saturate":[R]}],"backdrop-sepia":[{"backdrop-sepia":[F]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ee]}],duration:[{duration:ve()}],ease:[{ease:["linear","in","out","in-out",ee]}],delay:[{delay:ve()}],animate:[{animate:["none","spin","ping","pulse","bounce",ee]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[ys,ee]}],"translate-x":[{"translate-x":[w]}],"translate-y":[{"translate-y":[w]}],"skew-x":[{"skew-x":[$]}],"skew-y":[{"skew-y":[$]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ee]}],accent:[{accent:["auto",n]}],appearance:["appearance-none"],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ee]}],"caret-color":[{caret:[n]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":P()}],"scroll-mx":[{"scroll-mx":P()}],"scroll-my":[{"scroll-my":P()}],"scroll-ms":[{"scroll-ms":P()}],"scroll-me":[{"scroll-me":P()}],"scroll-mt":[{"scroll-mt":P()}],"scroll-mr":[{"scroll-mr":P()}],"scroll-mb":[{"scroll-mb":P()}],"scroll-ml":[{"scroll-ml":P()}],"scroll-p":[{"scroll-p":P()}],"scroll-px":[{"scroll-px":P()}],"scroll-py":[{"scroll-py":P()}],"scroll-ps":[{"scroll-ps":P()}],"scroll-pe":[{"scroll-pe":P()}],"scroll-pt":[{"scroll-pt":P()}],"scroll-pr":[{"scroll-pr":P()}],"scroll-pb":[{"scroll-pb":P()}],"scroll-pl":[{"scroll-pl":P()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","pinch-zoom","manipulation",{pan:["x","left","right","y","up","down"]}]}],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ee]}],fill:[{fill:[n,"none"]}],"stroke-w":[{stroke:[dt,Vi]}],stroke:[{stroke:[n,"none"]}],sr:["sr-only","not-sr-only"]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}}var fx=J_(dx);function Ze(...n){return fx(cp(n))}var mx=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),px="VisuallyHidden",dc=I.forwardRef((n,e)=>h.jsx(kn.span,{...n,ref:e,style:{...mx,...n.style}}));dc.displayName=px;var fc="ToastProvider",[mc,gx,yx]=Ew("Toast"),[pp,h2]=Iw("Toast",[yx]),[vx,Uo]=pp(fc),gp=n=>{const{__scopeToast:e,label:t="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=n,[l,c]=I.useState(null),[u,d]=I.useState(0),m=I.useRef(!1),g=I.useRef(!1);return t.trim()||console.error(`Invalid prop \`label\` supplied to \`${fc}\`. Expected non-empty \`string\`.`),h.jsx(mc.Provider,{scope:e,children:h.jsx(vx,{scope:e,label:t,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:I.useCallback(()=>d(y=>y+1),[]),onToastRemove:I.useCallback(()=>d(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:m,isClosePausedRef:g,children:o})})};gp.displayName=fc;var yp="ToastViewport",wx=["F8"],yl="toast.viewportPause",vl="toast.viewportResume",vp=I.forwardRef((n,e)=>{const{__scopeToast:t,hotkey:r=wx,label:s="Notifications ({hotkey})",...i}=n,o=Uo(yp,t),l=gx(t),c=I.useRef(null),u=I.useRef(null),d=I.useRef(null),m=I.useRef(null),g=zm(e,m,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;I.useEffect(()=>{const x=V=>{var R;r.length!==0&&r.every(D=>V[D]||V.code===D)&&((R=m.current)==null||R.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),I.useEffect(()=>{const x=c.current,V=m.current;if(b&&x&&V){const k=()=>{if(!o.isClosePausedRef.current){const $=new CustomEvent(yl);V.dispatchEvent($),o.isClosePausedRef.current=!0}},R=()=>{if(o.isClosePausedRef.current){const $=new CustomEvent(vl);V.dispatchEvent($),o.isClosePausedRef.current=!1}},D=$=>{!x.contains($.relatedTarget)&&R()},F=()=>{x.contains(document.activeElement)||R()};return x.addEventListener("focusin",k),x.addEventListener("focusout",D),x.addEventListener("pointermove",k),x.addEventListener("pointerleave",F),window.addEventListener("blur",k),window.addEventListener("focus",R),()=>{x.removeEventListener("focusin",k),x.removeEventListener("focusout",D),x.removeEventListener("pointermove",k),x.removeEventListener("pointerleave",F),window.removeEventListener("blur",k),window.removeEventListener("focus",R)}}},[b,o.isClosePausedRef]);const T=I.useCallback(({tabbingDirection:x})=>{const k=l().map(R=>{const D=R.ref.current,F=[D,...kx(D)];return x==="forwards"?F:F.reverse()});return(x==="forwards"?k.reverse():k).flat()},[l]);return I.useEffect(()=>{const x=m.current;if(x){const V=k=>{var F,$,A;const R=k.altKey||k.ctrlKey||k.metaKey;if(k.key==="Tab"&&!R){const w=document.activeElement,_=k.shiftKey;if(k.target===x&&_){(F=u.current)==null||F.focus();return}const P=T({tabbingDirection:_?"backwards":"forwards"}),E=P.findIndex(B=>B===w);Oa(P.slice(E+1))?k.preventDefault():_?($=u.current)==null||$.focus():(A=d.current)==null||A.focus()}};return x.addEventListener("keydown",V),()=>x.removeEventListener("keydown",V)}},[l,T]),h.jsxs(Aw,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&h.jsx(wl,{ref:u,onFocusFromOutsideViewport:()=>{const x=T({tabbingDirection:"forwards"});Oa(x)}}),h.jsx(mc.Slot,{scope:t,children:h.jsx(kn.ol,{tabIndex:-1,...i,ref:g})}),b&&h.jsx(wl,{ref:d,onFocusFromOutsideViewport:()=>{const x=T({tabbingDirection:"backwards"});Oa(x)}})]})});vp.displayName=yp;var wp="ToastFocusProxy",wl=I.forwardRef((n,e)=>{const{__scopeToast:t,onFocusFromOutsideViewport:r,...s}=n,i=Uo(wp,t);return h.jsx(dc,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var u;const l=o.relatedTarget;!((u=i.viewport)!=null&&u.contains(l))&&r()}})});wl.displayName=wp;var ni="Toast",_x="toast.swipeStart",xx="toast.swipeMove",bx="toast.swipeCancel",Tx="toast.swipeEnd",_p=I.forwardRef((n,e)=>{const{forceMount:t,open:r,defaultOpen:s,onOpenChange:i,...o}=n,[l,c]=Cw({prop:r,defaultProp:s??!0,onChange:i,caller:ni});return h.jsx(Pw,{present:t||l,children:h.jsx(Ax,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:oo(n.onPause),onResume:oo(n.onResume),onSwipeStart:wt(n.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:wt(n.onSwipeMove,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${m}px`)}),onSwipeCancel:wt(n.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:wt(n.onSwipeEnd,u=>{const{x:d,y:m}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${m}px`),c(!1)})})})});_p.displayName=ni;var[Ex,Ix]=pp(ni,{onClose(){}}),Ax=I.forwardRef((n,e)=>{const{__scopeToast:t,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:m,onSwipeCancel:g,onSwipeEnd:y,...b}=n,T=Uo(ni,t),[x,V]=I.useState(null),k=zm(e,B=>V(B)),R=I.useRef(null),D=I.useRef(null),F=s||T.duration,$=I.useRef(0),A=I.useRef(F),w=I.useRef(0),{onToastAdd:_,onToastRemove:C}=T,S=oo(()=>{var ce;(x==null?void 0:x.contains(document.activeElement))&&((ce=T.viewport)==null||ce.focus()),o()}),P=I.useCallback(B=>{!B||B===1/0||(window.clearTimeout(w.current),$.current=new Date().getTime(),w.current=window.setTimeout(S,B))},[S]);I.useEffect(()=>{const B=T.viewport;if(B){const ce=()=>{P(A.current),u==null||u()},se=()=>{const ye=new Date().getTime()-$.current;A.current=A.current-ye,window.clearTimeout(w.current),c==null||c()};return B.addEventListener(yl,se),B.addEventListener(vl,ce),()=>{B.removeEventListener(yl,se),B.removeEventListener(vl,ce)}}},[T.viewport,F,c,u,P]),I.useEffect(()=>{i&&!T.isClosePausedRef.current&&P(F)},[i,F,T.isClosePausedRef,P]),I.useEffect(()=>(_(),()=>C()),[_,C]);const E=I.useMemo(()=>x?Cp(x):null,[x]);return T.viewport?h.jsxs(h.Fragment,{children:[E&&h.jsx(Cx,{__scopeToast:t,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:E}),h.jsx(Ex,{scope:t,onClose:S,children:Qm.createPortal(h.jsx(mc.ItemSlot,{scope:t,children:h.jsx(Sw,{asChild:!0,onEscapeKeyDown:wt(l,()=>{T.isFocusedToastEscapeKeyDownRef.current||S(),T.isFocusedToastEscapeKeyDownRef.current=!1}),children:h.jsx(kn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":T.swipeDirection,...b,ref:k,style:{userSelect:"none",touchAction:"none",...n.style},onKeyDown:wt(n.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(T.isFocusedToastEscapeKeyDownRef.current=!0,S()))}),onPointerDown:wt(n.onPointerDown,B=>{B.button===0&&(R.current={x:B.clientX,y:B.clientY})}),onPointerMove:wt(n.onPointerMove,B=>{if(!R.current)return;const ce=B.clientX-R.current.x,se=B.clientY-R.current.y,ye=!!D.current,Ee=["left","right"].includes(T.swipeDirection),Ie=["left","up"].includes(T.swipeDirection)?Math.min:Math.max,yt=Ee?Ie(0,ce):0,ie=Ee?0:Ie(0,se),ve=B.pointerType==="touch"?10:2,Z={x:yt,y:ie},Dn={originalEvent:B,delta:Z};ye?(D.current=Z,ji(xx,m,Dn,{discrete:!1})):Xh(Z,T.swipeDirection,ve)?(D.current=Z,ji(_x,d,Dn,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ce)>ve||Math.abs(se)>ve)&&(R.current=null)}),onPointerUp:wt(n.onPointerUp,B=>{const ce=D.current,se=B.target;if(se.hasPointerCapture(B.pointerId)&&se.releasePointerCapture(B.pointerId),D.current=null,R.current=null,ce){const ye=B.currentTarget,Ee={originalEvent:B,delta:ce};Xh(ce,T.swipeDirection,T.swipeThreshold)?ji(Tx,y,Ee,{discrete:!0}):ji(bx,g,Ee,{discrete:!0}),ye.addEventListener("click",Ie=>Ie.preventDefault(),{once:!0})}})})})}),T.viewport)})]}):null}),Cx=n=>{const{__scopeToast:e,children:t,...r}=n,s=Uo(ni,e),[i,o]=I.useState(!1),[l,c]=I.useState(!1);return Rx(()=>o(!0)),I.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:h.jsx(Rw,{asChild:!0,children:h.jsx(dc,{...r,children:i&&h.jsxs(h.Fragment,{children:[s.label," ",t]})})})},Px="ToastTitle",xp=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(kn.div,{...r,ref:e})});xp.displayName=Px;var Sx="ToastDescription",bp=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n;return h.jsx(kn.div,{...r,ref:e})});bp.displayName=Sx;var Tp="ToastAction",Ep=I.forwardRef((n,e)=>{const{altText:t,...r}=n;return t.trim()?h.jsx(Ap,{altText:t,asChild:!0,children:h.jsx(pc,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${Tp}\`. Expected non-empty \`string\`.`),null)});Ep.displayName=Tp;var Ip="ToastClose",pc=I.forwardRef((n,e)=>{const{__scopeToast:t,...r}=n,s=Ix(Ip,t);return h.jsx(Ap,{asChild:!0,children:h.jsx(kn.button,{type:"button",...r,ref:e,onClick:wt(n.onClick,s.onClose)})})});pc.displayName=Ip;var Ap=I.forwardRef((n,e)=>{const{__scopeToast:t,altText:r,...s}=n;return h.jsx(kn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Cp(n){const e=[];return Array.from(n.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),Nx(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...Cp(r))}}),e}function ji(n,e,t,{discrete:r}){const s=t.originalEvent.currentTarget,i=new CustomEvent(n,{bubbles:!0,cancelable:!0,detail:t});e&&s.addEventListener(n,e,{once:!0}),r?kw(s,i):s.dispatchEvent(i)}var Xh=(n,e,t=0)=>{const r=Math.abs(n.x),s=Math.abs(n.y),i=r>s;return e==="left"||e==="right"?i&&r>t:!i&&s>t};function Rx(n=()=>{}){const e=oo(n);Nw(()=>{let t=0,r=0;return t=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(t),window.cancelAnimationFrame(r)}},[e])}function Nx(n){return n.nodeType===n.ELEMENT_NODE}function kx(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Oa(n){const e=document.activeElement;return n.some(t=>t===e?!0:(t.focus(),document.activeElement!==e))}var Vx=gp,Pp=vp,Sp=_p,Rp=xp,Np=bp,kp=Ep,Vp=pc;const Jh=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,Zh=cp,gc=(n,e)=>t=>{var r;if((e==null?void 0:e.variants)==null)return Zh(n,t==null?void 0:t.class,t==null?void 0:t.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(u=>{const d=t==null?void 0:t[u],m=i==null?void 0:i[u];if(d===null)return null;const g=Jh(d)||Jh(m);return s[u][g]}),l=t&&Object.entries(t).reduce((u,d)=>{let[m,g]=d;return g===void 0||(u[m]=g),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:m,className:g,...y}=d;return Object.entries(y).every(b=>{let[T,x]=b;return Array.isArray(x)?x.includes({...i,...l}[T]):{...i,...l}[T]===x})?[...u,m,g]:u},[]);return Zh(n,o,c,t==null?void 0:t.class,t==null?void 0:t.className)};var jx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Dx=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Te=(n,e)=>{const t=I.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},u)=>I.createElement("svg",{ref:u,...jx,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${Dx(n)}`,...c},[...e.map(([d,m])=>I.createElement(d,m)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t},Mx=Te("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Ox=Te("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),ed=Te("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),mn=Te("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),jp=Te("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Lx=Te("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]),td=Te("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]),Dp=Te("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),nd=Te("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]),Fx=Te("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Mp=Te("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),Ux=Te("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Hi=Te("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Bx=Te("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]),Yx=Te("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),De=Te("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),$x=Te("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),zx=Te("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Op=Te("Triangle",[["path",{d:"M13.73 4a2 2 0 0 0-3.46 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"14u9p9"}]]),qx=Te("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Hx=Te("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Lp=Te("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Gx=Vx,Fp=Fe.forwardRef(({className:n,...e},t)=>h.jsx(Pp,{ref:t,className:Ze("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",n),...e}));Fp.displayName=Pp.displayName;const Wx=gc("data-[swipe=move]:transition-none group relative pointer-events-auto flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full data-[state=closed]:slide-out-to-right-full",{variants:{variant:{default:"bg-[rgba(255,107,53,0.15)] border border-[rgba(255,107,53,0.3)] backdrop-blur-md text-orange-900",destructive:"bg-[rgba(255,107,53,0.15)] border border-[rgba(255,107,53,0.3)] backdrop-blur-md text-orange-900"}},defaultVariants:{variant:"default"}}),Up=Fe.forwardRef(({className:n,variant:e,...t},r)=>h.jsx(Sp,{ref:r,className:Ze(Wx({variant:e}),n),...t}));Up.displayName=Sp.displayName;const Kx=Fe.forwardRef(({className:n,...e},t)=>h.jsx(kp,{ref:t,className:Ze("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-destructive/30 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",n),...e}));Kx.displayName=kp.displayName;const Bp=Fe.forwardRef(({className:n,...e},t)=>h.jsx(Vp,{ref:t,className:Ze("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",n),"toast-close":"",...e,children:h.jsx(Lp,{className:"h-4 w-4"})}));Bp.displayName=Vp.displayName;const Yp=Fe.forwardRef(({className:n,...e},t)=>h.jsx(Rp,{ref:t,className:Ze("text-sm font-semibold",n),...e}));Yp.displayName=Rp.displayName;const $p=Fe.forwardRef(({className:n,...e},t)=>h.jsx(Np,{ref:t,className:Ze("text-sm opacity-90",n),...e}));$p.displayName=Np.displayName;const Qx=1;let La=0;function Xx(){return La=(La+1)%Number.MAX_VALUE,La.toString()}const Xe={state:{toasts:[]},listeners:[],getState:()=>Xe.state,setState:n=>{typeof n=="function"?Xe.state=n(Xe.state):Xe.state={...Xe.state,...n},Xe.listeners.forEach(e=>e(Xe.state))},subscribe:n=>(Xe.listeners.push(n),()=>{Xe.listeners=Xe.listeners.filter(e=>e!==n)})},Se=({...n})=>{const e=Xx(),t=s=>Xe.setState(i=>({...i,toasts:i.toasts.map(o=>o.id===e?{...o,...s}:o)})),r=()=>Xe.setState(s=>({...s,toasts:s.toasts.filter(i=>i.id!==e)}));return Xe.setState(s=>({...s,toasts:[{...n,id:e,dismiss:r},...s.toasts].slice(0,Qx)})),{id:e,dismiss:r,update:t}};function Jx(){const[n,e]=I.useState(Xe.getState());return I.useEffect(()=>Xe.subscribe(r=>{e(r)}),[]),I.useEffect(()=>{const t=[];return n.toasts.forEach(r=>{if(r.duration===1/0)return;const s=setTimeout(()=>{r.dismiss()},r.duration||5e3);t.push(s)}),()=>{t.forEach(r=>clearTimeout(r))}},[n.toasts]),{toast:Se,toasts:n.toasts}}function Zx(){const{toasts:n}=Jx();return h.jsxs(Gx,{children:[n.map(({id:e,title:t,description:r,action:s,...i})=>h.jsxs(Up,{...i,children:[h.jsxs("div",{className:"grid gap-1",children:[t&&h.jsx(Yp,{children:t}),r&&h.jsx($p,{children:r})]}),s,h.jsx(Bp,{})]},e)),h.jsx(Fp,{})]})}const zp=I.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),Bo=I.createContext({}),Yo=I.createContext(null),$o=typeof document<"u",yc=$o?I.useLayoutEffect:I.useEffect,qp=I.createContext({strict:!1}),vc=n=>n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eb="framerAppearId",Hp="data-"+vc(eb);function tb(n,e,t,r){const{visualElement:s}=I.useContext(Bo),i=I.useContext(qp),o=I.useContext(Yo),l=I.useContext(zp).reducedMotion,c=I.useRef();r=r||i.renderer,!c.current&&r&&(c.current=r(n,{visualState:e,parent:s,props:t,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;I.useInsertionEffect(()=>{u&&u.update(t,o)});const d=I.useRef(!!(t[Hp]&&!window.HandoffComplete));return yc(()=>{u&&(u.render(),d.current&&u.animationState&&u.animationState.animateChanges())}),I.useEffect(()=>{u&&(u.updateFeatures(),!d.current&&u.animationState&&u.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),u}function Ir(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function nb(n,e,t){return I.useCallback(r=>{r&&n.mount&&n.mount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):Ir(t)&&(t.current=r))},[e])}function Fs(n){return typeof n=="string"||Array.isArray(n)}function zo(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const wc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_c=["initial",...wc];function qo(n){return zo(n.animate)||_c.some(e=>Fs(n[e]))}function Gp(n){return!!(qo(n)||n.variants)}function rb(n,e){if(qo(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Fs(t)?t:void 0,animate:Fs(r)?r:void 0}}return n.inherit!==!1?e:{}}function sb(n){const{initial:e,animate:t}=rb(n,I.useContext(Bo));return I.useMemo(()=>({initial:e,animate:t}),[rd(e),rd(t)])}function rd(n){return Array.isArray(n)?n.join(" "):n}const sd={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Us={};for(const n in sd)Us[n]={isEnabled:e=>sd[n].some(t=>!!e[t])};function ib(n){for(const e in n)Us[e]={...Us[e],...n[e]}}const xc=I.createContext({}),Wp=I.createContext({}),ob=Symbol.for("motionComponentSymbol");function ab({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:r,Component:s}){n&&ib(n);function i(l,c){let u;const d={...I.useContext(zp),...l,layoutId:lb(l)},{isStatic:m}=d,g=sb(l),y=r(l,m);if(!m&&$o){g.visualElement=tb(s,y,d,e);const b=I.useContext(Wp),T=I.useContext(qp).strict;g.visualElement&&(u=g.visualElement.loadFeatures(d,T,n,b))}return I.createElement(Bo.Provider,{value:g},u&&g.visualElement?I.createElement(u,{visualElement:g.visualElement,...d}):null,t(s,l,nb(y,g.visualElement,c),y,m,g.visualElement))}const o=I.forwardRef(i);return o[ob]=s,o}function lb({layoutId:n}){const e=I.useContext(xc).id;return e&&n!==void 0?e+"-"+n:n}function cb(n){function e(r,s={}){return ab(n(r,s))}if(typeof Proxy>"u")return e;const t=new Map;return new Proxy(e,{get:(r,s)=>(t.has(s)||t.set(s,e(s)),t.get(s))})}const ub=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function bc(n){return typeof n!="string"||n.includes("-")?!1:!!(ub.indexOf(n)>-1||/[A-Z]/.test(n))}const co={};function hb(n){Object.assign(co,n)}const ri=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],cr=new Set(ri);function Kp(n,{layout:e,layoutId:t}){return cr.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!co[n]||n==="opacity")}const nt=n=>!!(n&&n.getVelocity),db={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fb=ri.length;function mb(n,{enableHardwareAcceleration:e=!0,allowTransformNone:t=!0},r,s){let i="";for(let o=0;o<fb;o++){const l=ri[o];if(n[l]!==void 0){const c=db[l]||l;i+=`${c}(${n[l]}) `}}return e&&!n.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(n,r?"":i):t&&r&&(i="none"),i}const Qp=n=>e=>typeof e=="string"&&e.startsWith(n),Xp=Qp("--"),_l=Qp("var(--"),pb=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,gb=(n,e)=>e&&typeof n=="number"?e.transform(n):n,En=(n,e,t)=>Math.min(Math.max(t,n),e),ur={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Cs={...ur,transform:n=>En(0,1,n)},Di={...ur,default:1},Ps=n=>Math.round(n*1e5)/1e5,Ho=/(-)?([\d]*\.?[\d])+/g,Jp=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,yb=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function si(n){return typeof n=="string"}const ii=n=>({test:e=>si(e)&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),rn=ii("deg"),xt=ii("%"),q=ii("px"),vb=ii("vh"),wb=ii("vw"),id={...xt,parse:n=>xt.parse(n)/100,transform:n=>xt.transform(n*100)},od={...ur,transform:Math.round},Zp={borderWidth:q,borderTopWidth:q,borderRightWidth:q,borderBottomWidth:q,borderLeftWidth:q,borderRadius:q,radius:q,borderTopLeftRadius:q,borderTopRightRadius:q,borderBottomRightRadius:q,borderBottomLeftRadius:q,width:q,maxWidth:q,height:q,maxHeight:q,size:q,top:q,right:q,bottom:q,left:q,padding:q,paddingTop:q,paddingRight:q,paddingBottom:q,paddingLeft:q,margin:q,marginTop:q,marginRight:q,marginBottom:q,marginLeft:q,rotate:rn,rotateX:rn,rotateY:rn,rotateZ:rn,scale:Di,scaleX:Di,scaleY:Di,scaleZ:Di,skew:rn,skewX:rn,skewY:rn,distance:q,translateX:q,translateY:q,translateZ:q,x:q,y:q,z:q,perspective:q,transformPerspective:q,opacity:Cs,originX:id,originY:id,originZ:q,zIndex:od,fillOpacity:Cs,strokeOpacity:Cs,numOctaves:od};function Tc(n,e,t,r){const{style:s,vars:i,transform:o,transformOrigin:l}=n;let c=!1,u=!1,d=!0;for(const m in e){const g=e[m];if(Xp(m)){i[m]=g;continue}const y=Zp[m],b=gb(g,y);if(cr.has(m)){if(c=!0,o[m]=b,!d)continue;g!==(y.default||0)&&(d=!1)}else m.startsWith("origin")?(u=!0,l[m]=b):s[m]=b}if(e.transform||(c||r?s.transform=mb(n.transform,t,d,r):s.transform&&(s.transform="none")),u){const{originX:m="50%",originY:g="50%",originZ:y=0}=l;s.transformOrigin=`${m} ${g} ${y}`}}const Ec=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function eg(n,e,t){for(const r in e)!nt(e[r])&&!Kp(r,t)&&(n[r]=e[r])}function _b({transformTemplate:n},e,t){return I.useMemo(()=>{const r=Ec();return Tc(r,e,{enableHardwareAcceleration:!t},n),Object.assign({},r.vars,r.style)},[e])}function xb(n,e,t){const r=n.style||{},s={};return eg(s,r,n),Object.assign(s,_b(n,e,t)),n.transformValues?n.transformValues(s):s}function bb(n,e,t){const r={},s=xb(n,e,t);return n.drag&&n.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(r.tabIndex=0),r.style=s,r}const Tb=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function uo(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Tb.has(n)}let tg=n=>!uo(n);function Eb(n){n&&(tg=e=>e.startsWith("on")?!uo(e):n(e))}try{Eb(require("@emotion/is-prop-valid").default)}catch{}function Ib(n,e,t){const r={};for(const s in n)s==="values"&&typeof n.values=="object"||(tg(s)||t===!0&&uo(s)||!e&&!uo(s)||n.draggable&&s.startsWith("onDrag"))&&(r[s]=n[s]);return r}function ad(n,e,t){return typeof n=="string"?n:q.transform(e+t*n)}function Ab(n,e,t){const r=ad(e,n.x,n.width),s=ad(t,n.y,n.height);return`${r} ${s}`}const Cb={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pb={offset:"strokeDashoffset",array:"strokeDasharray"};function Sb(n,e,t=1,r=0,s=!0){n.pathLength=1;const i=s?Cb:Pb;n[i.offset]=q.transform(-r);const o=q.transform(e),l=q.transform(t);n[i.array]=`${o} ${l}`}function Ic(n,{attrX:e,attrY:t,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},d,m,g){if(Tc(n,u,d,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:y,style:b,dimensions:T}=n;y.transform&&(T&&(b.transform=y.transform),delete y.transform),T&&(s!==void 0||i!==void 0||b.transform)&&(b.transformOrigin=Ab(T,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),t!==void 0&&(y.y=t),r!==void 0&&(y.scale=r),o!==void 0&&Sb(y,o,l,c,!1)}const ng=()=>({...Ec(),attrs:{}}),Ac=n=>typeof n=="string"&&n.toLowerCase()==="svg";function Rb(n,e,t,r){const s=I.useMemo(()=>{const i=ng();return Ic(i,e,{enableHardwareAcceleration:!1},Ac(r),n.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(n.style){const i={};eg(i,n.style,n),s.style={...i,...s.style}}return s}function Nb(n=!1){return(t,r,s,{latestValues:i},o)=>{const c=(bc(t)?Rb:bb)(r,i,o,t),d={...Ib(r,typeof t=="string",n),...c,ref:s},{children:m}=r,g=I.useMemo(()=>nt(m)?m.get():m,[m]);return I.createElement(t,{...d,children:g})}}function rg(n,{style:e,vars:t},r,s){Object.assign(n.style,e,s&&s.getProjectionStyles(r));for(const i in t)n.style.setProperty(i,t[i])}const sg=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ig(n,e,t,r){rg(n,e,void 0,r);for(const s in e.attrs)n.setAttribute(sg.has(s)?s:vc(s),e.attrs[s])}function Cc(n,e){const{style:t}=n,r={};for(const s in t)(nt(t[s])||e.style&&nt(e.style[s])||Kp(s,n))&&(r[s]=t[s]);return r}function og(n,e){const t=Cc(n,e);for(const r in n)if(nt(n[r])||nt(e[r])){const s=ri.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;t[s]=n[r]}return t}function Pc(n,e,t,r={},s={}){return typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"&&(e=e(t!==void 0?t:n.custom,r,s)),e}function ag(n){const e=I.useRef(null);return e.current===null&&(e.current=n()),e.current}const ho=n=>Array.isArray(n),kb=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Vb=n=>ho(n)?n[n.length-1]||0:n;function Gi(n){const e=nt(n)?n.get():n;return kb(e)?e.toValue():e}function jb({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},r,s,i){const o={latestValues:Db(r,s,i,n),renderState:e()};return t&&(o.mount=l=>t(r,l,o)),o}const lg=n=>(e,t)=>{const r=I.useContext(Bo),s=I.useContext(Yo),i=()=>jb(n,e,r,s);return t?i():ag(i)};function Db(n,e,t,r){const s={},i=r(n,{});for(const g in i)s[g]=Gi(i[g]);let{initial:o,animate:l}=n;const c=qo(n),u=Gp(n);e&&u&&!c&&n.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||o===!1;const m=d?l:o;return m&&typeof m!="boolean"&&!zo(m)&&(Array.isArray(m)?m:[m]).forEach(y=>{const b=Pc(n,y);if(!b)return;const{transitionEnd:T,transition:x,...V}=b;for(const k in V){let R=V[k];if(Array.isArray(R)){const D=d?R.length-1:0;R=R[D]}R!==null&&(s[k]=R)}for(const k in T)s[k]=T[k]}),s}const be=n=>n;class ld{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);t!==-1&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function Mb(n){let e=new ld,t=new ld,r=0,s=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,d=!1)=>{const m=d&&s,g=m?e:t;return u&&o.add(c),g.add(c)&&m&&s&&(r=e.order.length),c},cancel:c=>{t.remove(c),o.delete(c)},process:c=>{if(s){i=!0;return}if(s=!0,[e,t]=[t,e],t.clear(),r=e.order.length,r)for(let u=0;u<r;u++){const d=e.order[u];d(c),o.has(d)&&(l.schedule(d),n())}s=!1,i&&(i=!1,l.process(c))}};return l}const Mi=["prepare","read","update","preRender","render","postRender"],Ob=40;function Lb(n,e){let t=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Mi.reduce((m,g)=>(m[g]=Mb(()=>t=!0),m),{}),o=m=>i[m].process(s),l=()=>{const m=performance.now();t=!1,s.delta=r?1e3/60:Math.max(Math.min(m-s.timestamp,Ob),1),s.timestamp=m,s.isProcessing=!0,Mi.forEach(o),s.isProcessing=!1,t&&e&&(r=!1,n(l))},c=()=>{t=!0,r=!0,s.isProcessing||n(l)};return{schedule:Mi.reduce((m,g)=>{const y=i[g];return m[g]=(b,T=!1,x=!1)=>(t||c(),y.schedule(b,T,x)),m},{}),cancel:m=>Mi.forEach(g=>i[g].cancel(m)),state:s,steps:i}}const{schedule:he,cancel:$t,state:qe,steps:Fa}=Lb(typeof requestAnimationFrame<"u"?requestAnimationFrame:be,!0),Fb={useVisualState:lg({scrapeMotionValuesFromProps:og,createRenderState:ng,onMount:(n,e,{renderState:t,latestValues:r})=>{he.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),he.render(()=>{Ic(t,r,{enableHardwareAcceleration:!1},Ac(e.tagName),n.transformTemplate),ig(e,t)})}})},Ub={useVisualState:lg({scrapeMotionValuesFromProps:Cc,createRenderState:Ec})};function Bb(n,{forwardMotionProps:e=!1},t,r){return{...bc(n)?Fb:Ub,preloadedFeatures:t,useRender:Nb(e),createVisualElement:r,Component:n}}function Mt(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}const cg=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Go(n,e="page"){return{point:{x:n[e+"X"],y:n[e+"Y"]}}}const Yb=n=>e=>cg(e)&&n(e,Go(e));function Ut(n,e,t,r){return Mt(n,e,Yb(t),r)}const $b=(n,e)=>t=>e(n(t)),pn=(...n)=>n.reduce($b);function ug(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const cd=ug("dragHorizontal"),ud=ug("dragVertical");function hg(n){let e=!1;if(n==="y")e=ud();else if(n==="x")e=cd();else{const t=cd(),r=ud();t&&r?e=()=>{t(),r()}:(t&&t(),r&&r())}return e}function dg(){const n=hg(!0);return n?(n(),!1):!0}class Vn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function hd(n,e){const t="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||dg())return;const l=n.getProps();n.animationState&&l.whileHover&&n.animationState.setActive("whileHover",e),l[r]&&he.update(()=>l[r](i,o))};return Ut(n.current,t,s,{passive:!n.getProps()[r]})}class zb extends Vn{mount(){this.unmount=pn(hd(this.node,!0),hd(this.node,!1))}unmount(){}}class qb extends Vn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pn(Mt(this.node.current,"focus",()=>this.onFocus()),Mt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const fg=(n,e)=>e?n===e?!0:fg(n,e.parentElement):!1;function Ua(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Go(t))}class Hb extends Vn{constructor(){super(...arguments),this.removeStartListeners=be,this.removeEndListeners=be,this.removeAccessibleListeners=be,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Ut(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:m}=this.node.getProps();he.update(()=>{!m&&!fg(this.node.current,l.target)?d&&d(l,c):u&&u(l,c)})},{passive:!(r.onTap||r.onPointerUp)}),o=Ut(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=pn(i,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ua("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&he.update(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Mt(this.node.current,"keyup",o),Ua("down",(l,c)=>{this.startPress(l,c)})},t=Mt(this.node.current,"keydown",e),r=()=>{this.isPressing&&Ua("cancel",(i,o)=>this.cancelPress(i,o))},s=Mt(this.node.current,"blur",r);this.removeAccessibleListeners=pn(t,s)}}startPress(e,t){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&he.update(()=>r(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!dg()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&he.update(()=>r(e,t))}mount(){const e=this.node.getProps(),t=Ut(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Mt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=pn(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const xl=new WeakMap,Ba=new WeakMap,Gb=n=>{const e=xl.get(n.target);e&&e(n)},Wb=n=>{n.forEach(Gb)};function Kb({root:n,...e}){const t=n||document;Ba.has(t)||Ba.set(t,{});const r=Ba.get(t),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(Wb,{root:n,...e})),r[s]}function Qb(n,e,t){const r=Kb(e);return xl.set(n,t),r.observe(n),()=>{xl.delete(n),r.unobserve(n)}}const Xb={some:0,all:1};class Jb extends Vn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,o={root:t?t.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:Xb[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:m}=this.node.getProps(),g=u?d:m;g&&g(c)};return Qb(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Zb(e,t))&&this.startObserver()}unmount(){}}function Zb({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const eT={inView:{Feature:Jb},tap:{Feature:Hb},focus:{Feature:qb},hover:{Feature:zb}};function mg(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}function tT(n){const e={};return n.values.forEach((t,r)=>e[r]=t.get()),e}function nT(n){const e={};return n.values.forEach((t,r)=>e[r]=t.getVelocity()),e}function Wo(n,e,t){const r=n.getProps();return Pc(r,e,t!==void 0?t:r.custom,tT(n),nT(n))}let rT=be,Sc=be;const gn=n=>n*1e3,Bt=n=>n/1e3,sT={current:!1},pg=n=>Array.isArray(n)&&typeof n[0]=="number";function gg(n){return!!(!n||typeof n=="string"&&yg[n]||pg(n)||Array.isArray(n)&&n.every(gg))}const Ts=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,yg={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ts([0,.65,.55,1]),circOut:Ts([.55,0,1,.45]),backIn:Ts([.31,.01,.66,-.59]),backOut:Ts([.33,1.53,.69,.99])};function vg(n){if(n)return pg(n)?Ts(n):Array.isArray(n)?n.map(vg):yg[n]}function iT(n,e,t,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[e]:t};c&&(u.offset=c);const d=vg(l);return Array.isArray(d)&&(u.easing=d),n.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function oT(n,{repeat:e,repeatType:t="loop"}){const r=e&&t!=="loop"&&e%2===1?0:n.length-1;return n[r]}const wg=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,aT=1e-7,lT=12;function cT(n,e,t,r,s){let i,o,l=0;do o=e+(t-e)/2,i=wg(o,r,s)-n,i>0?t=o:e=o;while(Math.abs(i)>aT&&++l<lT);return o}function oi(n,e,t,r){if(n===e&&t===r)return be;const s=i=>cT(i,0,1,n,t);return i=>i===0||i===1?i:wg(s(i),e,r)}const uT=oi(.42,0,1,1),hT=oi(0,0,.58,1),_g=oi(.42,0,.58,1),dT=n=>Array.isArray(n)&&typeof n[0]!="number",xg=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,bg=n=>e=>1-n(1-e),Rc=n=>1-Math.sin(Math.acos(n)),Tg=bg(Rc),fT=xg(Rc),Eg=oi(.33,1.53,.69,.99),Nc=bg(Eg),mT=xg(Nc),pT=n=>(n*=2)<1?.5*Nc(n):.5*(2-Math.pow(2,-10*(n-1))),gT={linear:be,easeIn:uT,easeInOut:_g,easeOut:hT,circIn:Rc,circInOut:fT,circOut:Tg,backIn:Nc,backInOut:mT,backOut:Eg,anticipate:pT},dd=n=>{if(Array.isArray(n)){Sc(n.length===4);const[e,t,r,s]=n;return oi(e,t,r,s)}else if(typeof n=="string")return gT[n];return n},kc=(n,e)=>t=>!!(si(t)&&yb.test(t)&&t.startsWith(n)||e&&Object.prototype.hasOwnProperty.call(t,e)),Ig=(n,e,t)=>r=>{if(!si(r))return r;const[s,i,o,l]=r.match(Ho);return{[n]:parseFloat(s),[e]:parseFloat(i),[t]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},yT=n=>En(0,255,n),Ya={...ur,transform:n=>Math.round(yT(n))},Gn={test:kc("rgb","red"),parse:Ig("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Ya.transform(n)+", "+Ya.transform(e)+", "+Ya.transform(t)+", "+Ps(Cs.transform(r))+")"};function vT(n){let e="",t="",r="",s="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),s=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),s=n.substring(4,5),e+=e,t+=t,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const bl={test:kc("#"),parse:vT,transform:Gn.transform},Ar={test:kc("hsl","hue"),parse:Ig("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+xt.transform(Ps(e))+", "+xt.transform(Ps(t))+", "+Ps(Cs.transform(r))+")"},Je={test:n=>Gn.test(n)||bl.test(n)||Ar.test(n),parse:n=>Gn.test(n)?Gn.parse(n):Ar.test(n)?Ar.parse(n):bl.parse(n),transform:n=>si(n)?n:n.hasOwnProperty("red")?Gn.transform(n):Ar.transform(n)},we=(n,e,t)=>-t*n+t*e+n;function $a(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function wT({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let s=0,i=0,o=0;if(!e)s=i=o=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;s=$a(c,l,n+1/3),i=$a(c,l,n),o=$a(c,l,n-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const za=(n,e,t)=>{const r=n*n;return Math.sqrt(Math.max(0,t*(e*e-r)+r))},_T=[bl,Gn,Ar],xT=n=>_T.find(e=>e.test(n));function fd(n){const e=xT(n);let t=e.parse(n);return e===Ar&&(t=wT(t)),t}const Ag=(n,e)=>{const t=fd(n),r=fd(e),s={...t};return i=>(s.red=za(t.red,r.red,i),s.green=za(t.green,r.green,i),s.blue=za(t.blue,r.blue,i),s.alpha=we(t.alpha,r.alpha,i),Gn.transform(s))};function bT(n){var e,t;return isNaN(n)&&si(n)&&(((e=n.match(Ho))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Jp))===null||t===void 0?void 0:t.length)||0)>0}const Cg={regex:pb,countKey:"Vars",token:"${v}",parse:be},Pg={regex:Jp,countKey:"Colors",token:"${c}",parse:Je.parse},Sg={regex:Ho,countKey:"Numbers",token:"${n}",parse:ur.parse};function qa(n,{regex:e,countKey:t,token:r,parse:s}){const i=n.tokenised.match(e);i&&(n["num"+t]=i.length,n.tokenised=n.tokenised.replace(e,r),n.values.push(...i.map(s)))}function fo(n){const e=n.toString(),t={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return t.value.includes("var(--")&&qa(t,Cg),qa(t,Pg),qa(t,Sg),t}function Rg(n){return fo(n).values}function Ng(n){const{values:e,numColors:t,numVars:r,tokenised:s}=fo(n),i=e.length;return o=>{let l=s;for(let c=0;c<i;c++)c<r?l=l.replace(Cg.token,o[c]):c<r+t?l=l.replace(Pg.token,Je.transform(o[c])):l=l.replace(Sg.token,Ps(o[c]));return l}}const TT=n=>typeof n=="number"?0:n;function ET(n){const e=Rg(n);return Ng(n)(e.map(TT))}const In={test:bT,parse:Rg,createTransformer:Ng,getAnimatableNone:ET},kg=(n,e)=>t=>`${t>0?e:n}`;function Vg(n,e){return typeof n=="number"?t=>we(n,e,t):Je.test(n)?Ag(n,e):n.startsWith("var(")?kg(n,e):Dg(n,e)}const jg=(n,e)=>{const t=[...n],r=t.length,s=n.map((i,o)=>Vg(i,e[o]));return i=>{for(let o=0;o<r;o++)t[o]=s[o](i);return t}},IT=(n,e)=>{const t={...n,...e},r={};for(const s in t)n[s]!==void 0&&e[s]!==void 0&&(r[s]=Vg(n[s],e[s]));return s=>{for(const i in r)t[i]=r[i](s);return t}},Dg=(n,e)=>{const t=In.createTransformer(e),r=fo(n),s=fo(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?pn(jg(r.values,s.values),t):kg(n,e)},Bs=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r},md=(n,e)=>t=>we(n,e,t);function AT(n){return typeof n=="number"?md:typeof n=="string"?Je.test(n)?Ag:Dg:Array.isArray(n)?jg:typeof n=="object"?IT:md}function CT(n,e,t){const r=[],s=t||AT(n[0]),i=n.length-1;for(let o=0;o<i;o++){let l=s(n[o],n[o+1]);if(e){const c=Array.isArray(e)?e[o]||be:e;l=pn(c,l)}r.push(l)}return r}function Mg(n,e,{clamp:t=!0,ease:r,mixer:s}={}){const i=n.length;if(Sc(i===e.length),i===1)return()=>e[0];n[0]>n[i-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=CT(e,r,s),l=o.length,c=u=>{let d=0;if(l>1)for(;d<n.length-2&&!(u<n[d+1]);d++);const m=Bs(n[d],n[d+1],u);return o[d](m)};return t?u=>c(En(n[0],n[i-1],u)):c}function PT(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const s=Bs(0,e,r);n.push(we(t,1,s))}}function ST(n){const e=[0];return PT(e,n.length-1),e}function RT(n,e){return n.map(t=>t*e)}function NT(n,e){return n.map(()=>e||_g).splice(0,n.length-1)}function mo({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const s=dT(r)?r.map(dd):dd(r),i={done:!1,value:e[0]},o=RT(t&&t.length===e.length?t:ST(e),n),l=Mg(o,e,{ease:Array.isArray(s)?s:NT(e,s)});return{calculatedDuration:n,next:c=>(i.value=l(c),i.done=c>=n,i)}}function Og(n,e){return e?n*(1e3/e):0}const kT=5;function Lg(n,e,t){const r=Math.max(e-kT,0);return Og(t-n(r),e-r)}const Ha=.001,VT=.01,pd=10,jT=.05,DT=1;function MT({duration:n=800,bounce:e=.25,velocity:t=0,mass:r=1}){let s,i;rT(n<=gn(pd));let o=1-e;o=En(jT,DT,o),n=En(VT,pd,Bt(n)),o<1?(s=u=>{const d=u*o,m=d*n,g=d-t,y=Tl(u,o),b=Math.exp(-m);return Ha-g/y*b},i=u=>{const m=u*o*n,g=m*t+t,y=Math.pow(o,2)*Math.pow(u,2)*n,b=Math.exp(-m),T=Tl(Math.pow(u,2),o);return(-s(u)+Ha>0?-1:1)*((g-y)*b)/T}):(s=u=>{const d=Math.exp(-u*n),m=(u-t)*n+1;return-Ha+d*m},i=u=>{const d=Math.exp(-u*n),m=(t-u)*(n*n);return d*m});const l=5/n,c=LT(s,i,l);if(n=gn(n),isNaN(c))return{stiffness:100,damping:10,duration:n};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:o*2*Math.sqrt(r*u),duration:n}}}const OT=12;function LT(n,e,t){let r=t;for(let s=1;s<OT;s++)r=r-n(r)/e(r);return r}function Tl(n,e){return n*Math.sqrt(1-e*e)}const FT=["duration","bounce"],UT=["stiffness","damping","mass"];function gd(n,e){return e.some(t=>n[t]!==void 0)}function BT(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!gd(n,UT)&&gd(n,FT)){const t=MT(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function Fg({keyframes:n,restDelta:e,restSpeed:t,...r}){const s=n[0],i=n[n.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:d,velocity:m,isResolvedFromDuration:g}=BT({...r,velocity:-Bt(r.velocity||0)}),y=m||0,b=c/(2*Math.sqrt(l*u)),T=i-s,x=Bt(Math.sqrt(l/u)),V=Math.abs(T)<5;t||(t=V?.01:2),e||(e=V?.005:.5);let k;if(b<1){const R=Tl(x,b);k=D=>{const F=Math.exp(-b*x*D);return i-F*((y+b*x*T)/R*Math.sin(R*D)+T*Math.cos(R*D))}}else if(b===1)k=R=>i-Math.exp(-x*R)*(T+(y+x*T)*R);else{const R=x*Math.sqrt(b*b-1);k=D=>{const F=Math.exp(-b*x*D),$=Math.min(R*D,300);return i-F*((y+b*x*T)*Math.sinh($)+R*T*Math.cosh($))/R}}return{calculatedDuration:g&&d||null,next:R=>{const D=k(R);if(g)o.done=R>=d;else{let F=y;R!==0&&(b<1?F=Lg(k,R,D):F=0);const $=Math.abs(F)<=t,A=Math.abs(i-D)<=e;o.done=$&&A}return o.value=o.done?i:D,o}}}function yd({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const m=n[0],g={done:!1,value:m},y=w=>l!==void 0&&w<l||c!==void 0&&w>c,b=w=>l===void 0?c:c===void 0||Math.abs(l-w)<Math.abs(c-w)?l:c;let T=t*e;const x=m+T,V=o===void 0?x:o(x);V!==x&&(T=V-m);const k=w=>-T*Math.exp(-w/r),R=w=>V+k(w),D=w=>{const _=k(w),C=R(w);g.done=Math.abs(_)<=u,g.value=g.done?V:C};let F,$;const A=w=>{y(g.value)&&(F=w,$=Fg({keyframes:[g.value,b(g.value)],velocity:Lg(R,w,g.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return A(0),{calculatedDuration:null,next:w=>{let _=!1;return!$&&F===void 0&&(_=!0,D(w),A(w)),F!==void 0&&w>F?$.next(w-F):(!_&&D(w),g)}}}const YT=n=>{const e=({timestamp:t})=>n(t);return{start:()=>he.update(e,!0),stop:()=>$t(e),now:()=>qe.isProcessing?qe.timestamp:performance.now()}},vd=2e4;function wd(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<vd;)e+=t,r=n.next(e);return e>=vd?1/0:e}const $T={decay:yd,inertia:yd,tween:mo,keyframes:mo,spring:Fg};function po({autoplay:n=!0,delay:e=0,driver:t=YT,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:d,onUpdate:m,...g}){let y=1,b=!1,T,x;const V=()=>{x=new Promise(ie=>{T=ie})};V();let k;const R=$T[s]||mo;let D;R!==mo&&typeof r[0]!="number"&&(D=Mg([0,100],r,{clamp:!1}),r=[0,100]);const F=R({...g,keyframes:r});let $;l==="mirror"&&($=R({...g,keyframes:[...r].reverse(),velocity:-(g.velocity||0)}));let A="idle",w=null,_=null,C=null;F.calculatedDuration===null&&i&&(F.calculatedDuration=wd(F));const{calculatedDuration:S}=F;let P=1/0,E=1/0;S!==null&&(P=S+o,E=P*(i+1)-o);let B=0;const ce=ie=>{if(_===null)return;y>0&&(_=Math.min(_,ie)),y<0&&(_=Math.min(ie-E/y,_)),w!==null?B=w:B=Math.round(ie-_)*y;const ve=B-e*(y>=0?1:-1),Z=y>=0?ve<0:ve>E;B=Math.max(ve,0),A==="finished"&&w===null&&(B=E);let Dn=B,Qt=F;if(i){const rs=Math.min(B,E)/P;let kt=Math.floor(rs),it=rs%1;!it&&rs>=1&&(it=1),it===1&&kt--,kt=Math.min(kt,i+1),!!(kt%2)&&(l==="reverse"?(it=1-it,o&&(it-=o/P)):l==="mirror"&&(Qt=$)),Dn=En(0,1,it)*P}const Mn=Z?{done:!1,value:r[0]}:Qt.next(Dn);D&&(Mn.value=D(Mn.value));let{done:Xt}=Mn;!Z&&S!==null&&(Xt=y>=0?B>=E:B<=0);const da=w===null&&(A==="finished"||A==="running"&&Xt);return m&&m(Mn.value),da&&Ee(),Mn},se=()=>{k&&k.stop(),k=void 0},ye=()=>{A="idle",se(),T(),V(),_=C=null},Ee=()=>{A="finished",d&&d(),se(),T()},Ie=()=>{if(b)return;k||(k=t(ce));const ie=k.now();c&&c(),w!==null?_=ie-w:(!_||A==="finished")&&(_=ie),A==="finished"&&V(),C=_,w=null,A="running",k.start()};n&&Ie();const yt={then(ie,ve){return x.then(ie,ve)},get time(){return Bt(B)},set time(ie){ie=gn(ie),B=ie,w!==null||!k||y===0?w=ie:_=k.now()-ie/y},get duration(){const ie=F.calculatedDuration===null?wd(F):F.calculatedDuration;return Bt(ie)},get speed(){return y},set speed(ie){ie===y||!k||(y=ie,yt.time=Bt(B))},get state(){return A},play:Ie,pause:()=>{A="paused",w=B},stop:()=>{b=!0,A!=="idle"&&(A="idle",u&&u(),ye())},cancel:()=>{C!==null&&ce(C),ye()},complete:()=>{A="finished"},sample:ie=>(_=0,ce(ie))};return yt}function zT(n){let e;return()=>(e===void 0&&(e=n()),e)}const qT=zT(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),HT=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Oi=10,GT=2e4,WT=(n,e)=>e.type==="spring"||n==="backgroundColor"||!gg(e.ease);function KT(n,e,{onUpdate:t,onComplete:r,...s}){if(!(qT()&&HT.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const d=()=>{c=new Promise(R=>{l=R})};d();let{keyframes:m,duration:g=300,ease:y,times:b}=s;if(WT(e,s)){const R=po({...s,repeat:0,delay:0});let D={done:!1,value:m[0]};const F=[];let $=0;for(;!D.done&&$<GT;)D=R.sample($),F.push(D.value),$+=Oi;b=void 0,m=F,g=$-Oi,y="linear"}const T=iT(n.owner.current,e,m,{...s,duration:g,ease:y,times:b}),x=()=>{u=!1,T.cancel()},V=()=>{u=!0,he.update(x),l(),d()};return T.onfinish=()=>{u||(n.set(oT(m,s)),r&&r(),V())},{then(R,D){return c.then(R,D)},attachTimeline(R){return T.timeline=R,T.onfinish=null,be},get time(){return Bt(T.currentTime||0)},set time(R){T.currentTime=gn(R)},get speed(){return T.playbackRate},set speed(R){T.playbackRate=R},get duration(){return Bt(g)},play:()=>{o||(T.play(),$t(x))},pause:()=>T.pause(),stop:()=>{if(o=!0,T.playState==="idle")return;const{currentTime:R}=T;if(R){const D=po({...s,autoplay:!1});n.setWithVelocity(D.sample(R-Oi).value,D.sample(R).value,Oi)}V()},complete:()=>{u||T.finish()},cancel:V}}function QT({keyframes:n,delay:e,onUpdate:t,onComplete:r}){const s=()=>(t&&t(n[n.length-1]),r&&r(),{time:0,speed:1,duration:0,play:be,pause:be,stop:be,then:i=>(i(),Promise.resolve()),cancel:be,complete:be});return e?po({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const XT={type:"spring",stiffness:500,damping:25,restSpeed:10},JT=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),ZT={type:"keyframes",duration:.8},eE={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tE=(n,{keyframes:e})=>e.length>2?ZT:cr.has(n)?n.startsWith("scale")?JT(e[1]):XT:eE,El=(n,e)=>n==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(In.test(e)||e==="0")&&!e.startsWith("url(")),nE=new Set(["brightness","contrast","saturate","opacity"]);function rE(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Ho)||[];if(!r)return n;const s=t.replace(r,"");let i=nE.has(e)?1:0;return r!==t&&(i*=100),e+"("+i+s+")"}const sE=/([a-z-]*)\(.*?\)/g,Il={...In,getAnimatableNone:n=>{const e=n.match(sE);return e?e.map(rE).join(" "):n}},iE={...Zp,color:Je,backgroundColor:Je,outlineColor:Je,fill:Je,stroke:Je,borderColor:Je,borderTopColor:Je,borderRightColor:Je,borderBottomColor:Je,borderLeftColor:Je,filter:Il,WebkitFilter:Il},Vc=n=>iE[n];function Ug(n,e){let t=Vc(n);return t!==Il&&(t=In),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Bg=n=>/^0[^.\s]+$/.test(n);function oE(n){if(typeof n=="number")return n===0;if(n!==null)return n==="none"||n==="0"||Bg(n)}function aE(n,e,t,r){const s=El(e,t);let i;Array.isArray(t)?i=[...t]:i=[null,t];const o=r.from!==void 0?r.from:n.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),oE(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(s&&c.length&&l)for(let u=0;u<c.length;u++){const d=c[u];i[d]=Ug(e,l)}return i}function lE({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}function jc(n,e){return n[e]||n.default||n}const cE={skipAnimations:!1},Dc=(n,e,t,r={})=>s=>{const i=jc(r,n)||{},o=i.delay||r.delay||0;let{elapsed:l=0}=r;l=l-gn(o);const c=aE(e,n,t,i),u=c[0],d=c[c.length-1],m=El(n,u),g=El(n,d);let y={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:b=>{e.set(b),i.onUpdate&&i.onUpdate(b)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(lE(i)||(y={...y,...tE(n,y)}),y.duration&&(y.duration=gn(y.duration)),y.repeatDelay&&(y.repeatDelay=gn(y.repeatDelay)),!m||!g||sT.current||i.type===!1||cE.skipAnimations)return QT(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const b=KT(e,n,y);if(b)return b}return po(y)};function go(n){return!!(nt(n)&&n.add)}const Yg=n=>/^\-?\d*\.?\d+$/.test(n);function Mc(n,e){n.indexOf(e)===-1&&n.push(e)}function Oc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class Lc{constructor(){this.subscriptions=[]}add(e){return Mc(this.subscriptions,e),()=>Oc(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const uE=n=>!isNaN(parseFloat(n));class hE{constructor(e,t={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=qe;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,he.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>he.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=uE(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Lc);const r=this.events[e].add(t);return e==="change"?()=>{r(),he.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Og(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Dr(n,e){return new hE(n,e)}const $g=n=>e=>e.test(n),dE={test:n=>n==="auto",parse:n=>n},zg=[ur,q,xt,rn,wb,vb,dE],ws=n=>zg.find($g(n)),fE=[...zg,Je,In],mE=n=>fE.find($g(n));function pE(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,Dr(t))}function gE(n,e){const t=Wo(n,e);let{transitionEnd:r={},transition:s={},...i}=t?n.makeTargetAnimatable(t,!1):{};i={...i,...r};for(const o in i){const l=Vb(i[o]);pE(n,o,l)}}function yE(n,e,t){var r,s;const i=Object.keys(e).filter(l=>!n.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=e[c];let d=null;Array.isArray(u)&&(d=u[0]),d===null&&(d=(s=(r=t[c])!==null&&r!==void 0?r:n.readValue(c))!==null&&s!==void 0?s:e[c]),d!=null&&(typeof d=="string"&&(Yg(d)||Bg(d))?d=parseFloat(d):!mE(d)&&In.test(u)&&(d=Ug(c,u)),n.addValue(c,Dr(d,{owner:n})),t[c]===void 0&&(t[c]=d),d!==null&&n.setBaseTarget(c,d))}}function vE(n,e){return e?(e[n]||e.default||e).from:void 0}function wE(n,e,t){const r={};for(const s in n){const i=vE(s,e);if(i!==void 0)r[s]=i;else{const o=t.getValue(s);o&&(r[s]=o.get())}}return r}function _E({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function xE(n,e){const t=n.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}else return t!==e}function qg(n,e,{delay:t=0,transitionOverride:r,type:s}={}){let{transition:i=n.getDefaultTransition(),transitionEnd:o,...l}=n.makeTargetAnimatable(e);const c=n.getValue("willChange");r&&(i=r);const u=[],d=s&&n.animationState&&n.animationState.getState()[s];for(const m in l){const g=n.getValue(m),y=l[m];if(!g||y===void 0||d&&_E(d,m))continue;const b={delay:t,elapsed:0,...jc(i||{},m)};if(window.HandoffAppearAnimations){const V=n.getProps()[Hp];if(V){const k=window.HandoffAppearAnimations(V,m,g,he);k!==null&&(b.elapsed=k,b.isHandoff=!0)}}let T=!b.isHandoff&&!xE(g,y);if(b.type==="spring"&&(g.getVelocity()||b.velocity)&&(T=!1),g.animation&&(T=!1),T)continue;g.start(Dc(m,g,y,n.shouldReduceMotion&&cr.has(m)?{type:!1}:b));const x=g.animation;go(c)&&(c.add(m),x.then(()=>c.remove(m))),u.push(x)}return o&&Promise.all(u).then(()=>{o&&gE(n,o)}),u}function Al(n,e,t={}){const r=Wo(n,e,t.custom);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const i=r?()=>Promise.all(qg(n,r,t)):()=>Promise.resolve(),o=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:m}=s;return bE(n,e,u+c,d,m,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(t.delay)])}function bE(n,e,t=0,r=0,s=1,i){const o=[],l=(n.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(n.variantChildren).sort(TE).forEach((u,d)=>{u.notify("AnimationStart",e),o.push(Al(u,e,{...i,delay:t+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function TE(n,e){return n.sortNodePosition(e)}function EE(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>Al(n,i,t));r=Promise.all(s)}else if(typeof e=="string")r=Al(n,e,t);else{const s=typeof e=="function"?Wo(n,e,t.custom):e;r=Promise.all(qg(n,s,t))}return r.then(()=>n.notify("AnimationComplete",e))}const IE=[...wc].reverse(),AE=wc.length;function CE(n){return e=>Promise.all(e.map(({animation:t,options:r})=>EE(n,t,r)))}function PE(n){let e=CE(n);const t=RE();let r=!0;const s=(c,u)=>{const d=Wo(n,u);if(d){const{transition:m,transitionEnd:g,...y}=d;c={...c,...y,...g}}return c};function i(c){e=c(n)}function o(c,u){const d=n.getProps(),m=n.getVariantContext(!0)||{},g=[],y=new Set;let b={},T=1/0;for(let V=0;V<AE;V++){const k=IE[V],R=t[k],D=d[k]!==void 0?d[k]:m[k],F=Fs(D),$=k===u?R.isActive:null;$===!1&&(T=V);let A=D===m[k]&&D!==d[k]&&F;if(A&&r&&n.manuallyAnimateOnMount&&(A=!1),R.protectedKeys={...b},!R.isActive&&$===null||!D&&!R.prevProp||zo(D)||typeof D=="boolean")continue;let _=SE(R.prevProp,D)||k===u&&R.isActive&&!A&&F||V>T&&F,C=!1;const S=Array.isArray(D)?D:[D];let P=S.reduce(s,{});$===!1&&(P={});const{prevResolvedValues:E={}}=R,B={...E,...P},ce=se=>{_=!0,y.has(se)&&(C=!0,y.delete(se)),R.needsAnimating[se]=!0};for(const se in B){const ye=P[se],Ee=E[se];if(b.hasOwnProperty(se))continue;let Ie=!1;ho(ye)&&ho(Ee)?Ie=!mg(ye,Ee):Ie=ye!==Ee,Ie?ye!==void 0?ce(se):y.add(se):ye!==void 0&&y.has(se)?ce(se):R.protectedKeys[se]=!0}R.prevProp=D,R.prevResolvedValues=P,R.isActive&&(b={...b,...P}),r&&n.blockInitialAnimation&&(_=!1),_&&(!A||C)&&g.push(...S.map(se=>({animation:se,options:{type:k,...c}})))}if(y.size){const V={};y.forEach(k=>{const R=n.getBaseTarget(k);R!==void 0&&(V[k]=R)}),g.push({animation:V})}let x=!!g.length;return r&&(d.initial===!1||d.initial===d.animate)&&!n.manuallyAnimateOnMount&&(x=!1),r=!1,x?e(g):Promise.resolve()}function l(c,u,d){var m;if(t[c].isActive===u)return Promise.resolve();(m=n.variantChildren)===null||m===void 0||m.forEach(y=>{var b;return(b=y.animationState)===null||b===void 0?void 0:b.setActive(c,u)}),t[c].isActive=u;const g=o(d,c);for(const y in t)t[y].protectedKeys={};return g}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>t}}function SE(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!mg(e,n):!1}function Bn(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function RE(){return{animate:Bn(!0),whileInView:Bn(),whileHover:Bn(),whileTap:Bn(),whileDrag:Bn(),whileFocus:Bn(),exit:Bn()}}class NE extends Vn{constructor(e){super(e),e.animationState||(e.animationState=PE(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),zo(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}let kE=0;class VE extends Vn{constructor(){super(...arguments),this.id=kE++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const jE={animation:{Feature:NE},exit:{Feature:VE}},_d=(n,e)=>Math.abs(n-e);function DE(n,e){const t=_d(n.x,e.x),r=_d(n.y,e.y);return Math.sqrt(t**2+r**2)}class Hg{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Wa(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,y=DE(m.offset,{x:0,y:0})>=3;if(!g&&!y)return;const{point:b}=m,{timestamp:T}=qe;this.history.push({...b,timestamp:T});const{onStart:x,onMove:V}=this.handlers;g||(x&&x(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),V&&V(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Ga(g,this.transformPagePoint),he.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:y,onSessionEnd:b,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=Wa(m.type==="pointercancel"?this.lastMoveEventInfo:Ga(g,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,x),b&&b(m,x)},!cg(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const o=Go(e),l=Ga(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=qe;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=t;d&&d(e,Wa(l,this.history)),this.removeListeners=pn(Ut(this.contextWindow,"pointermove",this.handlePointerMove),Ut(this.contextWindow,"pointerup",this.handlePointerUp),Ut(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),$t(this.updatePoint)}}function Ga(n,e){return e?{point:e(n.point)}:n}function xd(n,e){return{x:n.x-e.x,y:n.y-e.y}}function Wa({point:n},e){return{point:n,delta:xd(n,Gg(e)),offset:xd(n,ME(e)),velocity:OE(e,.1)}}function ME(n){return n[0]}function Gg(n){return n[n.length-1]}function OE(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const s=Gg(n);for(;t>=0&&(r=n[t],!(s.timestamp-r.timestamp>gn(e)));)t--;if(!r)return{x:0,y:0};const i=Bt(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function st(n){return n.max-n.min}function Cl(n,e=0,t=.01){return Math.abs(n-e)<=t}function bd(n,e,t,r=.5){n.origin=r,n.originPoint=we(e.min,e.max,n.origin),n.scale=st(t)/st(e),(Cl(n.scale,1,1e-4)||isNaN(n.scale))&&(n.scale=1),n.translate=we(t.min,t.max,n.origin)-n.originPoint,(Cl(n.translate)||isNaN(n.translate))&&(n.translate=0)}function Ss(n,e,t,r){bd(n.x,e.x,t.x,r?r.originX:void 0),bd(n.y,e.y,t.y,r?r.originY:void 0)}function Td(n,e,t){n.min=t.min+e.min,n.max=n.min+st(e)}function LE(n,e,t){Td(n.x,e.x,t.x),Td(n.y,e.y,t.y)}function Ed(n,e,t){n.min=e.min-t.min,n.max=n.min+st(e)}function Rs(n,e,t){Ed(n.x,e.x,t.x),Ed(n.y,e.y,t.y)}function FE(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?we(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?we(t,n,r.max):Math.min(n,t)),n}function Id(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function UE(n,{top:e,left:t,bottom:r,right:s}){return{x:Id(n.x,t,s),y:Id(n.y,e,r)}}function Ad(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function BE(n,e){return{x:Ad(n.x,e.x),y:Ad(n.y,e.y)}}function YE(n,e){let t=.5;const r=st(n),s=st(e);return s>r?t=Bs(e.min,e.max-r,n.min):r>s&&(t=Bs(n.min,n.max-s,e.min)),En(0,1,t)}function $E(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Pl=.35;function zE(n=Pl){return n===!1?n=0:n===!0&&(n=Pl),{x:Cd(n,"left","right"),y:Cd(n,"top","bottom")}}function Cd(n,e,t){return{min:Pd(n,e),max:Pd(n,t)}}function Pd(n,e){return typeof n=="number"?n:n[e]||0}const Sd=()=>({translate:0,scale:1,origin:0,originPoint:0}),Cr=()=>({x:Sd(),y:Sd()}),Rd=()=>({min:0,max:0}),Pe=()=>({x:Rd(),y:Rd()});function at(n){return[n("x"),n("y")]}function Wg({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function qE({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function HE(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Ka(n){return n===void 0||n===1}function Sl({scale:n,scaleX:e,scaleY:t}){return!Ka(n)||!Ka(e)||!Ka(t)}function Yn(n){return Sl(n)||Kg(n)||n.z||n.rotate||n.rotateX||n.rotateY}function Kg(n){return Nd(n.x)||Nd(n.y)}function Nd(n){return n&&n!=="0%"}function yo(n,e,t){const r=n-t,s=e*r;return t+s}function kd(n,e,t,r,s){return s!==void 0&&(n=yo(n,s,r)),yo(n,t,r)+e}function Rl(n,e=0,t=1,r,s){n.min=kd(n.min,e,t,r,s),n.max=kd(n.max,e,t,r,s)}function Qg(n,{x:e,y:t}){Rl(n.x,e.translate,e.scale,e.originPoint),Rl(n.y,t.translate,t.scale,t.originPoint)}function GE(n,e,t,r=!1){const s=t.length;if(!s)return;e.x=e.y=1;let i,o;for(let l=0;l<s;l++){i=t[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Pr(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Qg(n,o)),r&&Yn(i.latestValues)&&Pr(n,i.latestValues))}e.x=Vd(e.x),e.y=Vd(e.y)}function Vd(n){return Number.isInteger(n)||n>1.0000000000001||n<.999999999999?n:1}function sn(n,e){n.min=n.min+e,n.max=n.max+e}function jd(n,e,[t,r,s]){const i=e[s]!==void 0?e[s]:.5,o=we(n.min,n.max,i);Rl(n,e[t],e[r],o,e.scale)}const WE=["x","scaleX","originX"],KE=["y","scaleY","originY"];function Pr(n,e){jd(n.x,e,WE),jd(n.y,e,KE)}function Xg(n,e){return Wg(HE(n.getBoundingClientRect(),e))}function QE(n,e,t){const r=Xg(n,t),{scroll:s}=e;return s&&(sn(r.x,s.offset.x),sn(r.y,s.offset.y)),r}const Jg=({current:n})=>n?n.ownerDocument.defaultView:null,XE=new WeakMap;class JE{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Pe(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Go(d,"page").point)},i=(d,m)=>{const{drag:g,dragPropagation:y,onDragStart:b}=this.getProps();if(g&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=hg(g),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),at(x=>{let V=this.getAxisMotionValue(x).get()||0;if(xt.test(V)){const{projection:k}=this.visualElement;if(k&&k.layout){const R=k.layout.layoutBox[x];R&&(V=st(R)*(parseFloat(V)/100))}}this.originPoint[x]=V}),b&&he.update(()=>b(d,m),!1,!0);const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(d,m)=>{const{dragPropagation:g,dragDirectionLock:y,onDirectionLock:b,onDrag:T}=this.getProps();if(!g&&!this.openGlobalLock)return;const{offset:x}=m;if(y&&this.currentDirection===null){this.currentDirection=ZE(x),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",m.point,x),this.updateAxis("y",m.point,x),this.visualElement.render(),T&&T(d,m)},l=(d,m)=>this.stop(d,m),c=()=>at(d=>{var m;return this.getAnimationState(d)==="paused"&&((m=this.getAxisMotionValue(d).animation)===null||m===void 0?void 0:m.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Hg(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Jg(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&he.update(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Li(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=FE(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;t&&Ir(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&s?this.constraints=UE(s.layoutBox,t):this.constraints=!1,this.elastic=zE(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&at(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=$E(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ir(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=QE(r,s.root,this.visualElement.getTransformPagePoint());let o=BE(s.layout.layoutBox,i);if(t){const l=t(qE(o));this.hasMutatedConstraints=!!l,l&&(o=Wg(l))}return o}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=at(d=>{if(!Li(d,t,this.currentDirection))return;let m=c&&c[d]||{};o&&(m={min:0,max:0});const g=s?200:1e6,y=s?40:1e7,b={type:"inertia",velocity:r?e[d]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...m};return this.startAxisValueAnimation(d,b)});return Promise.all(u).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return r.start(Dc(e,r,0,t))}stopAnimation(){at(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){at(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){at(t=>{const{drag:r}=this.getProps();if(!Li(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[t];i.set(e[t]-we(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ir(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};at(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();s[o]=YE({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),at(o=>{if(!Li(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(we(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;XE.set(this.visualElement,this);const e=this.visualElement.current,t=Ut(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ir(c)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Mt(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(at(d=>{const m=this.getAxisMotionValue(d);m&&(this.originPoint[d]+=c[d].translate,m.set(m.get()+c[d].translate))}),this.visualElement.render())});return()=>{o(),t(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Pl,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function Li(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function ZE(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class eI extends Vn{constructor(e){super(e),this.removeGroupControls=be,this.removeListeners=be,this.controls=new JE(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||be}unmount(){this.removeGroupControls(),this.removeListeners()}}const Dd=n=>(e,t)=>{n&&he.update(()=>n(e,t))};class tI extends Vn{constructor(){super(...arguments),this.removePointerDownListener=be}onPointerDown(e){this.session=new Hg(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Jg(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Dd(e),onStart:Dd(t),onMove:r,onEnd:(i,o)=>{delete this.session,s&&he.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Ut(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function nI(){const n=I.useContext(Yo);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:r}=n,s=I.useId();return I.useEffect(()=>r(s),[]),!e&&t?[!1,()=>t&&t(s)]:[!0]}const Wi={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Md(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const _s={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(q.test(n))n=parseFloat(n);else return n;const t=Md(n,e.target.x),r=Md(n,e.target.y);return`${t}% ${r}%`}},rI={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,s=In.parse(n);if(s.length>5)return r;const i=In.createTransformer(n),o=typeof s[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;s[0+o]/=l,s[1+o]/=c;const u=we(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}};class sI extends Fe.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;hb(iI),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Wi.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||he.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Zg(n){const[e,t]=nI(),r=I.useContext(xc);return Fe.createElement(sI,{...n,layoutGroup:r,switchLayoutGroup:I.useContext(Wp),isPresent:e,safeToRemove:t})}const iI={borderRadius:{..._s,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:_s,borderTopRightRadius:_s,borderBottomLeftRadius:_s,borderBottomRightRadius:_s,boxShadow:rI},ey=["TopLeft","TopRight","BottomLeft","BottomRight"],oI=ey.length,Od=n=>typeof n=="string"?parseFloat(n):n,Ld=n=>typeof n=="number"||q.test(n);function aI(n,e,t,r,s,i){s?(n.opacity=we(0,t.opacity!==void 0?t.opacity:1,lI(r)),n.opacityExit=we(e.opacity!==void 0?e.opacity:1,0,cI(r))):i&&(n.opacity=we(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,r));for(let o=0;o<oI;o++){const l=`border${ey[o]}Radius`;let c=Fd(e,l),u=Fd(t,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Ld(c)===Ld(u)?(n[l]=Math.max(we(Od(c),Od(u),r),0),(xt.test(u)||xt.test(c))&&(n[l]+="%")):n[l]=u}(e.rotate||t.rotate)&&(n.rotate=we(e.rotate||0,t.rotate||0,r))}function Fd(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const lI=ty(0,.5,Tg),cI=ty(.5,.95,be);function ty(n,e,t){return r=>r<n?0:r>e?1:t(Bs(n,e,r))}function Ud(n,e){n.min=e.min,n.max=e.max}function ot(n,e){Ud(n.x,e.x),Ud(n.y,e.y)}function Bd(n,e,t,r,s){return n-=e,n=yo(n,1/t,r),s!==void 0&&(n=yo(n,1/s,r)),n}function uI(n,e=0,t=1,r=.5,s,i=n,o=n){if(xt.test(e)&&(e=parseFloat(e),e=we(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=we(i.min,i.max,r);n===i&&(l-=e),n.min=Bd(n.min,e,t,l,s),n.max=Bd(n.max,e,t,l,s)}function Yd(n,e,[t,r,s],i,o){uI(n,e[t],e[r],e[s],e.scale,i,o)}const hI=["x","scaleX","originX"],dI=["y","scaleY","originY"];function $d(n,e,t,r){Yd(n.x,e,hI,t?t.x:void 0,r?r.x:void 0),Yd(n.y,e,dI,t?t.y:void 0,r?r.y:void 0)}function zd(n){return n.translate===0&&n.scale===1}function ny(n){return zd(n.x)&&zd(n.y)}function fI(n,e){return n.x.min===e.x.min&&n.x.max===e.x.max&&n.y.min===e.y.min&&n.y.max===e.y.max}function ry(n,e){return Math.round(n.x.min)===Math.round(e.x.min)&&Math.round(n.x.max)===Math.round(e.x.max)&&Math.round(n.y.min)===Math.round(e.y.min)&&Math.round(n.y.max)===Math.round(e.y.max)}function qd(n){return st(n.x)/st(n.y)}class mI{constructor(){this.members=[]}add(e){Mc(this.members,e),e.scheduleRender()}remove(e){if(Oc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(s=>e===s);if(t===0)return!1;let r;for(let s=t;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Hd(n,e,t){let r="";const s=n.x.translate/e.x,i=n.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{rotate:c,rotateX:u,rotateY:d}=t;c&&(r+=`rotate(${c}deg) `),u&&(r+=`rotateX(${u}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=n.x.scale*e.x,l=n.y.scale*e.y;return(o!==1||l!==1)&&(r+=`scale(${o}, ${l})`),r||"none"}const pI=(n,e)=>n.depth-e.depth;class gI{constructor(){this.children=[],this.isDirty=!1}add(e){Mc(this.children,e),this.isDirty=!0}remove(e){Oc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pI),this.isDirty=!1,this.children.forEach(e)}}function yI(n,e){const t=performance.now(),r=({timestamp:s})=>{const i=s-t;i>=e&&($t(r),n(i-e))};return he.read(r,!0),()=>$t(r)}function vI(n){window.MotionDebug&&window.MotionDebug.record(n)}function wI(n){return n instanceof SVGElement&&n.tagName!=="svg"}function _I(n,e,t){const r=nt(n)?n:Dr(n);return r.start(Dc("",r,e,t)),r.animation}const Gd=["","X","Y","Z"],xI={visibility:"hidden"},Wd=1e3;let bI=0;const $n={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function sy({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},l=e==null?void 0:e()){this.id=bI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$n.totalNodes=$n.resolvedTargetDeltas=$n.recalculatedProjection=0,this.nodes.forEach(II),this.nodes.forEach(RI),this.nodes.forEach(NI),this.nodes.forEach(AI),vI($n)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gI)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Lc),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=wI(o),this.instance=o;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),n){let m;const g=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,m&&m(),m=yI(g,250),Wi.hasAnimatedSinceResize&&(Wi.hasAnimatedSinceResize=!1,this.nodes.forEach(Qd))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:m,hasLayoutChanged:g,hasRelativeTargetChanged:y,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||d.getDefaultTransition()||MI,{onLayoutAnimationStart:x,onLayoutAnimationComplete:V}=d.getProps(),k=!this.targetLayout||!ry(this.targetLayout,b)||y,R=!g&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||R||g&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(m,R);const D={...jc(T,"layout"),onPlay:x,onComplete:V};(d.shouldReduceMotion||this.options.layoutRoot)&&(D.delay=0,D.type=!1),this.startAnimation(D)}else g||Qd(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,$t(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(kI),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const m=this.path[d];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Kd);return}this.isUpdating||this.nodes.forEach(PI),this.isUpdating=!1,this.nodes.forEach(SI),this.nodes.forEach(TI),this.nodes.forEach(EI),this.clearAllSnapshots();const l=performance.now();qe.delta=En(0,1e3/60,l-qe.timestamp),qe.timestamp=l,qe.isProcessing=!0,Fa.update.process(qe),Fa.preRender.process(qe),Fa.render.process(qe),qe.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(CI),this.sharedNodes.forEach(VI)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,he.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){he.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Pe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:t(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!ny(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&(l||Yn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),OI(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Pe();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(sn(l.x,c.offset.x),sn(l.y,c.offset.y)),l}removeElementScroll(o){const l=Pe();ot(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:m}=u;if(u!==this.root&&d&&m.layoutScroll){if(d.isRoot){ot(l,o);const{scroll:g}=this.root;g&&(sn(l.x,-g.offset.x),sn(l.y,-g.offset.y))}sn(l.x,d.offset.x),sn(l.y,d.offset.y)}}return l}applyTransform(o,l=!1){const c=Pe();ot(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Pr(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Yn(d.latestValues)&&Pr(c,d.latestValues)}return Yn(this.latestValues)&&Pr(c,this.latestValues),c}removeTransform(o){const l=Pe();ot(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Yn(u.latestValues))continue;Sl(u.latestValues)&&u.updateSnapshot();const d=Pe(),m=u.measurePageBox();ot(d,m),$d(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Yn(this.latestValues)&&$d(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==qe.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:m,layoutId:g}=this.options;if(!(!this.layout||!(m||g))){if(this.resolvedRelativeTargetAt=qe.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Rs(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Pe(),this.targetWithTransforms=Pe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),LE(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ot(this.target,this.layout.layoutBox),Qg(this.target,this.targetDelta)):ot(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Pe(),this.relativeTargetOrigin=Pe(),Rs(this.relativeTargetOrigin,this.target,y.target),ot(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$n.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sl(this.parent.latestValues)||Kg(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===qe.timestamp&&(u=!1),u)return;const{layout:d,layoutId:m}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||m))return;ot(this.layoutCorrected,this.layout.layoutBox);const g=this.treeScale.x,y=this.treeScale.y;GE(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:b}=l;if(!b){this.projectionTransform&&(this.projectionDelta=Cr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Cr(),this.projectionDeltaWithTransform=Cr());const T=this.projectionTransform;Ss(this.projectionDelta,this.layoutCorrected,b,this.latestValues),this.projectionTransform=Hd(this.projectionDelta,this.treeScale),(this.projectionTransform!==T||this.treeScale.x!==g||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b)),$n.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},m=Cr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=Pe(),y=c?c.source:void 0,b=this.layout?this.layout.source:void 0,T=y!==b,x=this.getStack(),V=!x||x.members.length<=1,k=!!(T&&!V&&this.options.crossfade===!0&&!this.path.some(DI));this.animationProgress=0;let R;this.mixTargetDelta=D=>{const F=D/1e3;Xd(m.x,o.x,F),Xd(m.y,o.y,F),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Rs(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jI(this.relativeTarget,this.relativeTargetOrigin,g,F),R&&fI(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=Pe()),ot(R,this.relativeTarget)),T&&(this.animationValues=d,aI(d,u,this.latestValues,F,k,V)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=F},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&($t(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=he.update(()=>{Wi.hasAnimatedSinceResize=!0,this.currentAnimation=_I(0,Wd,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Wd),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&iy(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Pe();const m=st(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+m;const g=st(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+g}ot(l,c),Pr(l,d),Ss(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mI),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let d=0;d<Gd.length;d++){const m="rotate"+Gd[d];c[m]&&(u[m]=c[m],o.setStaticValue(m,0))}o.render();for(const d in u)o.setStaticValue(d,u[d]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return xI;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Gi(o==null?void 0:o.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const m=this.getLead();if(!this.projectionDelta||!this.layout||!m.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Gi(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Yn(this.latestValues)&&(T.transform=d?d({},""):"none",this.hasProjected=!1),T}const g=m.animationValues||m.latestValues;this.applyTransformsToTarget(),u.transform=Hd(this.projectionDeltaWithTransform,this.treeScale,g),d&&(u.transform=d(g,u.transform));const{x:y,y:b}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${b.origin*100}% 0`,m.animationValues?u.opacity=m===this?(c=(l=g.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:g.opacityExit:u.opacity=m===this?g.opacity!==void 0?g.opacity:"":g.opacityExit!==void 0?g.opacityExit:0;for(const T in co){if(g[T]===void 0)continue;const{correct:x,applyTo:V}=co[T],k=u.transform==="none"?g[T]:x(g[T],m);if(V){const R=V.length;for(let D=0;D<R;D++)u[V[D]]=k}else u[T]=k}return this.options.layoutId&&(u.pointerEvents=m===this?Gi(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Kd),this.root.sharedNodes.clear()}}}function TI(n){n.updateLayout()}function EI(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=n.layout,{animationType:i}=n.options,o=t.source!==n.layout.source;i==="size"?at(m=>{const g=o?t.measuredBox[m]:t.layoutBox[m],y=st(g);g.min=r[m].min,g.max=g.min+y}):iy(i,t.layoutBox,r)&&at(m=>{const g=o?t.measuredBox[m]:t.layoutBox[m],y=st(r[m]);g.max=g.min+y,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[m].max=n.relativeTarget[m].min+y)});const l=Cr();Ss(l,r,t.layoutBox);const c=Cr();o?Ss(c,n.applyTransform(s,!0),t.measuredBox):Ss(c,r,t.layoutBox);const u=!ny(l);let d=!1;if(!n.resumeFrom){const m=n.getClosestProjectingParent();if(m&&!m.resumeFrom){const{snapshot:g,layout:y}=m;if(g&&y){const b=Pe();Rs(b,t.layoutBox,g.layoutBox);const T=Pe();Rs(T,r,y.layoutBox),ry(b,T)||(d=!0),m.options.layoutRoot&&(n.relativeTarget=T,n.relativeTargetOrigin=b,n.relativeParent=m)}}}n.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(n.isLead()){const{onExitComplete:r}=n.options;r&&r()}n.options.transition=void 0}function II(n){$n.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function AI(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function CI(n){n.clearSnapshot()}function Kd(n){n.clearMeasurements()}function PI(n){n.isLayoutDirty=!1}function SI(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function Qd(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function RI(n){n.resolveTargetDelta()}function NI(n){n.calcProjection()}function kI(n){n.resetRotation()}function VI(n){n.removeLeadSnapshot()}function Xd(n,e,t){n.translate=we(e.translate,0,t),n.scale=we(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function Jd(n,e,t,r){n.min=we(e.min,t.min,r),n.max=we(e.max,t.max,r)}function jI(n,e,t,r){Jd(n.x,e.x,t.x,r),Jd(n.y,e.y,t.y,r)}function DI(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const MI={duration:.45,ease:[.4,0,.1,1]},Zd=n=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(n),ef=Zd("applewebkit/")&&!Zd("chrome/")?Math.round:be;function tf(n){n.min=ef(n.min),n.max=ef(n.max)}function OI(n){tf(n.x),tf(n.y)}function iy(n,e,t){return n==="position"||n==="preserve-aspect"&&!Cl(qd(e),qd(t),.2)}const LI=sy({attachResizeListener:(n,e)=>Mt(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Qa={current:void 0},oy=sy({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Qa.current){const n=new LI({});n.mount(window),n.setOptions({layoutScroll:!0}),Qa.current=n}return Qa.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),FI={pan:{Feature:tI},drag:{Feature:eI,ProjectionNode:oy,MeasureLayout:Zg}},UI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function BI(n){const e=UI.exec(n);if(!e)return[,];const[,t,r]=e;return[t,r]}function Nl(n,e,t=1){const[r,s]=BI(n);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return Yg(o)?parseFloat(o):o}else return _l(s)?Nl(s,e,t+1):s}function YI(n,{...e},t){const r=n.current;if(!(r instanceof Element))return{target:e,transitionEnd:t};t&&(t={...t}),n.values.forEach(s=>{const i=s.get();if(!_l(i))return;const o=Nl(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!_l(i))continue;const o=Nl(i,r);o&&(e[s]=o,t||(t={}),t[s]===void 0&&(t[s]=i))}return{target:e,transitionEnd:t}}const $I=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),ay=n=>$I.has(n),zI=n=>Object.keys(n).some(ay),nf=n=>n===ur||n===q,rf=(n,e)=>parseFloat(n.split(", ")[e]),sf=(n,e)=>(t,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return rf(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?rf(i[1],n):0}},qI=new Set(["x","y","z"]),HI=ri.filter(n=>!qI.has(n));function GI(n){const e=[];return HI.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e.length&&n.render(),e}const Mr={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:sf(4,13),y:sf(5,14)};Mr.translateX=Mr.x;Mr.translateY=Mr.y;const WI=(n,e,t)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,l={};o==="none"&&e.setStaticValue("display",n.display||"block"),t.forEach(u=>{l[u]=Mr[u](r,i)}),e.render();const c=e.measureViewportBox();return t.forEach(u=>{const d=e.getValue(u);d&&d.jump(l[u]),n[u]=Mr[u](c,i)}),n},KI=(n,e,t={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(ay);let i=[],o=!1;const l=[];if(s.forEach(c=>{const u=n.getValue(c);if(!n.hasValue(c))return;let d=t[c],m=ws(d);const g=e[c];let y;if(ho(g)){const b=g.length,T=g[0]===null?1:0;d=g[T],m=ws(d);for(let x=T;x<b&&g[x]!==null;x++)y?Sc(ws(g[x])===y):y=ws(g[x])}else y=ws(g);if(m!==y)if(nf(m)&&nf(y)){const b=u.get();typeof b=="string"&&u.set(parseFloat(b)),typeof g=="string"?e[c]=parseFloat(g):Array.isArray(g)&&y===q&&(e[c]=g.map(parseFloat))}else m!=null&&m.transform&&(y!=null&&y.transform)&&(d===0||g===0)?d===0?u.set(y.transform(d)):e[c]=m.transform(g):(o||(i=GI(n),o=!0),l.push(c),r[c]=r[c]!==void 0?r[c]:e[c],u.jump(g))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=WI(e,n,l);return i.length&&i.forEach(([d,m])=>{n.getValue(d).set(m)}),n.render(),$o&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:r}}else return{target:e,transitionEnd:r}};function QI(n,e,t,r){return zI(e)?KI(n,e,t,r):{target:e,transitionEnd:r}}const XI=(n,e,t,r)=>{const s=YI(n,e,r);return e=s.target,r=s.transitionEnd,QI(n,e,t,r)},kl={current:null},ly={current:!1};function JI(){if(ly.current=!0,!!$o)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>kl.current=n.matches;n.addListener(e),e()}else kl.current=!1}function ZI(n,e,t){const{willChange:r}=e;for(const s in e){const i=e[s],o=t[s];if(nt(i))n.addValue(s,i),go(r)&&r.add(s);else if(nt(o))n.addValue(s,Dr(i,{owner:n})),go(r)&&r.remove(s);else if(o!==i)if(n.hasValue(s)){const l=n.getValue(s);!l.hasAnimated&&l.set(i)}else{const l=n.getStaticValue(s);n.addValue(s,Dr(l!==void 0?l:i,{owner:n}))}}for(const s in t)e[s]===void 0&&n.removeValue(s);return e}const of=new WeakMap,cy=Object.keys(Us),e1=cy.length,af=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],t1=_c.length;class n1{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>he.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=qo(t),this.isVariantNode=Gp(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...d}=this.scrapeMotionValuesFromProps(t,{});for(const m in d){const g=d[m];l[m]!==void 0&&nt(g)&&(g.set(l[m],!1),go(u)&&u.add(m))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,of.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),ly.current||JI(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:kl.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){of.delete(this.current),this.projection&&this.projection.unmount(),$t(this.notifyUpdate),$t(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const r=cr.has(e),s=t.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&he.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...t},r,s,i){let o,l;for(let c=0;c<e1;c++){const u=cy[c],{isEnabled:d,Feature:m,ProjectionNode:g,MeasureLayout:y}=Us[u];g&&(o=g),d(t)&&(!this.features[u]&&m&&(this.features[u]=new m(this)),y&&(l=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:d,dragConstraints:m,layoutScroll:g,layoutRoot:y}=t;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!d||m&&Ir(m),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:g,layoutRoot:y})}return l}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Pe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<af.length;r++){const s=af[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=ZI(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const t={};for(let r=0;r<t1;r++){const s=_c[r],i=this.props[s];(Fs(i)||i===!1)&&(t[s]=i)}return t}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=Dr(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(t=this.getBaseTargetFromProps(this.props,e))!==null&&t!==void 0?t:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(t=Pc(this.props,r))===null||t===void 0?void 0:t[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!nt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new Lc),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class uy extends n1{sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:s},i){let o=wE(r,e||{},this);if(s&&(t&&(t=s(t)),r&&(r=s(r)),o&&(o=s(o))),i){yE(this,r,o);const l=XI(this,r,o,t);t=l.transitionEnd,r=l.target}return{transition:e,transitionEnd:t,...r}}}function r1(n){return window.getComputedStyle(n)}class s1 extends uy{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(cr.has(t)){const r=Vc(t);return r&&r.default||0}else{const r=r1(e),s=(Xp(t)?r.getPropertyValue(t):r[t])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:t}){return Xg(e,t)}build(e,t,r,s){Tc(e,t,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Cc(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;nt(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}renderInstance(e,t,r,s){rg(e,t,r,s)}}class i1 extends uy{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(cr.has(t)){const r=Vc(t);return r&&r.default||0}return t=sg.has(t)?t:vc(t),e.getAttribute(t)}measureInstanceViewportBox(){return Pe()}scrapeMotionValuesFromProps(e,t){return og(e,t)}build(e,t,r,s){Ic(e,t,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,r,s){ig(e,t,r,s)}mount(e){this.isSVGTag=Ac(e.tagName),super.mount(e)}}const o1=(n,e)=>bc(n)?new i1(e,{enableHardwareAcceleration:!1}):new s1(e,{enableHardwareAcceleration:!0}),a1={layout:{ProjectionNode:oy,MeasureLayout:Zg}},l1={...jE,...eT,...FI,...a1},Q=cb((n,e)=>Bb(n,e,l1,o1));function hy(){const n=I.useRef(!1);return yc(()=>(n.current=!0,()=>{n.current=!1}),[]),n}function c1(){const n=hy(),[e,t]=I.useState(0),r=I.useCallback(()=>{n.current&&t(e+1)},[e]);return[I.useCallback(()=>he.postRender(r),[r]),e]}class u1 extends I.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=t.offsetHeight||0,r.width=t.offsetWidth||0,r.top=t.offsetTop,r.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function h1({children:n,isPresent:e}){const t=I.useId(),r=I.useRef(null),s=I.useRef({width:0,height:0,top:0,left:0});return I.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=t;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${t}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),I.createElement(u1,{isPresent:e,childRef:r,sizeRef:s},I.cloneElement(n,{ref:r}))}const Xa=({children:n,initial:e,isPresent:t,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const l=ag(d1),c=I.useId(),u=I.useMemo(()=>({id:c,initial:e,isPresent:t,custom:s,onExitComplete:d=>{l.set(d,!0);for(const m of l.values())if(!m)return;r&&r()},register:d=>(l.set(d,!1),()=>l.delete(d))}),i?void 0:[t]);return I.useMemo(()=>{l.forEach((d,m)=>l.set(m,!1))},[t]),I.useEffect(()=>{!t&&!l.size&&r&&r()},[t]),o==="popLayout"&&(n=I.createElement(h1,{isPresent:t},n)),I.createElement(Yo.Provider,{value:u},n)};function d1(){return new Map}function f1(n){return I.useEffect(()=>()=>n(),[])}const zn=n=>n.key||"";function m1(n,e){n.forEach(t=>{const r=zn(t);e.set(r,t)})}function p1(n){const e=[];return I.Children.forEach(n,t=>{I.isValidElement(t)&&e.push(t)}),e}const Vl=({children:n,custom:e,initial:t=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=I.useContext(xc).forceRender||c1()[0],c=hy(),u=p1(n);let d=u;const m=I.useRef(new Map).current,g=I.useRef(d),y=I.useRef(new Map).current,b=I.useRef(!0);if(yc(()=>{b.current=!1,m1(u,y),g.current=d}),f1(()=>{b.current=!0,y.clear(),m.clear()}),b.current)return I.createElement(I.Fragment,null,d.map(k=>I.createElement(Xa,{key:zn(k),isPresent:!0,initial:t?void 0:!1,presenceAffectsLayout:i,mode:o},k)));d=[...d];const T=g.current.map(zn),x=u.map(zn),V=T.length;for(let k=0;k<V;k++){const R=T[k];x.indexOf(R)===-1&&!m.has(R)&&m.set(R,void 0)}return o==="wait"&&m.size&&(d=[]),m.forEach((k,R)=>{if(x.indexOf(R)!==-1)return;const D=y.get(R);if(!D)return;const F=T.indexOf(R);let $=k;if(!$){const A=()=>{m.delete(R);const w=Array.from(y.keys()).filter(_=>!x.includes(_));if(w.forEach(_=>y.delete(_)),g.current=u.filter(_=>{const C=zn(_);return C===R||w.includes(C)}),!m.size){if(c.current===!1)return;l(),r&&r()}};$=I.createElement(Xa,{key:zn(D),isPresent:!1,onExitComplete:A,custom:e,presenceAffectsLayout:i,mode:o},D),m.set(R,$)}d.splice(F,0,$)}),d=d.map(k=>{const R=k.key;return m.has(R)?k:I.createElement(Xa,{key:zn(k),isPresent:!0,presenceAffectsLayout:i,mode:o},k)}),I.createElement(I.Fragment,null,m.size?d:d.map(k=>I.cloneElement(k)))},g1=gc("inline-flex items-center justify-center rounded-xl text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-lg px-3",lg:"h-11 rounded-xl px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ae=Fe.forwardRef(({className:n,variant:e,size:t,asChild:r=!1,...s},i)=>{const o=r?Vw:"button";return h.jsx(o,{className:Ze(g1({variant:e,size:t,className:n})),ref:i,...s})});ae.displayName="Button";const y1=()=>{const[n,e]=I.useState(!1),t=ar(),{user:r}=sr(),s=()=>{e(!n)},i=()=>"/",o=[{name:"Home",path:"/"},{name:"About",path:"/learn"},{name:"Therapy",path:"/therapy"},{name:"Calculator",path:"/calculator"},{name:"Services",path:"/services"}];return h.jsx(h.Fragment,{children:h.jsxs("header",{className:"bg-white/80 backdrop-blur-lg shadow-lg sticky top-0 z-50",children:[h.jsx("div",{className:"container mx-auto px-4 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs(fn,{to:"/",className:"flex items-center space-x-3",children:[h.jsx("img",{alt:"Logo",className:"h-16 w-auto",src:"/images/bhaggya darshhan.png"}),h.jsx("div",{className:"hidden sm:block",children:h.jsx("h1",{className:"text-2xl font-bold gradient-text",children:"Vaastu Guru"})})]}),h.jsx("nav",{className:"hidden md:flex items-center space-x-8",children:o.map(l=>h.jsx(fn,{to:l.path,className:`font-medium transition-colors duration-200 ${t.pathname===l.path?"text-orange-500":"text-gray-700 hover:text-orange-500"}`,children:l.name},l.name))}),h.jsxs("div",{className:"hidden md:flex items-center space-x-4",children:[h.jsx(Dh,{children:h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("span",{className:"text-gray-700",children:["Welcome",r!=null&&r.fullName?`, ${r.fullName}`:""]}),h.jsx(Mh,{appearance:{elements:{avatarBox:"h-10 w-10"}}})]})}),h.jsx(Oh,{children:h.jsx(Ft,{mode:"modal",afterSignInUrl:i(),afterSignUpUrl:i(),children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover rounded-xl transition-transform duration-300 ease-in-out hover:scale-105",children:"Login / Sign Up"})})})]}),h.jsxs("div",{className:"md:hidden flex items-center gap-4",children:[h.jsx(Dh,{children:h.jsx(Mh,{appearance:{elements:{avatarBox:"h-8 w-8"}}})}),h.jsx(Oh,{children:h.jsx(Ft,{mode:"modal",afterSignInUrl:i(),afterSignUpUrl:i(),children:h.jsx(ae,{size:"sm",className:"orange-gradient text-white hover:orange-gradient-hover rounded-xl transition-transform duration-300 ease-in-out hover:scale-105",children:"Login / Sign Up"})})}),h.jsx("button",{onClick:s,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",children:h.jsx(Q.div,{animate:{rotate:n?90:0},transition:{duration:.3},children:h.jsx(Lx,{className:"h-6 w-6 text-orange-500"})})})]})]})}),h.jsx(Vl,{children:n&&h.jsx(Q.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden bg-white border-t border-gray-200",children:h.jsx("div",{className:"container mx-auto px-4 py-4 space-y-4",children:o.map(l=>h.jsx(fn,{to:l.path,onClick:()=>e(!1),className:`block py-2 font-medium transition-colors duration-200 ${t.pathname===l.path?"text-orange-500":"text-gray-700 hover:text-orange-500"}`,children:l.name},l.name))})})})]})})};var dy={exports:{}},v1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",w1=v1,_1=w1;function fy(){}function my(){}my.resetWarningCache=fy;var x1=function(){function n(r,s,i,o,l,c){if(c!==_1){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:my,resetWarningCache:fy};return t.PropTypes=t,t};dy.exports=x1();var b1=dy.exports;const pe=Lo(b1);function T1(n){return n&&typeof n=="object"&&"default"in n?n.default:n}var py=I,E1=T1(py);function lf(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function I1(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.__proto__=e}var A1=!!(typeof window<"u"&&window.document&&window.document.createElement);function C1(n,e,t){if(typeof n!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof t<"u"&&typeof t!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function r(s){return s.displayName||s.name||"Component"}return function(i){if(typeof i!="function")throw new Error("Expected WrappedComponent to be a React component.");var o=[],l;function c(){l=n(o.map(function(d){return d.props})),u.canUseDOM?e(l):t&&(l=t(l))}var u=function(d){I1(m,d);function m(){return d.apply(this,arguments)||this}m.peek=function(){return l},m.rewind=function(){if(m.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var b=l;return l=void 0,o=[],b};var g=m.prototype;return g.UNSAFE_componentWillMount=function(){o.push(this),c()},g.componentDidUpdate=function(){c()},g.componentWillUnmount=function(){var b=o.indexOf(this);o.splice(b,1),c()},g.render=function(){return E1.createElement(i,this.props)},m}(py.PureComponent);return lf(u,"displayName","SideEffect("+r(i)+")"),lf(u,"canUseDOM",A1),u}}var P1=C1;const S1=Lo(P1);var R1=typeof Element<"u",N1=typeof Map=="function",k1=typeof Set=="function",V1=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ki(n,e){if(n===e)return!0;if(n&&e&&typeof n=="object"&&typeof e=="object"){if(n.constructor!==e.constructor)return!1;var t,r,s;if(Array.isArray(n)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(!Ki(n[r],e[r]))return!1;return!0}var i;if(N1&&n instanceof Map&&e instanceof Map){if(n.size!==e.size)return!1;for(i=n.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=n.entries();!(r=i.next()).done;)if(!Ki(r.value[1],e.get(r.value[0])))return!1;return!0}if(k1&&n instanceof Set&&e instanceof Set){if(n.size!==e.size)return!1;for(i=n.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(V1&&ArrayBuffer.isView(n)&&ArrayBuffer.isView(e)){if(t=n.length,t!=e.length)return!1;for(r=t;r--!==0;)if(n[r]!==e[r])return!1;return!0}if(n.constructor===RegExp)return n.source===e.source&&n.flags===e.flags;if(n.valueOf!==Object.prototype.valueOf&&typeof n.valueOf=="function"&&typeof e.valueOf=="function")return n.valueOf()===e.valueOf();if(n.toString!==Object.prototype.toString&&typeof n.toString=="function"&&typeof e.toString=="function")return n.toString()===e.toString();if(s=Object.keys(n),t=s.length,t!==Object.keys(e).length)return!1;for(r=t;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(R1&&n instanceof Element)return!1;for(r=t;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&n.$$typeof)&&!Ki(n[s[r]],e[s[r]]))return!1;return!0}return n!==n&&e!==e}var j1=function(e,t){try{return Ki(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const D1=Lo(j1);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var cf=Object.getOwnPropertySymbols,M1=Object.prototype.hasOwnProperty,O1=Object.prototype.propertyIsEnumerable;function L1(n){if(n==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(n)}function F1(){try{if(!Object.assign)return!1;var n=new String("abc");if(n[5]="de",Object.getOwnPropertyNames(n)[0]==="5")return!1;for(var e={},t=0;t<10;t++)e["_"+String.fromCharCode(t)]=t;var r=Object.getOwnPropertyNames(e).map(function(i){return e[i]});if(r.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var U1=F1()?Object.assign:function(n,e){for(var t,r=L1(n),s,i=1;i<arguments.length;i++){t=Object(arguments[i]);for(var o in t)M1.call(t,o)&&(r[o]=t[o]);if(cf){s=cf(t);for(var l=0;l<s.length;l++)O1.call(t,s[l])&&(r[s[l]]=t[s[l]])}}return r};const B1=Lo(U1);var Kn={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},X={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(X).map(function(n){return X[n]});var ge={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},vo={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ys={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},Y1=Object.keys(vo).reduce(function(n,e){return n[vo[e]]=e,n},{}),$1=[X.NOSCRIPT,X.SCRIPT,X.STYLE],ft="data-react-helmet",z1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},q1=function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")},H1=function(){function n(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),et=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},G1=function(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)},uf=function(n,e){var t={};for(var r in n)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r]);return t},W1=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n},jl=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},K1=function(e){var t=Rr(e,X.TITLE),r=Rr(e,Ys.TITLE_TEMPLATE);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var s=Rr(e,Ys.DEFAULT_TITLE);return t||s||void 0},Q1=function(e){return Rr(e,Ys.ON_CHANGE_CLIENT_STATE)||function(){}},Ja=function(e,t){return t.filter(function(r){return typeof r[e]<"u"}).map(function(r){return r[e]}).reduce(function(r,s){return et({},r,s)},{})},X1=function(e,t){return t.filter(function(r){return typeof r[X.BASE]<"u"}).map(function(r){return r[X.BASE]}).reverse().reduce(function(r,s){if(!r.length)for(var i=Object.keys(s),o=0;o<i.length;o++){var l=i[o],c=l.toLowerCase();if(e.indexOf(c)!==-1&&s[c])return r.concat(s)}return r},[])},xs=function(e,t,r){var s={};return r.filter(function(i){return Array.isArray(i[e])?!0:(typeof i[e]<"u"&&tA("Helmet: "+e+' should be of type "Array". Instead found type "'+z1(i[e])+'"'),!1)}).map(function(i){return i[e]}).reverse().reduce(function(i,o){var l={};o.filter(function(g){for(var y=void 0,b=Object.keys(g),T=0;T<b.length;T++){var x=b[T],V=x.toLowerCase();t.indexOf(V)!==-1&&!(y===ge.REL&&g[y].toLowerCase()==="canonical")&&!(V===ge.REL&&g[V].toLowerCase()==="stylesheet")&&(y=V),t.indexOf(x)!==-1&&(x===ge.INNER_HTML||x===ge.CSS_TEXT||x===ge.ITEM_PROP)&&(y=x)}if(!y||!g[y])return!1;var k=g[y].toLowerCase();return s[y]||(s[y]={}),l[y]||(l[y]={}),s[y][k]?!1:(l[y][k]=!0,!0)}).reverse().forEach(function(g){return i.push(g)});for(var c=Object.keys(l),u=0;u<c.length;u++){var d=c[u],m=B1({},s[d],l[d]);s[d]=m}return i},[]).reverse()},Rr=function(e,t){for(var r=e.length-1;r>=0;r--){var s=e[r];if(s.hasOwnProperty(t))return s[t]}return null},J1=function(e){return{baseTag:X1([ge.HREF,ge.TARGET],e),bodyAttributes:Ja(Kn.BODY,e),defer:Rr(e,Ys.DEFER),encode:Rr(e,Ys.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ja(Kn.HTML,e),linkTags:xs(X.LINK,[ge.REL,ge.HREF],e),metaTags:xs(X.META,[ge.NAME,ge.CHARSET,ge.HTTPEQUIV,ge.PROPERTY,ge.ITEM_PROP],e),noscriptTags:xs(X.NOSCRIPT,[ge.INNER_HTML],e),onChangeClientState:Q1(e),scriptTags:xs(X.SCRIPT,[ge.SRC,ge.INNER_HTML],e),styleTags:xs(X.STYLE,[ge.CSS_TEXT],e),title:K1(e),titleAttributes:Ja(Kn.TITLE,e)}},Dl=function(){var n=Date.now();return function(e){var t=Date.now();t-n>16?(n=t,e(t)):setTimeout(function(){Dl(e)},0)}}(),hf=function(e){return clearTimeout(e)},Z1=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Dl:global.requestAnimationFrame||Dl,eA=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||hf:global.cancelAnimationFrame||hf,tA=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},bs=null,nA=function(e){bs&&eA(bs),e.defer?bs=Z1(function(){df(e,function(){bs=null})}):(df(e),bs=null)},df=function(e,t){var r=e.baseTag,s=e.bodyAttributes,i=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,u=e.onChangeClientState,d=e.scriptTags,m=e.styleTags,g=e.title,y=e.titleAttributes;Ml(X.BODY,s),Ml(X.HTML,i),rA(g,y);var b={baseTag:wr(X.BASE,r),linkTags:wr(X.LINK,o),metaTags:wr(X.META,l),noscriptTags:wr(X.NOSCRIPT,c),scriptTags:wr(X.SCRIPT,d),styleTags:wr(X.STYLE,m)},T={},x={};Object.keys(b).forEach(function(V){var k=b[V],R=k.newTags,D=k.oldTags;R.length&&(T[V]=R),D.length&&(x[V]=b[V].oldTags)}),t&&t(),u(e,T,x)},gy=function(e){return Array.isArray(e)?e.join(""):e},rA=function(e,t){typeof e<"u"&&document.title!==e&&(document.title=gy(e)),Ml(X.TITLE,t)},Ml=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var s=r.getAttribute(ft),i=s?s.split(","):[],o=[].concat(i),l=Object.keys(t),c=0;c<l.length;c++){var u=l[c],d=t[u]||"";r.getAttribute(u)!==d&&r.setAttribute(u,d),i.indexOf(u)===-1&&i.push(u);var m=o.indexOf(u);m!==-1&&o.splice(m,1)}for(var g=o.length-1;g>=0;g--)r.removeAttribute(o[g]);i.length===o.length?r.removeAttribute(ft):r.getAttribute(ft)!==l.join(",")&&r.setAttribute(ft,l.join(","))}},wr=function(e,t){var r=document.head||document.querySelector(X.HEAD),s=r.querySelectorAll(e+"["+ft+"]"),i=Array.prototype.slice.call(s),o=[],l=void 0;return t&&t.length&&t.forEach(function(c){var u=document.createElement(e);for(var d in c)if(c.hasOwnProperty(d))if(d===ge.INNER_HTML)u.innerHTML=c.innerHTML;else if(d===ge.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=c.cssText:u.appendChild(document.createTextNode(c.cssText));else{var m=typeof c[d]>"u"?"":c[d];u.setAttribute(d,m)}u.setAttribute(ft,"true"),i.some(function(g,y){return l=y,u.isEqualNode(g)})?i.splice(l,1):o.push(u)}),i.forEach(function(c){return c.parentNode.removeChild(c)}),o.forEach(function(c){return r.appendChild(c)}),{oldTags:i,newTags:o}},yy=function(e){return Object.keys(e).reduce(function(t,r){var s=typeof e[r]<"u"?r+'="'+e[r]+'"':""+r;return t?t+" "+s:s},"")},sA=function(e,t,r,s){var i=yy(r),o=gy(t);return i?"<"+e+" "+ft+'="true" '+i+">"+jl(o,s)+"</"+e+">":"<"+e+" "+ft+'="true">'+jl(o,s)+"</"+e+">"},iA=function(e,t,r){return t.reduce(function(s,i){var o=Object.keys(i).filter(function(u){return!(u===ge.INNER_HTML||u===ge.CSS_TEXT)}).reduce(function(u,d){var m=typeof i[d]>"u"?d:d+'="'+jl(i[d],r)+'"';return u?u+" "+m:m},""),l=i.innerHTML||i.cssText||"",c=$1.indexOf(e)===-1;return s+"<"+e+" "+ft+'="true" '+o+(c?"/>":">"+l+"</"+e+">")},"")},vy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[vo[s]||s]=e[s],r},t)},oA=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(r,s){return r[Y1[s]||s]=e[s],r},t)},aA=function(e,t,r){var s,i=(s={key:t},s[ft]=!0,s),o=vy(r,i);return[Fe.createElement(X.TITLE,o,t)]},lA=function(e,t){return t.map(function(r,s){var i,o=(i={key:s},i[ft]=!0,i);return Object.keys(r).forEach(function(l){var c=vo[l]||l;if(c===ge.INNER_HTML||c===ge.CSS_TEXT){var u=r.innerHTML||r.cssText;o.dangerouslySetInnerHTML={__html:u}}else o[c]=r[l]}),Fe.createElement(e,o)})},Dt=function(e,t,r){switch(e){case X.TITLE:return{toComponent:function(){return aA(e,t.title,t.titleAttributes)},toString:function(){return sA(e,t.title,t.titleAttributes,r)}};case Kn.BODY:case Kn.HTML:return{toComponent:function(){return vy(t)},toString:function(){return yy(t)}};default:return{toComponent:function(){return lA(e,t)},toString:function(){return iA(e,t,r)}}}},wy=function(e){var t=e.baseTag,r=e.bodyAttributes,s=e.encode,i=e.htmlAttributes,o=e.linkTags,l=e.metaTags,c=e.noscriptTags,u=e.scriptTags,d=e.styleTags,m=e.title,g=m===void 0?"":m,y=e.titleAttributes;return{base:Dt(X.BASE,t,s),bodyAttributes:Dt(Kn.BODY,r,s),htmlAttributes:Dt(Kn.HTML,i,s),link:Dt(X.LINK,o,s),meta:Dt(X.META,l,s),noscript:Dt(X.NOSCRIPT,c,s),script:Dt(X.SCRIPT,u,s),style:Dt(X.STYLE,d,s),title:Dt(X.TITLE,{title:g,titleAttributes:y},s)}},cA=function(e){var t,r;return r=t=function(s){G1(i,s);function i(){return q1(this,i),W1(this,s.apply(this,arguments))}return i.prototype.shouldComponentUpdate=function(l){return!D1(this.props,l)},i.prototype.mapNestedChildrenToProps=function(l,c){if(!c)return null;switch(l.type){case X.SCRIPT:case X.NOSCRIPT:return{innerHTML:c};case X.STYLE:return{cssText:c}}throw new Error("<"+l.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},i.prototype.flattenArrayTypeChildren=function(l){var c,u=l.child,d=l.arrayTypeChildren,m=l.newChildProps,g=l.nestedChildren;return et({},d,(c={},c[u.type]=[].concat(d[u.type]||[],[et({},m,this.mapNestedChildrenToProps(u,g))]),c))},i.prototype.mapObjectTypeChildren=function(l){var c,u,d=l.child,m=l.newProps,g=l.newChildProps,y=l.nestedChildren;switch(d.type){case X.TITLE:return et({},m,(c={},c[d.type]=y,c.titleAttributes=et({},g),c));case X.BODY:return et({},m,{bodyAttributes:et({},g)});case X.HTML:return et({},m,{htmlAttributes:et({},g)})}return et({},m,(u={},u[d.type]=et({},g),u))},i.prototype.mapArrayTypeChildrenToProps=function(l,c){var u=et({},c);return Object.keys(l).forEach(function(d){var m;u=et({},u,(m={},m[d]=l[d],m))}),u},i.prototype.warnOnInvalidChildren=function(l,c){return!0},i.prototype.mapChildrenToProps=function(l,c){var u=this,d={};return Fe.Children.forEach(l,function(m){if(!(!m||!m.props)){var g=m.props,y=g.children,b=uf(g,["children"]),T=oA(b);switch(u.warnOnInvalidChildren(m,y),m.type){case X.LINK:case X.META:case X.NOSCRIPT:case X.SCRIPT:case X.STYLE:d=u.flattenArrayTypeChildren({child:m,arrayTypeChildren:d,newChildProps:T,nestedChildren:y});break;default:c=u.mapObjectTypeChildren({child:m,newProps:c,newChildProps:T,nestedChildren:y});break}}}),c=this.mapArrayTypeChildrenToProps(d,c),c},i.prototype.render=function(){var l=this.props,c=l.children,u=uf(l,["children"]),d=et({},u);return c&&(d=this.mapChildrenToProps(c,d)),Fe.createElement(e,d)},H1(i,null,[{key:"canUseDOM",set:function(l){e.canUseDOM=l}}]),i}(Fe.Component),t.propTypes={base:pe.object,bodyAttributes:pe.object,children:pe.oneOfType([pe.arrayOf(pe.node),pe.node]),defaultTitle:pe.string,defer:pe.bool,encodeSpecialCharacters:pe.bool,htmlAttributes:pe.object,link:pe.arrayOf(pe.object),meta:pe.arrayOf(pe.object),noscript:pe.arrayOf(pe.object),onChangeClientState:pe.func,script:pe.arrayOf(pe.object),style:pe.arrayOf(pe.object),title:pe.string,titleAttributes:pe.object,titleTemplate:pe.string},t.defaultProps={defer:!0,encodeSpecialCharacters:!0},t.peek=e.peek,t.rewind=function(){var s=e.rewind();return s||(s=wy({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),s},r},uA=function(){return null},hA=S1(J1,nA,wy)(uA),Xn=cA(hA);Xn.renderStatic=Xn.rewind;var dA="Label",_y=I.forwardRef((n,e)=>h.jsx(kn.label,{...n,ref:e,onMouseDown:t=>{var s;t.target.closest("button, input, select, textarea")||((s=n.onMouseDown)==null||s.call(n,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));_y.displayName=dA;var xy=_y;const fA=gc("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),Jn=Fe.forwardRef(({className:n,...e},t)=>h.jsx(xy,{ref:t,className:Ze(fA(),n),...e}));Jn.displayName=xy.displayName;const $s={_origin:"https://api.emailjs.com"},mA=(n,e="https://api.emailjs.com")=>{$s._userID=n,$s._origin=e},by=(n,e,t)=>{if(!n)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class ff{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const Ty=(n,e,t={})=>new Promise((r,s)=>{const i=new XMLHttpRequest;i.addEventListener("load",({target:o})=>{const l=new ff(o);l.status===200||l.text==="OK"?r(l):s(l)}),i.addEventListener("error",({target:o})=>{s(new ff(o))}),i.open("POST",$s._origin+n,!0),Object.keys(t).forEach(o=>{i.setRequestHeader(o,t[o])}),i.send(e)}),pA=(n,e,t,r)=>{const s=r||$s._userID;return by(s,n,e),Ty("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"})},gA=n=>{let e;if(typeof n=="string"?e=document.querySelector(n):e=n,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},yA=(n,e,t,r)=>{const s=r||$s._userID,i=gA(t);by(s,n,e);const o=new FormData(i);return o.append("lib_version","3.12.1"),o.append("service_id",n),o.append("template_id",e),o.append("user_id",s),Ty("/api/v1.0/email/send-form",o)},vA={init:mA,send:pA,sendForm:yA},wA="service_cs2zlx7",_A="template_26pllzl",xA="MHJLn1TUuJZRK9NVz",bA=async({name:n,phone:e})=>{try{const t={to_email:"Rishabhg101@gmail.com",from_name:"Vaastu Guru",name:n,phone:e,time:new Date().toLocaleString()};return await vA.send(wA,_A,t,xA),Se({title:"Request Sent!",description:"Our team will contact you shortly."}),!0}catch(t){return console.error("Failed to send email:",t),Se({title:"Error",description:"Could not send the request. Please try again later.",variant:"destructive"}),!1}},TA=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},EA=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],l=n[t++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Iy={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,l=o?n[s+1]:0,c=s+2<n.length,u=c?n[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|u>>6,y=u&63;c||(y=64,o||(g=64)),r.push(t[d],t[m],t[g],t[y])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Ey(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):EA(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],l=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const m=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||l==null||u==null||m==null)throw new IA;const g=i<<2|l>>4;if(r.push(g),u!==64){const y=l<<4&240|u>>2;if(r.push(y),m!==64){const b=u<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class IA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const AA=function(n){const e=Ey(n);return Iy.encodeByteArray(e,!0)},wo=function(n){return AA(n).replace(/\./g,"")},Ay=function(n){try{return Iy.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA=()=>CA().__FIREBASE_DEFAULTS__,SA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const n={}.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},RA=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Ay(n[1]);return e&&JSON.parse(e)},Ko=()=>{try{return TA()||PA()||SA()||RA()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cy=n=>{var e,t;return(t=(e=Ko())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},NA=n=>{const e=Cy(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Py=()=>{var n;return(n=Ko())===null||n===void 0?void 0:n.config},Sy=n=>{var e;return(e=Ko())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(n){return n.endsWith(".cloudworkstations.dev")}async function Ry(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n),l="";return[wo(JSON.stringify(t)),wo(JSON.stringify(o)),l].join(".")}const Ns={};function jA(){const n={prod:[],emulator:[]};for(const e of Object.keys(Ns))Ns[e]?n.emulator.push(e):n.prod.push(e);return n}function DA(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let mf=!1;function Ny(n,e){if(typeof window>"u"||typeof document>"u"||!Kr(window.location.host)||Ns[n]===e||Ns[n]||mf)return;Ns[n]=e;function t(g){return`__firebase__banner__${g}`}const r="__firebase__banner",i=jA().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function l(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function c(g,y){g.setAttribute("width","24"),g.setAttribute("id",y),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{mf=!0,o()},g}function d(g,y){g.setAttribute("id",y),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=DA(r),y=t("text"),b=document.getElementById(y)||document.createElement("span"),T=t("learnmore"),x=document.getElementById(T)||document.createElement("a"),V=t("preprendIcon"),k=document.getElementById(V)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const R=g.element;l(R),d(x,T);const D=u();c(k,V),R.append(k,b,x,D),document.body.appendChild(R)}i?(b.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())}function OA(){var n;const e=(n=Ko())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function FA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function UA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const n=We();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function YA(){return!OA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $A(){try{return typeof indexedDB=="object"}catch{return!1}}function zA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="FirebaseError";class Kt extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=qA,Object.setPrototypeOf(this,Kt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ai.prototype.create)}}class ai{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?HA(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Kt(s,l,r)}}function HA(n,e){return n.replace(GA,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GA=/\{\$([^}]+)}/g;function WA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Zn(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(pf(i)&&pf(o)){if(!Zn(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function pf(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function li(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function KA(n,e){const t=new QA(n,e);return t.subscribe.bind(t)}class QA{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");XA(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=Za),s.error===void 0&&(s.error=Za),s.complete===void 0&&(s.complete=Za);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function XA(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Za(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ut(n){return n&&n._delegate?n._delegate:n}class er{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new kA;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(eC(e))try{this.getOrInitializeService({instanceIdentifier:qn})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=qn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qn){return this.instances.has(e)}getOptions(e=qn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ZA(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qn){return this.component?this.component.multipleInstances?e:qn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ZA(n){return n===qn?void 0:n}function eC(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new JA(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(te||(te={}));const nC={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},rC=te.INFO,sC={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},iC=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=sC[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fc{constructor(e){this.name=e,this._logLevel=rC,this._logHandler=iC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const oC=(n,e)=>e.some(t=>n instanceof t);let gf,yf;function aC(){return gf||(gf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function lC(){return yf||(yf=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ky=new WeakMap,Ol=new WeakMap,Vy=new WeakMap,el=new WeakMap,Uc=new WeakMap;function cC(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(yn(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&ky.set(t,n)}).catch(()=>{}),Uc.set(e,n),e}function uC(n){if(Ol.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});Ol.set(n,e)}let Ll={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ol.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Vy.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return yn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function hC(n){Ll=n(Ll)}function dC(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(tl(this),e,...t);return Vy.set(r,e.sort?e.sort():[e]),yn(r)}:lC().includes(n)?function(...e){return n.apply(tl(this),e),yn(ky.get(this))}:function(...e){return yn(n.apply(tl(this),e))}}function fC(n){return typeof n=="function"?dC(n):(n instanceof IDBTransaction&&uC(n),oC(n,aC())?new Proxy(n,Ll):n)}function yn(n){if(n instanceof IDBRequest)return cC(n);if(el.has(n))return el.get(n);const e=fC(n);return e!==n&&(el.set(n,e),Uc.set(e,n)),e}const tl=n=>Uc.get(n);function mC(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),l=yn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(yn(o.result),c.oldVersion,c.newVersion,yn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const pC=["get","getKey","getAll","getAllKeys","count"],gC=["put","add","delete","clear"],nl=new Map;function vf(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nl.get(e))return nl.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=gC.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||pC.includes(t)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[t](...l),s&&c.done]))[0]};return nl.set(e,i),i}hC(n=>({...n,get:(e,t,r)=>vf(e,t)||n.get(e,t,r),has:(e,t)=>!!vf(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(vC(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function vC(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Fl="@firebase/app",wf="0.13.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt=new Fc("@firebase/app"),wC="@firebase/app-compat",_C="@firebase/analytics-compat",xC="@firebase/analytics",bC="@firebase/app-check-compat",TC="@firebase/app-check",EC="@firebase/auth",IC="@firebase/auth-compat",AC="@firebase/database",CC="@firebase/data-connect",PC="@firebase/database-compat",SC="@firebase/functions",RC="@firebase/functions-compat",NC="@firebase/installations",kC="@firebase/installations-compat",VC="@firebase/messaging",jC="@firebase/messaging-compat",DC="@firebase/performance",MC="@firebase/performance-compat",OC="@firebase/remote-config",LC="@firebase/remote-config-compat",FC="@firebase/storage",UC="@firebase/storage-compat",BC="@firebase/firestore",YC="@firebase/ai",$C="@firebase/firestore-compat",zC="firebase",qC="11.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul="[DEFAULT]",HC={[Fl]:"fire-core",[wC]:"fire-core-compat",[xC]:"fire-analytics",[_C]:"fire-analytics-compat",[TC]:"fire-app-check",[bC]:"fire-app-check-compat",[EC]:"fire-auth",[IC]:"fire-auth-compat",[AC]:"fire-rtdb",[CC]:"fire-data-connect",[PC]:"fire-rtdb-compat",[SC]:"fire-fn",[RC]:"fire-fn-compat",[NC]:"fire-iid",[kC]:"fire-iid-compat",[VC]:"fire-fcm",[jC]:"fire-fcm-compat",[DC]:"fire-perf",[MC]:"fire-perf-compat",[OC]:"fire-rc",[LC]:"fire-rc-compat",[FC]:"fire-gcs",[UC]:"fire-gcs-compat",[BC]:"fire-fst",[$C]:"fire-fst-compat",[YC]:"fire-vertex","fire-js":"fire-js",[zC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new Map,GC=new Map,Bl=new Map;function _f(n,e){try{n.container.addComponent(e)}catch(t){zt.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Or(n){const e=n.name;if(Bl.has(e))return zt.debug(`There were multiple attempts to register component ${e}.`),!1;Bl.set(e,n);for(const t of _o.values())_f(t,n);for(const t of GC.values())_f(t,n);return!0}function Bc(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _t(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new ai("app","Firebase",WC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qr=qC;function jy(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ul,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(t||(t=Py()),!t)throw vn.create("no-options");const i=_o.get(s);if(i){if(Zn(t,i.options)&&Zn(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const o=new tC(s);for(const c of Bl.values())o.addComponent(c);const l=new KC(t,r,o);return _o.set(s,l),l}function Dy(n=Ul){const e=_o.get(n);if(!e&&n===Ul&&Py())return jy();if(!e)throw vn.create("no-app",{appName:n});return e}function wn(n,e,t){var r;let s=(r=HC[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zt.warn(l.join(" "));return}Or(new er(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="firebase-heartbeat-database",XC=1,zs="firebase-heartbeat-store";let rl=null;function My(){return rl||(rl=mC(QC,XC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(zs)}catch(t){console.warn(t)}}}}).catch(n=>{throw vn.create("idb-open",{originalErrorMessage:n.message})})),rl}async function JC(n){try{const t=(await My()).transaction(zs),r=await t.objectStore(zs).get(Oy(n));return await t.done,r}catch(e){if(e instanceof Kt)zt.warn(e.message);else{const t=vn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zt.warn(t.message)}}}async function xf(n,e){try{const r=(await My()).transaction(zs,"readwrite");await r.objectStore(zs).put(e,Oy(n)),await r.done}catch(t){if(t instanceof Kt)zt.warn(t.message);else{const r=vn.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});zt.warn(r.message)}}}function Oy(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1024,eP=30;class tP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new rP(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=bf();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>eP){const o=sP(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){zt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=bf(),{heartbeatsToSend:r,unsentEntries:s}=nP(this._heartbeatsCache.heartbeats),i=wo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return zt.warn(t),""}}}function bf(){return new Date().toISOString().substring(0,10)}function nP(n,e=ZC){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Tf(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Tf(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class rP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return $A()?zA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await JC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return xf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return xf(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tf(n){return wo(JSON.stringify({version:2,heartbeats:n})).length}function sP(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iP(n){Or(new er("platform-logger",e=>new yC(e),"PRIVATE")),Or(new er("heartbeat",e=>new tP(e),"PRIVATE")),wn(Fl,wf,n),wn(Fl,wf,"esm2017"),wn("fire-js","")}iP("");var Ef=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _n,Ly;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,w){function _(){}_.prototype=w.prototype,A.D=w.prototype,A.prototype=new _,A.prototype.constructor=A,A.C=function(C,S,P){for(var E=Array(arguments.length-2),B=2;B<arguments.length;B++)E[B-2]=arguments[B];return w.prototype[S].apply(C,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,w,_){_||(_=0);var C=Array(16);if(typeof w=="string")for(var S=0;16>S;++S)C[S]=w.charCodeAt(_++)|w.charCodeAt(_++)<<8|w.charCodeAt(_++)<<16|w.charCodeAt(_++)<<24;else for(S=0;16>S;++S)C[S]=w[_++]|w[_++]<<8|w[_++]<<16|w[_++]<<24;w=A.g[0],_=A.g[1],S=A.g[2];var P=A.g[3],E=w+(P^_&(S^P))+C[0]+3614090360&4294967295;w=_+(E<<7&4294967295|E>>>25),E=P+(S^w&(_^S))+C[1]+3905402710&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(_^P&(w^_))+C[2]+606105819&4294967295,S=P+(E<<17&4294967295|E>>>15),E=_+(w^S&(P^w))+C[3]+3250441966&4294967295,_=S+(E<<22&4294967295|E>>>10),E=w+(P^_&(S^P))+C[4]+4118548399&4294967295,w=_+(E<<7&4294967295|E>>>25),E=P+(S^w&(_^S))+C[5]+1200080426&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(_^P&(w^_))+C[6]+2821735955&4294967295,S=P+(E<<17&4294967295|E>>>15),E=_+(w^S&(P^w))+C[7]+4249261313&4294967295,_=S+(E<<22&4294967295|E>>>10),E=w+(P^_&(S^P))+C[8]+1770035416&4294967295,w=_+(E<<7&4294967295|E>>>25),E=P+(S^w&(_^S))+C[9]+2336552879&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(_^P&(w^_))+C[10]+4294925233&4294967295,S=P+(E<<17&4294967295|E>>>15),E=_+(w^S&(P^w))+C[11]+2304563134&4294967295,_=S+(E<<22&4294967295|E>>>10),E=w+(P^_&(S^P))+C[12]+1804603682&4294967295,w=_+(E<<7&4294967295|E>>>25),E=P+(S^w&(_^S))+C[13]+4254626195&4294967295,P=w+(E<<12&4294967295|E>>>20),E=S+(_^P&(w^_))+C[14]+2792965006&4294967295,S=P+(E<<17&4294967295|E>>>15),E=_+(w^S&(P^w))+C[15]+1236535329&4294967295,_=S+(E<<22&4294967295|E>>>10),E=w+(S^P&(_^S))+C[1]+4129170786&4294967295,w=_+(E<<5&4294967295|E>>>27),E=P+(_^S&(w^_))+C[6]+3225465664&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^_&(P^w))+C[11]+643717713&4294967295,S=P+(E<<14&4294967295|E>>>18),E=_+(P^w&(S^P))+C[0]+3921069994&4294967295,_=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(_^S))+C[5]+3593408605&4294967295,w=_+(E<<5&4294967295|E>>>27),E=P+(_^S&(w^_))+C[10]+38016083&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^_&(P^w))+C[15]+3634488961&4294967295,S=P+(E<<14&4294967295|E>>>18),E=_+(P^w&(S^P))+C[4]+3889429448&4294967295,_=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(_^S))+C[9]+568446438&4294967295,w=_+(E<<5&4294967295|E>>>27),E=P+(_^S&(w^_))+C[14]+3275163606&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^_&(P^w))+C[3]+4107603335&4294967295,S=P+(E<<14&4294967295|E>>>18),E=_+(P^w&(S^P))+C[8]+1163531501&4294967295,_=S+(E<<20&4294967295|E>>>12),E=w+(S^P&(_^S))+C[13]+2850285829&4294967295,w=_+(E<<5&4294967295|E>>>27),E=P+(_^S&(w^_))+C[2]+4243563512&4294967295,P=w+(E<<9&4294967295|E>>>23),E=S+(w^_&(P^w))+C[7]+1735328473&4294967295,S=P+(E<<14&4294967295|E>>>18),E=_+(P^w&(S^P))+C[12]+2368359562&4294967295,_=S+(E<<20&4294967295|E>>>12),E=w+(_^S^P)+C[5]+4294588738&4294967295,w=_+(E<<4&4294967295|E>>>28),E=P+(w^_^S)+C[8]+2272392833&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^_)+C[11]+1839030562&4294967295,S=P+(E<<16&4294967295|E>>>16),E=_+(S^P^w)+C[14]+4259657740&4294967295,_=S+(E<<23&4294967295|E>>>9),E=w+(_^S^P)+C[1]+2763975236&4294967295,w=_+(E<<4&4294967295|E>>>28),E=P+(w^_^S)+C[4]+1272893353&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^_)+C[7]+4139469664&4294967295,S=P+(E<<16&4294967295|E>>>16),E=_+(S^P^w)+C[10]+3200236656&4294967295,_=S+(E<<23&4294967295|E>>>9),E=w+(_^S^P)+C[13]+681279174&4294967295,w=_+(E<<4&4294967295|E>>>28),E=P+(w^_^S)+C[0]+3936430074&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^_)+C[3]+3572445317&4294967295,S=P+(E<<16&4294967295|E>>>16),E=_+(S^P^w)+C[6]+76029189&4294967295,_=S+(E<<23&4294967295|E>>>9),E=w+(_^S^P)+C[9]+3654602809&4294967295,w=_+(E<<4&4294967295|E>>>28),E=P+(w^_^S)+C[12]+3873151461&4294967295,P=w+(E<<11&4294967295|E>>>21),E=S+(P^w^_)+C[15]+530742520&4294967295,S=P+(E<<16&4294967295|E>>>16),E=_+(S^P^w)+C[2]+3299628645&4294967295,_=S+(E<<23&4294967295|E>>>9),E=w+(S^(_|~P))+C[0]+4096336452&4294967295,w=_+(E<<6&4294967295|E>>>26),E=P+(_^(w|~S))+C[7]+1126891415&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~_))+C[14]+2878612391&4294967295,S=P+(E<<15&4294967295|E>>>17),E=_+(P^(S|~w))+C[5]+4237533241&4294967295,_=S+(E<<21&4294967295|E>>>11),E=w+(S^(_|~P))+C[12]+1700485571&4294967295,w=_+(E<<6&4294967295|E>>>26),E=P+(_^(w|~S))+C[3]+2399980690&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~_))+C[10]+4293915773&4294967295,S=P+(E<<15&4294967295|E>>>17),E=_+(P^(S|~w))+C[1]+2240044497&4294967295,_=S+(E<<21&4294967295|E>>>11),E=w+(S^(_|~P))+C[8]+1873313359&4294967295,w=_+(E<<6&4294967295|E>>>26),E=P+(_^(w|~S))+C[15]+4264355552&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~_))+C[6]+2734768916&4294967295,S=P+(E<<15&4294967295|E>>>17),E=_+(P^(S|~w))+C[13]+1309151649&4294967295,_=S+(E<<21&4294967295|E>>>11),E=w+(S^(_|~P))+C[4]+4149444226&4294967295,w=_+(E<<6&4294967295|E>>>26),E=P+(_^(w|~S))+C[11]+3174756917&4294967295,P=w+(E<<10&4294967295|E>>>22),E=S+(w^(P|~_))+C[2]+718787259&4294967295,S=P+(E<<15&4294967295|E>>>17),E=_+(P^(S|~w))+C[9]+3951481745&4294967295,A.g[0]=A.g[0]+w&4294967295,A.g[1]=A.g[1]+(S+(E<<21&4294967295|E>>>11))&4294967295,A.g[2]=A.g[2]+S&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.u=function(A,w){w===void 0&&(w=A.length);for(var _=w-this.blockSize,C=this.B,S=this.h,P=0;P<w;){if(S==0)for(;P<=_;)s(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<w;)if(C[S++]=A.charCodeAt(P++),S==this.blockSize){s(this,C),S=0;break}}else for(;P<w;)if(C[S++]=A[P++],S==this.blockSize){s(this,C),S=0;break}}this.h=S,this.o+=w},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var w=1;w<A.length-8;++w)A[w]=0;var _=8*this.o;for(w=A.length-8;w<A.length;++w)A[w]=_&255,_/=256;for(this.u(A),A=Array(16),w=_=0;4>w;++w)for(var C=0;32>C;C+=8)A[_++]=this.g[w]>>>C&255;return A};function i(A,w){var _=l;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=w(A)}function o(A,w){this.h=w;for(var _=[],C=!0,S=A.length-1;0<=S;S--){var P=A[S]|0;C&&P==w||(_[S]=P,C=!1)}this.g=_}var l={};function c(A){return-128<=A&&128>A?i(A,function(w){return new o([w|0],0>w?-1:0)}):new o([A|0],0>A?-1:0)}function u(A){if(isNaN(A)||!isFinite(A))return m;if(0>A)return x(u(-A));for(var w=[],_=1,C=0;A>=_;C++)w[C]=A/_|0,_*=4294967296;return new o(w,0)}function d(A,w){if(A.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(A.charAt(0)=="-")return x(d(A.substring(1),w));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=u(Math.pow(w,8)),C=m,S=0;S<A.length;S+=8){var P=Math.min(8,A.length-S),E=parseInt(A.substring(S,S+P),w);8>P?(P=u(Math.pow(w,P)),C=C.j(P).add(u(E))):(C=C.j(_),C=C.add(u(E)))}return C}var m=c(0),g=c(1),y=c(16777216);n=o.prototype,n.m=function(){if(T(this))return-x(this).m();for(var A=0,w=1,_=0;_<this.g.length;_++){var C=this.i(_);A+=(0<=C?C:4294967296+C)*w,w*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(b(this))return"0";if(T(this))return"-"+x(this).toString(A);for(var w=u(Math.pow(A,6)),_=this,C="";;){var S=D(_,w).g;_=V(_,S.j(w));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(A);if(_=S,b(_))return P+C;for(;6>P.length;)P="0"+P;C=P+C}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function b(A){if(A.h!=0)return!1;for(var w=0;w<A.g.length;w++)if(A.g[w]!=0)return!1;return!0}function T(A){return A.h==-1}n.l=function(A){return A=V(this,A),T(A)?-1:b(A)?0:1};function x(A){for(var w=A.g.length,_=[],C=0;C<w;C++)_[C]=~A.g[C];return new o(_,~A.h).add(g)}n.abs=function(){return T(this)?x(this):this},n.add=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],C=0,S=0;S<=w;S++){var P=C+(this.i(S)&65535)+(A.i(S)&65535),E=(P>>>16)+(this.i(S)>>>16)+(A.i(S)>>>16);C=E>>>16,P&=65535,E&=65535,_[S]=E<<16|P}return new o(_,_[_.length-1]&-2147483648?-1:0)};function V(A,w){return A.add(x(w))}n.j=function(A){if(b(this)||b(A))return m;if(T(this))return T(A)?x(this).j(x(A)):x(x(this).j(A));if(T(A))return x(this.j(x(A)));if(0>this.l(y)&&0>A.l(y))return u(this.m()*A.m());for(var w=this.g.length+A.g.length,_=[],C=0;C<2*w;C++)_[C]=0;for(C=0;C<this.g.length;C++)for(var S=0;S<A.g.length;S++){var P=this.i(C)>>>16,E=this.i(C)&65535,B=A.i(S)>>>16,ce=A.i(S)&65535;_[2*C+2*S]+=E*ce,k(_,2*C+2*S),_[2*C+2*S+1]+=P*ce,k(_,2*C+2*S+1),_[2*C+2*S+1]+=E*B,k(_,2*C+2*S+1),_[2*C+2*S+2]+=P*B,k(_,2*C+2*S+2)}for(C=0;C<w;C++)_[C]=_[2*C+1]<<16|_[2*C];for(C=w;C<2*w;C++)_[C]=0;return new o(_,0)};function k(A,w){for(;(A[w]&65535)!=A[w];)A[w+1]+=A[w]>>>16,A[w]&=65535,w++}function R(A,w){this.g=A,this.h=w}function D(A,w){if(b(w))throw Error("division by zero");if(b(A))return new R(m,m);if(T(A))return w=D(x(A),w),new R(x(w.g),x(w.h));if(T(w))return w=D(A,x(w)),new R(x(w.g),w.h);if(30<A.g.length){if(T(A)||T(w))throw Error("slowDivide_ only works with positive integers.");for(var _=g,C=w;0>=C.l(A);)_=F(_),C=F(C);var S=$(_,1),P=$(C,1);for(C=$(C,2),_=$(_,2);!b(C);){var E=P.add(C);0>=E.l(A)&&(S=S.add(_),P=E),C=$(C,1),_=$(_,1)}return w=V(A,S.j(w)),new R(S,w)}for(S=m;0<=A.l(w);){for(_=Math.max(1,Math.floor(A.m()/w.m())),C=Math.ceil(Math.log(_)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),P=u(_),E=P.j(w);T(E)||0<E.l(A);)_-=C,P=u(_),E=P.j(w);b(P)&&(P=g),S=S.add(P),A=V(A,E)}return new R(S,A)}n.A=function(A){return D(this,A).h},n.and=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],C=0;C<w;C++)_[C]=this.i(C)&A.i(C);return new o(_,this.h&A.h)},n.or=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],C=0;C<w;C++)_[C]=this.i(C)|A.i(C);return new o(_,this.h|A.h)},n.xor=function(A){for(var w=Math.max(this.g.length,A.g.length),_=[],C=0;C<w;C++)_[C]=this.i(C)^A.i(C);return new o(_,this.h^A.h)};function F(A){for(var w=A.g.length+1,_=[],C=0;C<w;C++)_[C]=A.i(C)<<1|A.i(C-1)>>>31;return new o(_,A.h)}function $(A,w){var _=w>>5;w%=32;for(var C=A.g.length-_,S=[],P=0;P<C;P++)S[P]=0<w?A.i(P+_)>>>w|A.i(P+_+1)<<32-w:A.i(P+_);return new o(S,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Ly=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,_n=o}).apply(typeof Ef<"u"?Ef:typeof self<"u"?self:typeof window<"u"?window:{});var Fi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Fy,Es,Uy,Qi,Yl,By,Yy,$y;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,f,p){return a==Array.prototype||a==Object.prototype||(a[f]=p.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Fi=="object"&&Fi];for(var f=0;f<a.length;++f){var p=a[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=t(this);function s(a,f){if(f)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var N=a[v];if(!(N in p))break e;p=p[N]}a=a[a.length-1],v=p[a],f=f(v),f!=v&&f!=null&&e(p,a,{configurable:!0,writable:!0,value:f})}}function i(a,f){a instanceof String&&(a+="");var p=0,v=!1,N={next:function(){if(!v&&p<a.length){var j=p++;return{value:f(j,a[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return N[Symbol.iterator]=function(){return N},N}s("Array.prototype.values",function(a){return a||function(){return i(this,function(f,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var f=typeof a;return f=f!="object"?f:a?Array.isArray(a)?"array":f:"null",f=="array"||f=="object"&&typeof a.length=="number"}function u(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function d(a,f,p){return a.call.apply(a.bind,arguments)}function m(a,f,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var N=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(N,v),a.apply(f,N)}}return function(){return a.apply(f,arguments)}}function g(a,f,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:m,g.apply(null,arguments)}function y(a,f){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,f){function p(){}p.prototype=f.prototype,a.aa=f.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,N,j){for(var L=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)L[ue-2]=arguments[ue];return f.prototype[N].apply(v,L)}}function T(a){const f=a.length;if(0<f){const p=Array(f);for(let v=0;v<f;v++)p[v]=a[v];return p}return[]}function x(a,f){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(c(v)){const N=a.length||0,j=v.length||0;a.length=N+j;for(let L=0;L<j;L++)a[N+L]=v[L]}else a.push(v)}}class V{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(a){return/^[\s\xa0]*$/.test(a)}function R(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function D(a){return D[" "](a),a}D[" "]=function(){};var F=R().indexOf("Gecko")!=-1&&!(R().toLowerCase().indexOf("webkit")!=-1&&R().indexOf("Edge")==-1)&&!(R().indexOf("Trident")!=-1||R().indexOf("MSIE")!=-1)&&R().indexOf("Edge")==-1;function $(a,f,p){for(const v in a)f.call(p,a[v],v,a)}function A(a,f){for(const p in a)f.call(void 0,a[p],p,a)}function w(a){const f={};for(const p in a)f[p]=a[p];return f}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(a,f){let p,v;for(let N=1;N<arguments.length;N++){v=arguments[N];for(p in v)a[p]=v[p];for(let j=0;j<_.length;j++)p=_[j],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function S(a){var f=1;a=a.split(":");const p=[];for(;0<f&&a.length;)p.push(a.shift()),f--;return a.length&&p.push(a.join(":")),p}function P(a){l.setTimeout(()=>{throw a},0)}function E(){var a=Ie;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class B{constructor(){this.h=this.g=null}add(f,p){const v=ce.get();v.set(f,p),this.h?this.h.next=v:this.g=v,this.h=v}}var ce=new V(()=>new se,a=>a.reset());class se{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,Ee=!1,Ie=new B,yt=()=>{const a=l.Promise.resolve(void 0);ye=()=>{a.then(ie)}};var ie=()=>{for(var a;a=E();){try{a.h.call(a.g)}catch(p){P(p)}var f=ce;f.j(a),100>f.h&&(f.h++,a.next=f.g,f.g=a)}Ee=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Z(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,f),l.removeEventListener("test",p,f)}catch{}return a}();function Qt(a,f){if(Z.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget){if(F){e:{try{D(f.nodeName);var N=!0;break e}catch{}N=!1}N||(f=null)}}else p=="mouseover"?f=a.fromElement:p=="mouseout"&&(f=a.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Mn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Qt.aa.h.call(this)}}b(Qt,Z);var Mn={2:"touch",3:"pen",4:"mouse"};Qt.prototype.h=function(){Qt.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Xt="closure_listenable_"+(1e6*Math.random()|0),da=0;function rs(a,f,p,v,N){this.listener=a,this.proxy=null,this.src=f,this.type=p,this.capture=!!v,this.ha=N,this.key=++da,this.da=this.fa=!1}function kt(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function it(a){this.src=a,this.g={},this.h=0}it.prototype.add=function(a,f,p,v,N){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var L=fa(a,f,v,N);return-1<L?(f=a[L],p||(f.fa=!1)):(f=new rs(f,this.src,j,!!v,N),f.fa=p,a.push(f)),f};function gi(a,f){var p=f.type;if(p in a.g){var v=a.g[p],N=Array.prototype.indexOf.call(v,f,void 0),j;(j=0<=N)&&Array.prototype.splice.call(v,N,1),j&&(kt(f),a.g[p].length==0&&(delete a.g[p],a.h--))}}function fa(a,f,p,v){for(var N=0;N<a.length;++N){var j=a[N];if(!j.da&&j.listener==f&&j.capture==!!p&&j.ha==v)return N}return-1}var ma="closure_lm_"+(1e6*Math.random()|0),pa={};function Du(a,f,p,v,N){if(v&&v.once)return Ou(a,f,p,v,N);if(Array.isArray(f)){for(var j=0;j<f.length;j++)Du(a,f[j],p,v,N);return null}return p=wa(p),a&&a[Xt]?a.K(f,p,u(v)?!!v.capture:!!v,N):Mu(a,f,p,!1,v,N)}function Mu(a,f,p,v,N,j){if(!f)throw Error("Invalid event type");var L=u(N)?!!N.capture:!!N,ue=ya(a);if(ue||(a[ma]=ue=new it(a)),p=ue.add(f,p,v,L,j),p.proxy)return p;if(v=Q0(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)Dn||(N=L),N===void 0&&(N=!1),a.addEventListener(f.toString(),v,N);else if(a.attachEvent)a.attachEvent(Fu(f.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function Q0(){function a(p){return f.call(a.src,a.listener,p)}const f=X0;return a}function Ou(a,f,p,v,N){if(Array.isArray(f)){for(var j=0;j<f.length;j++)Ou(a,f[j],p,v,N);return null}return p=wa(p),a&&a[Xt]?a.L(f,p,u(v)?!!v.capture:!!v,N):Mu(a,f,p,!0,v,N)}function Lu(a,f,p,v,N){if(Array.isArray(f))for(var j=0;j<f.length;j++)Lu(a,f[j],p,v,N);else v=u(v)?!!v.capture:!!v,p=wa(p),a&&a[Xt]?(a=a.i,f=String(f).toString(),f in a.g&&(j=a.g[f],p=fa(j,p,v,N),-1<p&&(kt(j[p]),Array.prototype.splice.call(j,p,1),j.length==0&&(delete a.g[f],a.h--)))):a&&(a=ya(a))&&(f=a.g[f.toString()],a=-1,f&&(a=fa(f,p,v,N)),(p=-1<a?f[a]:null)&&ga(p))}function ga(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[Xt])gi(f.i,a);else{var p=a.type,v=a.proxy;f.removeEventListener?f.removeEventListener(p,v,a.capture):f.detachEvent?f.detachEvent(Fu(p),v):f.addListener&&f.removeListener&&f.removeListener(v),(p=ya(f))?(gi(p,a),p.h==0&&(p.src=null,f[ma]=null)):kt(a)}}}function Fu(a){return a in pa?pa[a]:pa[a]="on"+a}function X0(a,f){if(a.da)a=!0;else{f=new Qt(f,this);var p=a.listener,v=a.ha||a.src;a.fa&&ga(a),a=p.call(v,f)}return a}function ya(a){return a=a[ma],a instanceof it?a:null}var va="__closure_events_fn_"+(1e9*Math.random()>>>0);function wa(a){return typeof a=="function"?a:(a[va]||(a[va]=function(f){return a.handleEvent(f)}),a[va])}function Be(){ve.call(this),this.i=new it(this),this.M=this,this.F=null}b(Be,ve),Be.prototype[Xt]=!0,Be.prototype.removeEventListener=function(a,f,p,v){Lu(this,a,f,p,v)};function Ke(a,f){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=f.type||f,typeof f=="string")f=new Z(f,a);else if(f instanceof Z)f.target=f.target||a;else{var N=f;f=new Z(v,a),C(f,N)}if(N=!0,p)for(var j=p.length-1;0<=j;j--){var L=f.g=p[j];N=yi(L,v,!0,f)&&N}if(L=f.g=a,N=yi(L,v,!0,f)&&N,N=yi(L,v,!1,f)&&N,p)for(j=0;j<p.length;j++)L=f.g=p[j],N=yi(L,v,!1,f)&&N}Be.prototype.N=function(){if(Be.aa.N.call(this),this.i){var a=this.i,f;for(f in a.g){for(var p=a.g[f],v=0;v<p.length;v++)kt(p[v]);delete a.g[f],a.h--}}this.F=null},Be.prototype.K=function(a,f,p,v){return this.i.add(String(a),f,!1,p,v)},Be.prototype.L=function(a,f,p,v){return this.i.add(String(a),f,!0,p,v)};function yi(a,f,p,v){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();for(var N=!0,j=0;j<f.length;++j){var L=f[j];if(L&&!L.da&&L.capture==p){var ue=L.listener,Me=L.ha||L.src;L.fa&&gi(a.i,L),N=ue.call(Me,v)!==!1&&N}}return N&&!v.defaultPrevented}function Uu(a,f,p){if(typeof a=="function")p&&(a=g(a,p));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:l.setTimeout(a,f||0)}function Bu(a){a.g=Uu(()=>{a.g=null,a.i&&(a.i=!1,Bu(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class J0 extends ve{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Bu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(a){ve.call(this),this.h=a,this.g={}}b(ss,ve);var Yu=[];function $u(a){$(a.g,function(f,p){this.g.hasOwnProperty(p)&&ga(f)},a),a.g={}}ss.prototype.N=function(){ss.aa.N.call(this),$u(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _a=l.JSON.stringify,Z0=l.JSON.parse,ew=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function xa(){}xa.prototype.h=null;function zu(a){return a.h||(a.h=a.i())}function qu(){}var is={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ba(){Z.call(this,"d")}b(ba,Z);function Ta(){Z.call(this,"c")}b(Ta,Z);var On={},Hu=null;function vi(){return Hu=Hu||new Be}On.La="serverreachability";function Gu(a){Z.call(this,On.La,a)}b(Gu,Z);function os(a){const f=vi();Ke(f,new Gu(f))}On.STAT_EVENT="statevent";function Wu(a,f){Z.call(this,On.STAT_EVENT,a),this.stat=f}b(Wu,Z);function Qe(a){const f=vi();Ke(f,new Wu(f,a))}On.Ma="timingevent";function Ku(a,f){Z.call(this,On.Ma,a),this.size=f}b(Ku,Z);function as(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},f)}function ls(){this.g=!0}ls.prototype.xa=function(){this.g=!1};function tw(a,f,p,v,N,j){a.info(function(){if(a.g)if(j)for(var L="",ue=j.split("&"),Me=0;Me<ue.length;Me++){var oe=ue[Me].split("=");if(1<oe.length){var Ye=oe[0];oe=oe[1];var $e=Ye.split("_");L=2<=$e.length&&$e[1]=="type"?L+(Ye+"="+oe+"&"):L+(Ye+"=redacted&")}}else L=null;else L=j;return"XMLHTTP REQ ("+v+") [attempt "+N+"]: "+f+`
`+p+`
`+L})}function nw(a,f,p,v,N,j,L){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+N+"]: "+f+`
`+p+`
`+j+" "+L})}function pr(a,f,p,v){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+sw(a,p)+(v?" "+v:"")})}function rw(a,f){a.info(function(){return"TIMEOUT: "+f})}ls.prototype.info=function(){};function sw(a,f){if(!a.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var N=v[1];if(Array.isArray(N)&&!(1>N.length)){var j=N[0];if(j!="noop"&&j!="stop"&&j!="close")for(var L=1;L<N.length;L++)N[L]=""}}}}return _a(p)}catch{return f}}var wi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Qu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ea;function _i(){}b(_i,xa),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},Ea=new _i;function Jt(a,f,p,v){this.j=a,this.i=f,this.l=p,this.R=v||1,this.U=new ss(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Xu}function Xu(){this.i=null,this.g="",this.h=!1}var Ju={},Ia={};function Aa(a,f,p){a.L=1,a.v=Ei(Vt(f)),a.m=p,a.P=!0,Zu(a,null)}function Zu(a,f){a.F=Date.now(),xi(a),a.A=Vt(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),fh(p.i,"t",v),a.C=0,p=a.j.J,a.h=new Xu,a.g=Nh(a.j,p?f:null,!a.m),0<a.O&&(a.M=new J0(g(a.Y,a,a.g),a.O)),f=a.U,p=a.g,v=a.ca;var N="readystatechange";Array.isArray(N)||(N&&(Yu[0]=N.toString()),N=Yu);for(var j=0;j<N.length;j++){var L=Du(p,N[j],v||f.handleEvent,!1,f.h||f);if(!L)break;f.g[L.key]=L}f=a.H?w(a.H):{},a.m?(a.u||(a.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,f)):(a.u="GET",a.g.ea(a.A,a.u,null,f)),os(),tw(a.i,a.u,a.A,a.l,a.R,a.m)}Jt.prototype.ca=function(a){a=a.target;const f=this.M;f&&jt(a)==3?f.j():this.Y(a)},Jt.prototype.Y=function(a){try{if(a==this.g)e:{const $e=jt(this.g);var f=this.g.Ba();const vr=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||_h(this.g)))){this.J||$e!=4||f==7||(f==8||0>=vr?os(3):os(2)),Ca(this);var p=this.g.Z();this.X=p;t:if(eh(this)){var v=_h(this.g);a="";var N=v.length,j=jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ln(this),cs(this);var L="";break t}this.h.i=new l.TextDecoder}for(f=0;f<N;f++)this.h.h=!0,a+=this.h.i.decode(v[f],{stream:!(j&&f==N-1)});v.length=0,this.h.g+=a,this.C=0,L=this.h.g}else L=this.g.oa();if(this.o=p==200,nw(this.i,this.u,this.A,this.l,this.R,$e,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ue,Me=this.g;if((ue=Me.g?Me.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(ue)){var oe=ue;break t}}oe=null}if(p=oe)pr(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pa(this,p);else{this.o=!1,this.s=3,Qe(12),Ln(this),cs(this);break e}}if(this.P){p=!0;let ht;for(;!this.J&&this.C<L.length;)if(ht=iw(this,L),ht==Ia){$e==4&&(this.s=4,Qe(14),p=!1),pr(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==Ju){this.s=4,Qe(15),pr(this.i,this.l,L,"[Invalid Chunk]"),p=!1;break}else pr(this.i,this.l,ht,null),Pa(this,ht);if(eh(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||L.length!=0||this.h.h||(this.s=1,Qe(16),p=!1),this.o=this.o&&p,!p)pr(this.i,this.l,L,"[Invalid Chunked Response]"),Ln(this),cs(this);else if(0<L.length&&!this.W){this.W=!0;var Ye=this.j;Ye.g==this&&Ye.ba&&!Ye.M&&(Ye.j.info("Great, no buffering proxy detected. Bytes received: "+L.length),ja(Ye),Ye.M=!0,Qe(11))}}else pr(this.i,this.l,L,null),Pa(this,L);$e==4&&Ln(this),this.o&&!this.J&&($e==4?Ch(this.j,this):(this.o=!1,xi(this)))}else bw(this.g),p==400&&0<L.indexOf("Unknown SID")?(this.s=3,Qe(12)):(this.s=0,Qe(13)),Ln(this),cs(this)}}}catch{}finally{}};function eh(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function iw(a,f){var p=a.C,v=f.indexOf(`
`,p);return v==-1?Ia:(p=Number(f.substring(p,v)),isNaN(p)?Ju:(v+=1,v+p>f.length?Ia:(f=f.slice(v,v+p),a.C=v+p,f)))}Jt.prototype.cancel=function(){this.J=!0,Ln(this)};function xi(a){a.S=Date.now()+a.I,th(a,a.I)}function th(a,f){if(a.B!=null)throw Error("WatchDog timer not null");a.B=as(g(a.ba,a),f)}function Ca(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Jt.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(rw(this.i,this.A),this.L!=2&&(os(),Qe(17)),Ln(this),this.s=2,cs(this)):th(this,this.S-a)};function cs(a){a.j.G==0||a.J||Ch(a.j,a)}function Ln(a){Ca(a);var f=a.M;f&&typeof f.ma=="function"&&f.ma(),a.M=null,$u(a.U),a.g&&(f=a.g,a.g=null,f.abort(),f.ma())}function Pa(a,f){try{var p=a.j;if(p.G!=0&&(p.g==a||Sa(p.h,a))){if(!a.K&&Sa(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var N=v;if(N[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)Ri(p),Pi(p);else break e;Va(p),Qe(18)}}else p.za=N[1],0<p.za-p.T&&37500>N[2]&&p.F&&p.v==0&&!p.C&&(p.C=as(g(p.Za,p),6e3));if(1>=sh(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Un(p,11)}else if((a.K||p.g==a)&&Ri(p),!k(f))for(N=p.Da.g.parse(f),f=0;f<N.length;f++){let oe=N[f];if(p.T=oe[0],oe=oe[1],p.G==2)if(oe[0]=="c"){p.K=oe[1],p.ia=oe[2];const Ye=oe[3];Ye!=null&&(p.la=Ye,p.j.info("VER="+p.la));const $e=oe[4];$e!=null&&(p.Aa=$e,p.j.info("SVER="+p.Aa));const vr=oe[5];vr!=null&&typeof vr=="number"&&0<vr&&(v=1.5*vr,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const ht=a.g;if(ht){const ki=ht.g?ht.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ki){var j=v.h;j.g||ki.indexOf("spdy")==-1&&ki.indexOf("quic")==-1&&ki.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(Ra(j,j.h),j.h=null))}if(v.D){const Da=ht.g?ht.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(v.ya=Da,de(v.I,v.D,Da))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var L=a;if(v.qa=Rh(v,v.J?v.ia:null,v.W),L.K){ih(v.h,L);var ue=L,Me=v.L;Me&&(ue.I=Me),ue.B&&(Ca(ue),xi(ue)),v.g=L}else Ih(v);0<p.i.length&&Si(p)}else oe[0]!="stop"&&oe[0]!="close"||Un(p,7);else p.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?Un(p,7):ka(p):oe[0]!="noop"&&p.l&&p.l.ta(oe),p.v=0)}}os(4)}catch{}}var ow=class{constructor(a,f){this.g=a,this.map=f}};function nh(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function rh(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function sh(a){return a.h?1:a.g?a.g.size:0}function Sa(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function Ra(a,f){a.g?a.g.add(f):a.h=f}function ih(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}nh.prototype.cancel=function(){if(this.i=oh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function oh(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const p of a.g.values())f=f.concat(p.D);return f}return T(a.i)}function aw(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var f=[],p=a.length,v=0;v<p;v++)f.push(a[v]);return f}f=[],p=0;for(v in a)f[p++]=a[v];return f}function lw(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var f=[];a=a.length;for(var p=0;p<a;p++)f.push(p);return f}f=[],p=0;for(const v in a)f[p++]=v;return f}}}function ah(a,f){if(a.forEach&&typeof a.forEach=="function")a.forEach(f,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,f,void 0);else for(var p=lw(a),v=aw(a),N=v.length,j=0;j<N;j++)f.call(void 0,v[j],p&&p[j],a)}var lh=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cw(a,f){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),N=null;if(0<=v){var j=a[p].substring(0,v);N=a[p].substring(v+1)}else j=a[p];f(j,N?decodeURIComponent(N.replace(/\+/g," ")):"")}}}function Fn(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Fn){this.h=a.h,bi(this,a.j),this.o=a.o,this.g=a.g,Ti(this,a.s),this.l=a.l;var f=a.i,p=new ds;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),ch(this,p),this.m=a.m}else a&&(f=String(a).match(lh))?(this.h=!1,bi(this,f[1]||"",!0),this.o=us(f[2]||""),this.g=us(f[3]||"",!0),Ti(this,f[4]),this.l=us(f[5]||"",!0),ch(this,f[6]||"",!0),this.m=us(f[7]||"")):(this.h=!1,this.i=new ds(null,this.h))}Fn.prototype.toString=function(){var a=[],f=this.j;f&&a.push(hs(f,uh,!0),":");var p=this.g;return(p||f=="file")&&(a.push("//"),(f=this.o)&&a.push(hs(f,uh,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(hs(p,p.charAt(0)=="/"?dw:hw,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",hs(p,mw)),a.join("")};function Vt(a){return new Fn(a)}function bi(a,f,p){a.j=p?us(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function Ti(a,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);a.s=f}else a.s=null}function ch(a,f,p){f instanceof ds?(a.i=f,pw(a.i,a.h)):(p||(f=hs(f,fw)),a.i=new ds(f,a.h))}function de(a,f,p){a.i.set(f,p)}function Ei(a){return de(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function us(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function hs(a,f,p){return typeof a=="string"?(a=encodeURI(a).replace(f,uw),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function uw(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var uh=/[#\/\?@]/g,hw=/[#\?:]/g,dw=/[#\?]/g,fw=/[#\?@]/g,mw=/#/g;function ds(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function Zt(a){a.g||(a.g=new Map,a.h=0,a.i&&cw(a.i,function(f,p){a.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=ds.prototype,n.add=function(a,f){Zt(this),this.i=null,a=gr(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(f),this.h+=1,this};function hh(a,f){Zt(a),f=gr(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function dh(a,f){return Zt(a),f=gr(a,f),a.g.has(f)}n.forEach=function(a,f){Zt(this),this.g.forEach(function(p,v){p.forEach(function(N){a.call(f,N,v,this)},this)},this)},n.na=function(){Zt(this);const a=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let v=0;v<f.length;v++){const N=a[v];for(let j=0;j<N.length;j++)p.push(f[v])}return p},n.V=function(a){Zt(this);let f=[];if(typeof a=="string")dh(this,a)&&(f=f.concat(this.g.get(gr(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)f=f.concat(a[p])}return f},n.set=function(a,f){return Zt(this),this.i=null,a=gr(this,a),dh(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},n.get=function(a,f){return a?(a=this.V(a),0<a.length?String(a[0]):f):f};function fh(a,f,p){hh(a,f),0<p.length&&(a.i=null,a.g.set(gr(a,f),T(p)),a.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var v=f[p];const j=encodeURIComponent(String(v)),L=this.V(v);for(v=0;v<L.length;v++){var N=j;L[v]!==""&&(N+="="+encodeURIComponent(String(L[v]))),a.push(N)}}return this.i=a.join("&")};function gr(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function pw(a,f){f&&!a.j&&(Zt(a),a.i=null,a.g.forEach(function(p,v){var N=v.toLowerCase();v!=N&&(hh(this,v),fh(this,N,p))},a)),a.j=f}function gw(a,f){const p=new ls;if(l.Image){const v=new Image;v.onload=y(en,p,"TestLoadImage: loaded",!0,f,v),v.onerror=y(en,p,"TestLoadImage: error",!1,f,v),v.onabort=y(en,p,"TestLoadImage: abort",!1,f,v),v.ontimeout=y(en,p,"TestLoadImage: timeout",!1,f,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else f(!1)}function yw(a,f){const p=new ls,v=new AbortController,N=setTimeout(()=>{v.abort(),en(p,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(N),j.ok?en(p,"TestPingServer: ok",!0,f):en(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(N),en(p,"TestPingServer: error",!1,f)})}function en(a,f,p,v,N){try{N&&(N.onload=null,N.onerror=null,N.onabort=null,N.ontimeout=null),v(p)}catch{}}function vw(){this.g=new ew}function ww(a,f,p){const v=p||"";try{ah(a,function(N,j){let L=N;u(N)&&(L=_a(N)),f.push(v+j+"="+encodeURIComponent(L))})}catch(N){throw f.push(v+"type="+encodeURIComponent("_badmap")),N}}function Ii(a){this.l=a.Ub||null,this.j=a.eb||!1}b(Ii,xa),Ii.prototype.g=function(){return new Ai(this.l,this.j)},Ii.prototype.i=function(a){return function(){return a}}({});function Ai(a,f){Be.call(this),this.D=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ai,Be),n=Ai.prototype,n.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=f,this.readyState=1,ms(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(f.body=a),(this.D||l).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fs(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ms(this)),this.g&&(this.readyState=3,ms(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mh(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function mh(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?fs(this):ms(this),this.readyState==3&&mh(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,fs(this))},n.Qa=function(a){this.g&&(this.response=a,fs(this))},n.ga=function(){this.g&&fs(this)};function fs(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ms(a)}n.setRequestHeader=function(a,f){this.u.append(a,f)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=f.next();return a.join(`\r
`)};function ms(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function ph(a){let f="";return $(a,function(p,v){f+=v,f+=":",f+=p,f+=`\r
`}),f}function Na(a,f,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=ph(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):de(a,f,p))}function xe(a){Be.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(xe,Be);var _w=/^https?$/i,xw=["POST","PUT"];n=xe.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,f,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ea.g(),this.v=this.o?zu(this.o):zu(Ea),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(j){gh(this,j);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var N in v)p.set(N,v[N]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())p.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(j=>j.toLowerCase()=="content-type"),N=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(xw,f,void 0))||v||N||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,L]of p)this.g.setRequestHeader(j,L);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{wh(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){gh(this,j)}};function gh(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.m=5,yh(a),Ci(a)}function yh(a){a.A||(a.A=!0,Ke(a,"complete"),Ke(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ke(this,"complete"),Ke(this,"abort"),Ci(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ci(this,!0)),xe.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?vh(this):this.bb())},n.bb=function(){vh(this)};function vh(a){if(a.h&&typeof o<"u"&&(!a.v[1]||jt(a)!=4||a.Z()!=2)){if(a.u&&jt(a)==4)Uu(a.Ea,0,a);else if(Ke(a,"readystatechange"),jt(a)==4){a.h=!1;try{const L=a.Z();e:switch(L){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var p;if(!(p=f)){var v;if(v=L===0){var N=String(a.D).match(lh)[1]||null;!N&&l.self&&l.self.location&&(N=l.self.location.protocol.slice(0,-1)),v=!_w.test(N?N.toLowerCase():"")}p=v}if(p)Ke(a,"complete"),Ke(a,"success");else{a.m=6;try{var j=2<jt(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",yh(a)}}finally{Ci(a)}}}}function Ci(a,f){if(a.g){wh(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,f||Ke(a,"ready");try{p.onreadystatechange=v}catch{}}}function wh(a){a.I&&(l.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function jt(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<jt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),Z0(f)}};function _h(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function bw(a){const f={};a=(a.g&&2<=jt(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(k(a[v]))continue;var p=S(a[v]);const N=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const j=f[N]||[];f[N]=j,j.push(p)}A(f,function(v){return v.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ps(a,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||f}function xh(a){this.Aa=0,this.i=[],this.j=new ls,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ps("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ps("baseRetryDelayMs",5e3,a),this.cb=ps("retryDelaySeedMs",1e4,a),this.Wa=ps("forwardChannelMaxRetries",2,a),this.wa=ps("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new nh(a&&a.concurrentRequestLimit),this.Da=new vw,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xh.prototype,n.la=8,n.G=1,n.connect=function(a,f,p,v){Qe(0),this.W=a,this.H=f||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Rh(this,null,this.W),Si(this)};function ka(a){if(bh(a),a.G==3){var f=a.U++,p=Vt(a.I);if(de(p,"SID",a.K),de(p,"RID",f),de(p,"TYPE","terminate"),gs(a,p),f=new Jt(a,a.j,f),f.L=2,f.v=Ei(Vt(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=f.v,p=!0),p||(f.g=Nh(f.j,null),f.g.ea(f.v)),f.F=Date.now(),xi(f)}Sh(a)}function Pi(a){a.g&&(ja(a),a.g.cancel(),a.g=null)}function bh(a){Pi(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ri(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Si(a){if(!rh(a.h)&&!a.s){a.s=!0;var f=a.Ga;ye||yt(),Ee||(ye(),Ee=!0),Ie.add(f,a),a.B=0}}function Tw(a,f){return sh(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=f.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=as(g(a.Ga,a,f),Ph(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const N=new Jt(this,this.j,a);let j=this.o;if(this.S&&(j?(j=w(j),C(j,this.S)):j=this.S),this.m!==null||this.O||(N.H=j,j=null),this.P)e:{for(var f=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=p;break e}if(f===4096||p===this.i.length-1){f=p+1;break e}}f=1e3}else f=1e3;f=Eh(this,N,f),p=Vt(this.I),de(p,"RID",a),de(p,"CVER",22),this.D&&de(p,"X-HTTP-Session-Id",this.D),gs(this,p),j&&(this.O?f="headers="+encodeURIComponent(String(ph(j)))+"&"+f:this.m&&Na(p,this.m,j)),Ra(this.h,N),this.Ua&&de(p,"TYPE","init"),this.P?(de(p,"$req",f),de(p,"SID","null"),N.T=!0,Aa(N,p,null)):Aa(N,p,f),this.G=2}}else this.G==3&&(a?Th(this,a):this.i.length==0||rh(this.h)||Th(this))};function Th(a,f){var p;f?p=f.l:p=a.U++;const v=Vt(a.I);de(v,"SID",a.K),de(v,"RID",p),de(v,"AID",a.T),gs(a,v),a.m&&a.o&&Na(v,a.m,a.o),p=new Jt(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),f&&(a.i=f.D.concat(a.i)),f=Eh(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),Ra(a.h,p),Aa(p,v,f)}function gs(a,f){a.H&&$(a.H,function(p,v){de(f,v,p)}),a.l&&ah({},function(p,v){de(f,v,p)})}function Eh(a,f,p){p=Math.min(a.i.length,p);var v=a.l?g(a.l.Na,a.l,a):null;e:{var N=a.i;let j=-1;for(;;){const L=["count="+p];j==-1?0<p?(j=N[0].g,L.push("ofs="+j)):j=0:L.push("ofs="+j);let ue=!0;for(let Me=0;Me<p;Me++){let oe=N[Me].g;const Ye=N[Me].map;if(oe-=j,0>oe)j=Math.max(0,N[Me].g-100),ue=!1;else try{ww(Ye,L,"req"+oe+"_")}catch{v&&v(Ye)}}if(ue){v=L.join("&");break e}}}return a=a.i.splice(0,p),f.D=a,v}function Ih(a){if(!a.g&&!a.u){a.Y=1;var f=a.Fa;ye||yt(),Ee||(ye(),Ee=!0),Ie.add(f,a),a.v=0}}function Va(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=as(g(a.Fa,a),Ph(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,Ah(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=as(g(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qe(10),Pi(this),Ah(this))};function ja(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Ah(a){a.g=new Jt(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var f=Vt(a.qa);de(f,"RID","rpc"),de(f,"SID",a.K),de(f,"AID",a.T),de(f,"CI",a.F?"0":"1"),!a.F&&a.ja&&de(f,"TO",a.ja),de(f,"TYPE","xmlhttp"),gs(a,f),a.m&&a.o&&Na(f,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=Ei(Vt(f)),p.m=null,p.P=!0,Zu(p,a)}n.Za=function(){this.C!=null&&(this.C=null,Pi(this),Va(this),Qe(19))};function Ri(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Ch(a,f){var p=null;if(a.g==f){Ri(a),ja(a),a.g=null;var v=2}else if(Sa(a.h,f))p=f.D,ih(a.h,f),v=1;else return;if(a.G!=0){if(f.o)if(v==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var N=a.B;v=vi(),Ke(v,new Ku(v,p)),Si(a)}else Ih(a);else if(N=f.s,N==3||N==0&&0<f.X||!(v==1&&Tw(a,f)||v==2&&Va(a)))switch(p&&0<p.length&&(f=a.h,f.i=f.i.concat(p)),N){case 1:Un(a,5);break;case 4:Un(a,10);break;case 3:Un(a,6);break;default:Un(a,2)}}}function Ph(a,f){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*f}function Un(a,f){if(a.j.info("Error code "+f),f==2){var p=g(a.fb,a),v=a.Xa;const N=!v;v=new Fn(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||bi(v,"https"),Ei(v),N?gw(v.toString(),p):yw(v.toString(),p)}else Qe(2);a.G=0,a.l&&a.l.sa(f),Sh(a),bh(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Qe(2)):(this.j.info("Failed to ping google.com"),Qe(1))};function Sh(a){if(a.G=0,a.ka=[],a.l){const f=oh(a.h);(f.length!=0||a.i.length!=0)&&(x(a.ka,f),x(a.ka,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.ra()}}function Rh(a,f,p){var v=p instanceof Fn?Vt(p):new Fn(p);if(v.g!="")f&&(v.g=f+"."+v.g),Ti(v,v.s);else{var N=l.location;v=N.protocol,f=f?f+"."+N.hostname:N.hostname,N=+N.port;var j=new Fn(null);v&&bi(j,v),f&&(j.g=f),N&&Ti(j,N),p&&(j.l=p),v=j}return p=a.D,f=a.ya,p&&f&&de(v,p,f),de(v,"VER",a.la),gs(a,v),v}function Nh(a,f,p){if(f&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Ca&&!a.pa?new xe(new Ii({eb:p})):new xe(a.pa),f.Ha(a.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function kh(){}n=kh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ni(){}Ni.prototype.g=function(a,f){return new rt(a,f)};function rt(a,f){Be.call(this),this.g=new xh(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(a?a["X-WebChannel-Client-Profile"]=f.va:a={"X-WebChannel-Client-Profile":f.va}),this.g.S=a,(a=f&&f.Sb)&&!k(a)&&(this.g.m=a),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!k(f)&&(this.g.D=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new yr(this)}b(rt,Be),rt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},rt.prototype.close=function(){ka(this.g)},rt.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=_a(a),a=p);f.i.push(new ow(f.Ya++,a)),f.G==3&&Si(f)},rt.prototype.N=function(){this.g.l=null,delete this.j,ka(this.g),delete this.g,rt.aa.N.call(this)};function Vh(a){ba.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const p in f){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}b(Vh,ba);function jh(){Ta.call(this),this.status=1}b(jh,Ta);function yr(a){this.g=a}b(yr,kh),yr.prototype.ua=function(){Ke(this.g,"a")},yr.prototype.ta=function(a){Ke(this.g,new Vh(a))},yr.prototype.sa=function(a){Ke(this.g,new jh)},yr.prototype.ra=function(){Ke(this.g,"b")},Ni.prototype.createWebChannel=Ni.prototype.g,rt.prototype.send=rt.prototype.o,rt.prototype.open=rt.prototype.m,rt.prototype.close=rt.prototype.close,$y=function(){return new Ni},Yy=function(){return vi()},By=On,Yl={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wi.NO_ERROR=0,wi.TIMEOUT=8,wi.HTTP_ERROR=6,Qi=wi,Qu.COMPLETE="complete",Uy=Qu,qu.EventType=is,is.OPEN="a",is.CLOSE="b",is.ERROR="c",is.MESSAGE="d",Be.prototype.listen=Be.prototype.K,Es=qu,xe.prototype.listenOnce=xe.prototype.L,xe.prototype.getLastError=xe.prototype.Ka,xe.prototype.getLastErrorCode=xe.prototype.Ba,xe.prototype.getStatus=xe.prototype.Z,xe.prototype.getResponseJson=xe.prototype.Oa,xe.prototype.getResponseText=xe.prototype.oa,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Ha,Fy=xe}).apply(typeof Fi<"u"?Fi:typeof self<"u"?self:typeof window<"u"?window:{});const If="@firebase/firestore",Af="4.7.17";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr="11.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=new Fc("@firebase/firestore");function xr(){return tr.logLevel}function U(n,...e){if(tr.logLevel<=te.DEBUG){const t=e.map(Yc);tr.debug(`Firestore (${Xr}): ${n}`,...t)}}function qt(n,...e){if(tr.logLevel<=te.ERROR){const t=e.map(Yc);tr.error(`Firestore (${Xr}): ${n}`,...t)}}function Lr(n,...e){if(tr.logLevel<=te.WARN){const t=e.map(Yc);tr.warn(`Firestore (${Xr}): ${n}`,...t)}}function Yc(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,zy(n,r,t)}function zy(n,e,t){let r=`FIRESTORE (${Xr}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw qt(r),new Error(r)}function le(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||zy(e,s,r)}function K(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Y extends Kt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(He.UNAUTHENTICATED))}shutdown(){}}class aP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class lP{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){le(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let i=new xn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new xn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{U("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(U("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new xn)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(U("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string",31837,{l:r}),new qy(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string",2055,{h:e}),new He(e)}}class cP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=He.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class uP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new cP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Cf{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_t(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){le(this.o===void 0,3512);const r=i=>{i.error!=null&&U("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,U("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{U("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):U("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Cf(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(le(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Cf(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dP(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=dP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function J(n,e){return n<e?-1:n>e?1:0}function $l(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return J(r,s);{const i=Hy(),o=fP(i.encode(Pf(n,t)),i.encode(Pf(e,t)));return o!==0?o:J(r,s)}}t+=r>65535?2:1}return J(n.length,e.length)}function Pf(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function fP(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return J(n[t],e[t]);return J(n.length,e.length)}function Fr(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=-62135596800,Rf=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Rf);return new ke(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Y(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Sf)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Y(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rf}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Sf;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{static fromTimestamp(e){return new W(e)}static min(){return new W(new ke(0,0))}static max(){return new W(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf="__name__";class vt{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&H(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return vt.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof vt?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=vt.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return J(e.length,t.length)}static compareSegments(e,t){const r=vt.isNumericId(e),s=vt.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?vt.extractNumericId(e).compare(vt.extractNumericId(t)):$l(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return _n.fromString(e.substring(4,e.length-2))}}class me extends vt{construct(e,t,r){return new me(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Y(O.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new me(t)}static emptyPath(){return new me([])}}const mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Le extends vt{construct(e,t,r){return new Le(e,t,r)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Le.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nf}static keyField(){return new Le([Nf])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Y(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Y(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new Y(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Le(t)}static emptyPath(){return new Le([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z{constructor(e){this.path=e}static fromPath(e){return new z(me.fromString(e))}static fromName(e){return new z(me.fromString(e).popFirst(5))}static empty(){return new z(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new z(new me(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=-1;function pP(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=W.fromTimestamp(r===1e9?new ke(t+1,0):new ke(t,r));return new An(s,z.empty(),e)}function gP(n){return new An(n.readTime,n.key,qs)}class An{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new An(W.min(),z.empty(),qs)}static max(){return new An(W.max(),z.empty(),qs)}}function yP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:J(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jr(n){if(n.code!==O.FAILED_PRECONDITION||n.message!==vP)throw n;U("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof M?t:M.resolve(t)}catch(t){return M.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):M.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):M.reject(t)}static resolve(e){return new M((t,r)=>{t(e)})}static reject(e){return new M((t,r)=>{r(e)})}static waitFor(e){return new M((t,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&t()},c=>r(c))}),o=!0,i===s&&t()})}static or(e){let t=M.resolve(!1);for(const r of e)t=t.next(s=>s?M.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new M((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const u=c;t(e[u]).next(d=>{o[u]=d,++l,l===i&&r(o)},d=>s(d))}})}static doWhile(e,t){return new M((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function _P(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Zr(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}Qo.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c=-1;function Xo(n){return n==null}function xo(n){return n===0&&1/n==-1/0}function xP(n){return typeof n=="number"&&Number.isInteger(n)&&!xo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="";function bP(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=kf(e)),e=TP(n.get(t),e);return kf(e)}function TP(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case Wy:t+="";break;default:t+=i}}return t}function kf(n){return n+Wy+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vf(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Ky(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e,t){this.comparator=e,this.root=t||Oe.EMPTY}insert(e,t){return new _e(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Oe.BLACK,null,null))}remove(e){return new _e(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Oe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ui(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ui(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ui(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ui(this.root,e,this.comparator,!0)}}class Ui{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Oe{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Oe.RED,this.left=s??Oe.EMPTY,this.right=i??Oe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Oe(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Oe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Oe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Oe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Oe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw H(43730,{key:this.key,value:this.value});if(this.right.isRed())throw H(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw H(27949);return e+(this.isRed()?0:1)}}Oe.EMPTY=null,Oe.RED=!0,Oe.BLACK=!1;Oe.EMPTY=new class{constructor(){this.size=0}get key(){throw H(57766)}get value(){throw H(16141)}get color(){throw H(16727)}get left(){throw H(29726)}get right(){throw H(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Oe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e){this.comparator=e,this.data=new _e(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new jf(this.data.getIterator())}getIteratorFrom(e){return new jf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ve)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ve(this.comparator);return t.data=e,t}}class jf{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.fields=e,e.sort(Le.comparator)}static empty(){return new mt([])}unionWith(e){let t=new Ve(Le.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new mt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fr(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Qy("Invalid base64 string: "+i):i}}(e);return new Ue(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Ue(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ue.EMPTY_BYTE_STRING=new Ue("");const EP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cn(n){if(le(!!n,39018),typeof n=="string"){let e=0;const t=EP.exec(n);if(le(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ae(n.seconds),nanos:Ae(n.nanos)}}function Ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pn(n){return typeof n=="string"?Ue.fromBase64String(n):Ue.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="server_timestamp",Jy="__type__",Zy="__previous_value__",ev="__local_write_time__";function zc(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[Jy])===null||t===void 0?void 0:t.stringValue)===Xy}function Jo(n){const e=n.mapValue.fields[Zy];return zc(e)?Jo(e):e}function Hs(n){const e=Cn(n.mapValue.fields[ev].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t,r,s,i,o,l,c,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const bo="(default)";class Gs{constructor(e,t){this.projectId=e,this.database=t||bo}static empty(){return new Gs("","")}get isDefaultDatabase(){return this.database===bo}isEqual(e){return e instanceof Gs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="__type__",nv="__max__",Bi={mapValue:{fields:{__type__:{stringValue:nv}}}},rv="__vector__",To="value";function Sn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zc(n)?4:CP(n)?9007199254740991:AP(n)?10:11:H(28295,{value:n})}function Nt(n,e){if(n===e)return!0;const t=Sn(n);if(t!==Sn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Hs(n).isEqual(Hs(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Cn(s.timestampValue),l=Cn(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return Pn(s.bytesValue).isEqual(Pn(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Ae(s.geoPointValue.latitude)===Ae(i.geoPointValue.latitude)&&Ae(s.geoPointValue.longitude)===Ae(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ae(s.integerValue)===Ae(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ae(s.doubleValue),l=Ae(i.doubleValue);return o===l?xo(o)===xo(l):isNaN(o)&&isNaN(l)}return!1}(n,e);case 9:return Fr(n.arrayValue.values||[],e.arrayValue.values||[],Nt);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Vf(o)!==Vf(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Nt(o[c],l[c])))return!1;return!0}(n,e);default:return H(52216,{left:n})}}function Ws(n,e){return(n.values||[]).find(t=>Nt(t,e))!==void 0}function Ur(n,e){if(n===e)return 0;const t=Sn(n),r=Sn(e);if(t!==r)return J(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return J(n.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Ae(i.integerValue||i.doubleValue),c=Ae(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return Df(n.timestampValue,e.timestampValue);case 4:return Df(Hs(n),Hs(e));case 5:return $l(n.stringValue,e.stringValue);case 6:return function(i,o){const l=Pn(i),c=Pn(o);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=J(l[u],c[u]);if(d!==0)return d}return J(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const l=J(Ae(i.latitude),Ae(o.latitude));return l!==0?l:J(Ae(i.longitude),Ae(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Mf(n.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,u,d;const m=i.fields||{},g=o.fields||{},y=(l=m[To])===null||l===void 0?void 0:l.arrayValue,b=(c=g[To])===null||c===void 0?void 0:c.arrayValue,T=J(((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0,((d=b==null?void 0:b.values)===null||d===void 0?void 0:d.length)||0);return T!==0?T:Mf(y,b)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Bi.mapValue&&o===Bi.mapValue)return 0;if(i===Bi.mapValue)return 1;if(o===Bi.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),u=o.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let m=0;m<c.length&&m<d.length;++m){const g=$l(c[m],d[m]);if(g!==0)return g;const y=Ur(l[c[m]],u[d[m]]);if(y!==0)return y}return J(c.length,d.length)}(n.mapValue,e.mapValue);default:throw H(23264,{Pe:t})}}function Df(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return J(n,e);const t=Cn(n),r=Cn(e),s=J(t.seconds,r.seconds);return s!==0?s:J(t.nanos,r.nanos)}function Mf(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=Ur(t[s],r[s]);if(i)return i}return J(t.length,r.length)}function Br(n){return zl(n)}function zl(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Cn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=zl(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${zl(t.fields[o])}`;return s+"}"}(n.mapValue):H(61005,{value:n})}function Xi(n){switch(Sn(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Jo(n);return e?16+Xi(e):16;case 5:return 2*n.stringValue.length;case 6:return Pn(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Xi(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return hr(r.fields,(i,o)=>{s+=i.length+Xi(o)}),s}(n.mapValue);default:throw H(13486,{value:n})}}function Of(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ql(n){return!!n&&"integerValue"in n}function qc(n){return!!n&&"arrayValue"in n}function Lf(n){return!!n&&"nullValue"in n}function Ff(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ji(n){return!!n&&"mapValue"in n}function AP(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[tv])===null||t===void 0?void 0:t.stringValue)===rv}function ks(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hr(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ks(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ks(n.arrayValue.values[t]);return e}return Object.assign({},n)}function CP(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===nv}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.value=e}static empty(){return new lt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Ji(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ks(t)}setAll(e){let t=Le.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,s),r={},s=[],t=l.popLast()}o?r[l.lastSegment()]=ks(o):s.push(l.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());Ji(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Ji(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){hr(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new lt(ks(this.value))}}function sv(n){const e=[];return hr(n.fields,(t,r)=>{const s=new Le([t]);if(Ji(r)){const i=sv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new mt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,t,r,s,i,o,l){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Ge(e,0,W.min(),W.min(),W.min(),lt.empty(),0)}static newFoundDocument(e,t,r,s){return new Ge(e,1,t,W.min(),r,s,0)}static newNoDocument(e,t){return new Ge(e,2,t,W.min(),W.min(),lt.empty(),0)}static newUnknownDocument(e,t){return new Ge(e,3,t,W.min(),W.min(),lt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(W.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=lt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=lt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=W.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ge&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ge(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t){this.position=e,this.inclusive=t}}function Uf(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=z.comparator(z.fromName(o.referenceValue),t.key):r=Ur(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Bf(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nt(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e,t="asc"){this.field=e,this.dir=t}}function PP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{}class Re extends iv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new RP(e,t,r):t==="array-contains"?new VP(e,r):t==="in"?new jP(e,r):t==="not-in"?new DP(e,r):t==="array-contains-any"?new MP(e,r):new Re(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new NP(e,r):new kP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Ur(t,this.value)):t!==null&&Sn(this.value)===Sn(t)&&this.matchesComparison(Ur(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gt extends iv{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new gt(e,t)}matches(e){return ov(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function ov(n){return n.op==="and"}function av(n){return SP(n)&&ov(n)}function SP(n){for(const e of n.filters)if(e instanceof gt)return!1;return!0}function Hl(n){if(n instanceof Re)return n.field.canonicalString()+n.op.toString()+Br(n.value);if(av(n))return n.filters.map(e=>Hl(e)).join(",");{const e=n.filters.map(t=>Hl(t)).join(",");return`${n.op}(${e})`}}function lv(n,e){return n instanceof Re?function(r,s){return s instanceof Re&&r.op===s.op&&r.field.isEqual(s.field)&&Nt(r.value,s.value)}(n,e):n instanceof gt?function(r,s){return s instanceof gt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&lv(o,s.filters[l]),!0):!1}(n,e):void H(19439)}function cv(n){return n instanceof Re?function(t){return`${t.field.canonicalString()} ${t.op} ${Br(t.value)}`}(n):n instanceof gt?function(t){return t.op.toString()+" {"+t.getFilters().map(cv).join(" ,")+"}"}(n):"Filter"}class RP extends Re{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){const t=z.comparator(e.key,this.key);return this.matchesComparison(t)}}class NP extends Re{constructor(e,t){super(e,"in",t),this.keys=uv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kP extends Re{constructor(e,t){super(e,"not-in",t),this.keys=uv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function uv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}class VP extends Re{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qc(t)&&Ws(t.arrayValue,this.value)}}class jP extends Re{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ws(this.value.arrayValue,t)}}class DP extends Re{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ws(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ws(this.value.arrayValue,t)}}class MP extends Re{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ws(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e,t=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Ie=null}}function Yf(n,e=null,t=[],r=[],s=null,i=null,o=null){return new OP(n,e,t,r,s,i,o)}function Hc(n){const e=K(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Hl(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xo(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Br(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Br(r)).join(",")),e.Ie=t}return e.Ie}function Gc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!PP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!lv(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bf(n.startAt,e.startAt)&&Bf(n.endAt,e.endAt)}function Gl(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es{constructor(e,t=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function LP(n,e,t,r,s,i,o,l){return new es(n,e,t,r,s,i,o,l)}function hv(n){return new es(n)}function $f(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function dv(n){return n.collectionGroup!==null}function Vs(n){const e=K(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ve(Le.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ks(i,r))}),t.has(Le.keyField().canonicalString())||e.Ee.push(new Ks(Le.keyField(),r))}return e.Ee}function bt(n){const e=K(n);return e.de||(e.de=FP(e,Vs(n))),e.de}function FP(n,e){if(n.limitType==="F")return Yf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ks(s.field,i)});const t=n.endAt?new Eo(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Eo(n.startAt.position,n.startAt.inclusive):null;return Yf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Wl(n,e){const t=n.filters.concat([e]);return new es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Io(n,e,t){return new es(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Zo(n,e){return Gc(bt(n),bt(e))&&n.limitType===e.limitType}function fv(n){return`${Hc(bt(n))}|lt:${n.limitType}`}function br(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>cv(s)).join(", ")}]`),Xo(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Br(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Br(s)).join(",")),`Target(${r})`}(bt(n))}; limitType=${n.limitType})`}function ea(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):z.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of Vs(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const u=Uf(o,l,c);return o.inclusive?u<=0:u<0}(r.startAt,Vs(r),s)||r.endAt&&!function(o,l,c){const u=Uf(o,l,c);return o.inclusive?u>=0:u>0}(r.endAt,Vs(r),s))}(n,e)}function UP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function mv(n){return(e,t)=>{let r=!1;for(const s of Vs(n)){const i=BP(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function BP(n,e,t){const r=n.field.isKeyField()?z.comparator(e.key,t.key):function(i,o,l){const c=o.data.field(i),u=l.data.field(i);return c!==null&&u!==null?Ur(c,u):H(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){hr(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Ky(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=new _e(z.comparator);function Ht(){return YP}const pv=new _e(z.comparator);function Is(...n){let e=pv;for(const t of n)e=e.insert(t.key,t);return e}function gv(n){let e=pv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Wn(){return js()}function yv(){return js()}function js(){return new dr(n=>n.toString(),(n,e)=>n.isEqual(e))}const $P=new _e(z.comparator),zP=new Ve(z.comparator);function ne(...n){let e=zP;for(const t of n)e=e.add(t);return e}const qP=new Ve(J);function HP(){return qP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wc(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xo(e)?"-0":e}}function vv(n){return{integerValue:""+n}}function GP(n,e){return xP(e)?vv(e):Wc(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){this._=void 0}}function WP(n,e,t){return n instanceof Qs?function(s,i){const o={fields:{[Jy]:{stringValue:Xy},[ev]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&zc(i)&&(i=Jo(i)),i&&(o.fields[Zy]=i),{mapValue:o}}(t,e):n instanceof Xs?_v(n,e):n instanceof Js?xv(n,e):function(s,i){const o=wv(s,i),l=zf(o)+zf(s.Re);return ql(o)&&ql(s.Re)?vv(l):Wc(s.serializer,l)}(n,e)}function KP(n,e,t){return n instanceof Xs?_v(n,e):n instanceof Js?xv(n,e):t}function wv(n,e){return n instanceof Ao?function(r){return ql(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Qs extends ta{}class Xs extends ta{constructor(e){super(),this.elements=e}}function _v(n,e){const t=bv(e);for(const r of n.elements)t.some(s=>Nt(s,r))||t.push(r);return{arrayValue:{values:t}}}class Js extends ta{constructor(e){super(),this.elements=e}}function xv(n,e){let t=bv(e);for(const r of n.elements)t=t.filter(s=>!Nt(s,r));return{arrayValue:{values:t}}}class Ao extends ta{constructor(e,t){super(),this.serializer=e,this.Re=t}}function zf(n){return Ae(n.integerValue||n.doubleValue)}function bv(n){return qc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.field=e,this.transform=t}}function XP(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Xs&&s instanceof Xs||r instanceof Js&&s instanceof Js?Fr(r.elements,s.elements,Nt):r instanceof Ao&&s instanceof Ao?Nt(r.Re,s.Re):r instanceof Qs&&s instanceof Qs}(n.transform,e.transform)}class JP{constructor(e,t){this.version=e,this.transformResults=t}}class Tt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tt}static exists(e){return new Tt(void 0,e)}static updateTime(e){return new Tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zi(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class na{}function Tv(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Kc(n.key,Tt.none()):new ci(n.key,n.data,Tt.none());{const t=n.data,r=lt.empty();let s=new Ve(Le.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fr(n.key,r,new mt(s.toArray()),Tt.none())}}function ZP(n,e,t){n instanceof ci?function(s,i,o){const l=s.value.clone(),c=Hf(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):n instanceof fr?function(s,i,o){if(!Zi(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=Hf(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(Ev(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ds(n,e,t,r){return n instanceof ci?function(i,o,l,c){if(!Zi(i.precondition,o))return l;const u=i.value.clone(),d=Gf(i.fieldTransforms,c,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof fr?function(i,o,l,c){if(!Zi(i.precondition,o))return l;const u=Gf(i.fieldTransforms,c,o),d=o.data;return d.setAll(Ev(i)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(n,e,t,r):function(i,o,l){return Zi(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(n,e,t)}function eS(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=wv(r.transform,s||null);i!=null&&(t===null&&(t=lt.empty()),t.set(r.field,i))}return t||null}function qf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Fr(r,s,(i,o)=>XP(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class ci extends na{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fr extends na{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Ev(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Hf(n,e,t){const r=new Map;le(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,KP(o,l,t[s]))}return r}function Gf(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,WP(i,o,e))}return r}class Kc extends na{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class tS extends na{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ZP(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Ds(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Ds(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=yv();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=t.has(s.key)?null:l;const c=Tv(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(W.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&Fr(this.mutations,e.mutations,(t,r)=>qf(t,r))&&Fr(this.baseMutations,e.baseMutations,(t,r)=>qf(t,r))}}class Qc{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){le(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return $P}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Qc(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ce,re;function iS(n){switch(n){case O.OK:return H(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return H(15467,{code:n})}}function Iv(n){if(n===void 0)return qt("GRPC error has no .code"),O.UNKNOWN;switch(n){case Ce.OK:return O.OK;case Ce.CANCELLED:return O.CANCELLED;case Ce.UNKNOWN:return O.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return O.INTERNAL;case Ce.UNAVAILABLE:return O.UNAVAILABLE;case Ce.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Ce.NOT_FOUND:return O.NOT_FOUND;case Ce.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Ce.ABORTED:return O.ABORTED;case Ce.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Ce.DATA_LOSS:return O.DATA_LOSS;default:return H(39323,{code:n})}}(re=Ce||(Ce={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oS=new _n([4294967295,4294967295],0);function Wf(n){const e=Hy().encode(n),t=new Ly;return t.update(e),new Uint8Array(t.digest())}function Kf(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _n([t,r],0),new _n([s,i],0)]}class Xc{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new As(`Invalid padding: ${t}`);if(r<0)throw new As(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new As(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new As(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=_n.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(_n.fromNumber(r)));return s.compare(oS)===1&&(s=new _n([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=Wf(e),[r,s]=Kf(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Xc(i,s,t);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.pe===0)return;const t=Wf(e),[r,s]=Kf(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class As extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ui.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new ra(W.min(),s,new _e(J),Ht(),ne())}}class ui{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ui(r,t,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class Av{constructor(e,t){this.targetId=e,this.Ce=t}}class Cv{constructor(e,t,r=Ue.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class Qf{constructor(){this.Fe=0,this.Me=Xf(),this.xe=Ue.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=ne(),t=ne(),r=ne();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:H(38017,{changeType:i})}}),new ui(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=Xf()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,le(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class aS{constructor(e){this.ze=e,this.je=new Map,this.He=Ht(),this.Je=Yi(),this.Ye=Yi(),this.Ze=new _e(J)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:H(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const i=s.target;if(Gl(i))if(r===0){const o=new z(i.path);this.tt(t,o,Ge.newNoDocument(o,W.min()))}else le(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const l=this.ct(e),c=l?this.lt(l,e,o):1;if(c!==0){this.st(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,u)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,l;try{o=Pn(r).toUint8Array()}catch(c){if(c instanceof Qy)return Lr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Xc(o,s,i)}catch(c){return Lr(c instanceof As?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.tt(t,i,null),s++)}),s}It(e){const t=new Map;this.je.forEach((i,o)=>{const l=this._t(o);if(l){if(i.current&&Gl(l.target)){const c=new z(l.target.path);this.Et(c).has(o)||this.dt(o,c)||this.tt(o,c,Ge.newNoDocument(c,e))}i.Le&&(t.set(o,i.qe()),i.Qe())}});let r=ne();this.Ye.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const u=this._t(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new ra(e,t,this.Ze,this.He,r);return this.He=Ht(),this.Je=Yi(),this.Ye=Yi(),this.Ze=new _e(J),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new Qf,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Ve(J),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Ve(J),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||U("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new Qf),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Yi(){return new _e(z.comparator)}function Xf(){return new _e(z.comparator)}const lS=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),cS=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),uS=(()=>({and:"AND",or:"OR"}))();class hS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kl(n,e){return n.useProto3Json||Xo(e)?e:{value:e}}function Co(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pv(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function dS(n,e){return Co(n,e.toTimestamp())}function Et(n){return le(!!n,49232),W.fromTimestamp(function(t){const r=Cn(t);return new ke(r.seconds,r.nanos)}(n))}function Jc(n,e){return Ql(n,e).canonicalString()}function Ql(n,e){const t=function(s){return new me(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Sv(n){const e=me.fromString(n);return le(jv(e),10190,{key:e.toString()}),e}function Xl(n,e){return Jc(n.databaseId,e.path)}function sl(n,e){const t=Sv(e);if(t.get(1)!==n.databaseId.projectId)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Y(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(Nv(t))}function Rv(n,e){return Jc(n.databaseId,e)}function fS(n){const e=Sv(n);return e.length===4?me.emptyPath():Nv(e)}function Jl(n){return new me(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Nv(n){return le(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Jf(n,e,t){return{name:Xl(n,e),fields:t.value.mapValue.fields}}function mS(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:H(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,d){return u.useProto3Json?(le(d===void 0||typeof d=="string",58123),Ue.fromBase64String(d||"")):(le(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Ue.fromUint8Array(d||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(u){const d=u.code===void 0?O.UNKNOWN:Iv(u.code);return new Y(d,u.message||"")}(o);t=new Cv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sl(n,r.document.name),i=Et(r.document.updateTime),o=r.document.createTime?Et(r.document.createTime):W.min(),l=new lt({mapValue:{fields:r.document.fields}}),c=Ge.newFoundDocument(s,i,o,l),u=r.targetIds||[],d=r.removedTargetIds||[];t=new eo(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sl(n,r.document),i=r.readTime?Et(r.readTime):W.min(),o=Ge.newNoDocument(s,i),l=r.removedTargetIds||[];t=new eo([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sl(n,r.document),i=r.removedTargetIds||[];t=new eo([],i,s,null)}else{if(!("filter"in e))return H(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new sS(s,i),l=r.targetId;t=new Av(l,o)}}return t}function pS(n,e){let t;if(e instanceof ci)t={update:Jf(n,e.key,e.value)};else if(e instanceof Kc)t={delete:Xl(n,e.key)};else if(e instanceof fr)t={update:Jf(n,e.key,e.data),updateMask:ES(e.fieldMask)};else{if(!(e instanceof tS))return H(16599,{ft:e.type});t={verify:Xl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Qs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xs)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Js)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ao)return{fieldPath:o.field.canonicalString(),increment:l.Re};throw H(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dS(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:H(27497)}(n,e.precondition)),t}function gS(n,e){return n&&n.length>0?(le(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?Et(s.updateTime):Et(i);return o.isEqual(W.min())&&(o=Et(i)),new JP(o,s.transformResults||[])}(t,e))):[]}function yS(n,e){return{documents:[Rv(n,e.path)]}}function vS(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=Rv(n,s);const i=function(u){if(u.length!==0)return Vv(gt.create(u,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(d=>function(g){return{field:Tr(g.field),direction:xS(g.dir)}}(d))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const l=Kl(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{gt:t,parent:s}}function wS(n){let e=fS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){le(r===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];t.where&&(i=function(m){const g=kv(m);return g instanceof gt&&av(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(m){return m.map(g=>function(b){return new Ks(Er(b.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(t.orderBy));let l=null;t.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Xo(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(m){const g=!!m.before,y=m.values||[];return new Eo(y,g)}(t.startAt));let u=null;return t.endAt&&(u=function(m){const g=!m.before,y=m.values||[];return new Eo(y,g)}(t.endAt)),LP(e,s,o,i,l,"F",c,u)}function _S(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kv(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Er(t.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Er(t.unaryFilter.field);return Re.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Er(t.unaryFilter.field);return Re.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Er(t.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return H(61313);default:return H(60726)}}(n):n.fieldFilter!==void 0?function(t){return Re.create(Er(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return H(58110);default:return H(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return gt.create(t.compositeFilter.filters.map(r=>kv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return H(1026)}}(t.compositeFilter.op))}(n):H(30097,{filter:n})}function xS(n){return lS[n]}function bS(n){return cS[n]}function TS(n){return uS[n]}function Tr(n){return{fieldPath:n.canonicalString()}}function Er(n){return Le.fromServerFormat(n.fieldPath)}function Vv(n){return n instanceof Re?function(t){if(t.op==="=="){if(Ff(t.value))return{unaryFilter:{field:Tr(t.field),op:"IS_NAN"}};if(Lf(t.value))return{unaryFilter:{field:Tr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ff(t.value))return{unaryFilter:{field:Tr(t.field),op:"IS_NOT_NAN"}};if(Lf(t.value))return{unaryFilter:{field:Tr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tr(t.field),op:bS(t.op),value:t.value}}}(n):n instanceof gt?function(t){const r=t.getFilters().map(s=>Vv(s));return r.length===1?r[0]:{compositeFilter:{op:TS(t.op),filters:r}}}(n):H(54877,{filter:n})}function ES(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function jv(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,t,r,s,i=W.min(),o=W.min(),l=Ue.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IS{constructor(e){this.wt=e}}function AS(n){const e=wS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Io(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(){this.Cn=new PS}addToCollectionParentIndex(e,t){return this.Cn.add(t),M.resolve()}getCollectionParents(e,t){return M.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return M.resolve()}deleteFieldIndex(e,t){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,t){return M.resolve()}getDocumentsMatchingTarget(e,t){return M.resolve(null)}getIndexType(e,t){return M.resolve(0)}getFieldIndexes(e,t){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,t){return M.resolve(An.min())}getMinOffsetFromCollectionGroup(e,t){return M.resolve(An.min())}updateCollectionGroup(e,t,r){return M.resolve()}updateIndexEntries(e,t){return M.resolve()}}class PS{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Ve(me.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ve(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dv=41943040;class tt{static withCacheSize(e){return new tt(e,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */tt.DEFAULT_COLLECTION_PERCENTILE=10,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tt.DEFAULT=new tt(Dv,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tt.DISABLED=new tt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Yr(0)}static lr(){return new Yr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LruGarbageCollector",SS=1048576;function tm([n,e],[t,r]){const s=J(n,t);return s===0?J(e,r):s}class RS{constructor(e){this.Er=e,this.buffer=new Ve(tm),this.dr=0}Ar(){return++this.dr}Rr(e){const t=[e,this.Ar()];if(this.buffer.size<this.Er)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();tm(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class NS{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Vr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.mr(6e4)}stop(){this.Vr&&(this.Vr.cancel(),this.Vr=null)}get started(){return this.Vr!==null}mr(e){U(em,`Garbage collection scheduled in ${e}ms`),this.Vr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Vr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Zr(t)?U(em,"Ignoring IndexedDB error during garbage collection: ",t):await Jr(t)}await this.mr(3e5)})}}class kS{constructor(e,t){this.gr=e,this.params=t}calculateTargetCount(e,t){return this.gr.pr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return M.resolve(Qo.le);const r=new RS(t);return this.gr.forEachTarget(e,s=>r.Rr(s.sequenceNumber)).next(()=>this.gr.yr(e,s=>r.Rr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.gr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.gr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(U("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(Zf)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(U("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zf):this.wr(e,t))}getCacheSize(e){return this.gr.getCacheSize(e)}wr(e,t){let r,s,i,o,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(U("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,o=Date.now(),this.nthSequenceNumber(e,s))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,t))).next(m=>(i=m,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(u=Date.now(),xr()<=te.DEBUG&&U("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${m} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m})))}}function VS(n,e){return new kS(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jS{constructor(){this.changes=new dr(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ge.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?M.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Ds(r.mutation,s,mt.empty(),ke.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ne()){const s=Wn();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Is();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Wn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ne()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{t.set(o,l)})})}computeViews(e,t,r,s){let i=Ht();const o=js(),l=function(){return js()}();return t.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof fr)?i=i.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),Ds(d.mutation,u,d.mutation.getFieldMask(),ke.now())):o.set(u.key,mt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((u,d)=>o.set(u,d)),t.forEach((u,d)=>{var m;return l.set(u,new DS(d,(m=o.get(u))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,t){const r=js();let s=new _e((o,l)=>o-l),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const l of o)l.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let d=r.get(c)||mt.empty();d=l.applyToLocalView(u,d),r.set(c,d);const m=(s.get(l.batchId)||ne()).add(c);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,m=yv();d.forEach(g=>{if(!i.has(g)){const y=Tv(t.get(g),r.get(g));y!==null&&m.set(g,y),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,m))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):dv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):M.resolve(Wn());let l=qs,c=i;return o.next(u=>M.forEach(u,(d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(e,d).next(g=>{c=c.insert(d,g)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,c,u,ne())).next(d=>({batchId:l,changes:gv(d)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let s=Is();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Is();return this.indexManager.getCollectionParents(e,i).next(l=>M.forEach(l,c=>{const u=function(m,g){return new es(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(t,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((c,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,Ge.newInvalidDocument(d)))});let l=Is();return o.forEach((c,u)=>{const d=i.get(c);d!==void 0&&Ds(d.mutation,u,mt.empty(),ke.now()),ea(t,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return M.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Et(s.createTime)}}(t)),M.resolve()}getNamedQuery(e,t){return M.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(s){return{name:s.name,query:AS(s.bundledQuery),readTime:Et(s.readTime)}}(t)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{constructor(){this.overlays=new _e(z.comparator),this.Qr=new Map}getOverlay(e,t){return M.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wn();return M.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),M.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Qr.delete(r)),M.resolve()}getOverlaysForCollection(e,t,r){const s=Wn(),i=t.length+1,o=new z(t.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new _e((u,d)=>u-d);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let d=i.get(u.largestBatchId);d===null&&(d=Wn(),i=i.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=Wn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return M.resolve(l)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Qr.get(s.largestBatchId).delete(r.key);this.Qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new rS(t,r));let i=this.Qr.get(t);i===void 0&&(i=ne(),this.Qr.set(t,i)),this.Qr.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(){this.sessionToken=Ue.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(){this.$r=new Ve(je.Ur),this.Kr=new Ve(je.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const r=new je(e,t);this.$r=this.$r.add(r),this.Kr=this.Kr.add(r)}Gr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.zr(new je(e,t))}jr(e,t){e.forEach(r=>this.removeReference(r,t))}Hr(e){const t=new z(new me([])),r=new je(t,e),s=new je(t,e+1),i=[];return this.Kr.forEachInRange([r,s],o=>{this.zr(o),i.push(o.key)}),i}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new z(new me([])),r=new je(t,e),s=new je(t,e+1);let i=ne();return this.Kr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new je(e,0),r=this.$r.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class je{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return z.comparator(e.key,t.key)||J(e.Zr,t.Zr)}static Wr(e,t){return J(e.Zr,t.Zr)||z.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Ve(je.Ur)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new nS(i,t,r,s);this.mutationQueue.push(o);for(const l of s)this.Xr=this.Xr.add(new je(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,t){return M.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.ti(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?$c:this.nr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new je(t,0),s=new je(t,Number.POSITIVE_INFINITY),i=[];return this.Xr.forEachInRange([r,s],o=>{const l=this.ei(o.Zr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ve(J);return t.forEach(s=>{const i=new je(s,0),o=new je(s,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([i,o],l=>{r=r.add(l.Zr)})}),M.resolve(this.ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;z.isDocumentKey(i)||(i=i.child(""));const o=new je(new z(i),0);let l=new Ve(J);return this.Xr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Zr)),!0)},o),M.resolve(this.ni(l))}ni(e){const t=[];return e.forEach(r=>{const s=this.ei(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){le(this.ri(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Xr;return M.forEach(t.mutations,s=>{const i=new je(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Xr=r})}sr(e){}containsKey(e,t){const r=new je(t,0),s=this.Xr.firstAfterOrEqual(r);return M.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}ri(e,t){return this.ti(e)}ti(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.ii=e,this.docs=function(){return new _e(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.ii(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return M.resolve(r?r.document.mutableCopy():Ge.newInvalidDocument(t))}getEntries(e,t){let r=Ht();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ge.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=Ht();const o=t.path,l=new z(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||yP(gP(d),r)<=0||(s.has(d.key)||ea(t,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(e,t,r,s){H(9500)}si(e,t){return M.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new YS(this)}getSize(e){return M.resolve(this.size)}}class YS extends jS{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Br.addEntry(e,s)):this.Br.removeEntry(r)}),M.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e){this.persistence=e,this.oi=new dr(t=>Hc(t),Gc),this.lastRemoteSnapshotVersion=W.min(),this.highestTargetId=0,this._i=0,this.ai=new Zc,this.targetCount=0,this.ui=Yr.cr()}forEachTarget(e,t){return this.oi.forEach((r,s)=>t(s)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this._i&&(this._i=t),M.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Yr(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,M.resolve()}updateTargetData(e,t){return this.Tr(t),M.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.oi.forEach((o,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.oi.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,t){const r=this.oi.get(t)||null;return M.resolve(r)}addMatchingKeys(e,t,r){return this.ai.Gr(t,r),M.resolve()}removeMatchingKeys(e,t,r){this.ai.jr(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),M.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),M.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ai.Yr(t);return M.resolve(r)}containsKey(e,t){return M.resolve(this.ai.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t){this.ci={},this.overlays={},this.li=new Qo(0),this.hi=!1,this.hi=!0,this.Pi=new FS,this.referenceDelegate=e(this),this.Ti=new $S(this),this.indexManager=new CS,this.remoteDocumentCache=function(s){return new BS(s)}(r=>this.referenceDelegate.Ii(r)),this.serializer=new IS(t),this.Ei=new OS(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new LS,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ci[e.toKey()];return r||(r=new US(t,this.referenceDelegate),this.ci[e.toKey()]=r),r}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,r){U("MemoryPersistence","Starting transaction:",e);const s=new zS(this.li.next());return this.referenceDelegate.di(),r(s).next(i=>this.referenceDelegate.Ai(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ri(e,t){return M.or(Object.values(this.ci).map(r=>()=>r.containsKey(e,t)))}}class zS extends wP{constructor(e){super(),this.currentSequenceNumber=e}}class eu{constructor(e){this.persistence=e,this.Vi=new Zc,this.mi=null}static fi(e){return new eu(e)}get gi(){if(this.mi)return this.mi;throw H(60996)}addReference(e,t,r){return this.Vi.addReference(r,t),this.gi.delete(r.toString()),M.resolve()}removeReference(e,t,r){return this.Vi.removeReference(r,t),this.gi.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),M.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(s=>this.gi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.gi.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.gi,r=>{const s=z.fromPath(r);return this.pi(e,s).next(i=>{i||t.removeEntry(s,W.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(r=>{r?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return M.or([()=>M.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Po{constructor(e,t){this.persistence=e,this.yi=new dr(r=>bP(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=VS(this,t)}static fi(e,t){return new Po(e,t)}di(){}Ai(e){return M.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}pr(e){const t=this.br(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}br(e){let t=0;return this.yr(e,r=>{t++}).next(()=>t)}yr(e,t){return M.forEach(this.yi,(r,s)=>this.Dr(e,r,s).next(i=>i?M.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.si(e,o=>this.Dr(e,o,t).next(l=>{l||(r++,i.removeEntry(o,W.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,t,r){return this.yi.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,t){return this.yi.set(t,e.currentSequenceNumber),M.resolve()}Ii(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xi(e.data.value)),t}Dr(e,t,r){return M.or([()=>this.persistence.Ri(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.yi.get(t);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ds=r,this.As=s}static Rs(e,t){let r=ne(),s=ne();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new tu(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=function(){return YA()?8:_P(We())>0?6:4}()}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.ws(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.bs(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new qS;return this.Ss(e,t,o).next(l=>{if(i.result=l,this.fs)return this.Ds(e,t,o,l.size)})}).next(()=>i.result)}Ds(e,t,r,s){return r.documentReadCount<this.gs?(xr()<=te.DEBUG&&U("QueryEngine","SDK will not create cache indexes for query:",br(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),M.resolve()):(xr()<=te.DEBUG&&U("QueryEngine","Query:",br(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ps*s?(xr()<=te.DEBUG&&U("QueryEngine","The SDK decides to create cache indexes for query:",br(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bt(t))):M.resolve())}ws(e,t){if($f(t))return M.resolve(null);let r=bt(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=Io(t,null,"F"),r=bt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.ys.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.vs(t,l);return this.Cs(t,u,o,c.readTime)?this.ws(e,Io(t,null,"F")):this.Fs(e,u,t,c)}))})))}bs(e,t,r,s){return $f(t)||s.isEqual(W.min())?M.resolve(null):this.ys.getDocuments(e,r).next(i=>{const o=this.vs(t,i);return this.Cs(t,o,r,s)?M.resolve(null):(xr()<=te.DEBUG&&U("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),br(t)),this.Fs(e,o,t,pP(s,qs)).next(l=>l))})}vs(e,t){let r=new Ve(mv(e));return t.forEach((s,i)=>{ea(e,i)&&(r=r.add(i))}),r}Cs(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,t,r){return xr()<=te.DEBUG&&U("QueryEngine","Using full collection scan to execute query:",br(t)),this.ys.getDocumentsMatchingQuery(e,t,An.min(),r)}Fs(e,t,r,s){return this.ys.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nu="LocalStore",GS=3e8;class WS{constructor(e,t,r,s){this.persistence=e,this.Ms=t,this.serializer=s,this.xs=new _e(J),this.Os=new dr(i=>Hc(i),Gc),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(r)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new MS(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function KS(n,e,t,r){return new WS(n,e,t,r)}async function Ov(n,e){const t=K(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Ls(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=ne();for(const u of s){o.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of i){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return t.localDocuments.getDocuments(r,c).next(u=>({ks:u,removedBatchIds:o,addedBatchIds:l}))})})}function QS(n,e){const t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const m=u.batch,g=m.keys();let y=M.resolve();return g.forEach(b=>{y=y.next(()=>d.getEntry(c,b)).next(T=>{const x=u.docVersions.get(b);le(x!==null,48541),T.version.compareTo(x)<0&&(m.applyToRemoteDocument(T,u),T.isValidDocument()&&(T.setReadTime(u.commitVersion),d.addEntry(T)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,m))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=ne();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function Lv(n){const e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ti.getLastRemoteSnapshotVersion(t))}function XS(n,e){const t=K(n),r=e.snapshotVersion;let s=t.xs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Bs.newChangeBuffer({trackRemovals:!0});s=t.xs;const l=[];e.targetChanges.forEach((d,m)=>{const g=s.get(m);if(!g)return;l.push(t.Ti.removeMatchingKeys(i,d.removedDocuments,m).next(()=>t.Ti.addMatchingKeys(i,d.addedDocuments,m)));let y=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?y=y.withResumeToken(Ue.EMPTY_BYTE_STRING,W.min()).withLastLimboFreeSnapshotVersion(W.min()):d.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(d.resumeToken,r)),s=s.insert(m,y),function(T,x,V){return T.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=GS?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(g,y,d)&&l.push(t.Ti.updateTargetData(i,y))});let c=Ht(),u=ne();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(JS(i,o,e.documentUpdates).next(d=>{c=d.qs,u=d.Qs})),!r.isEqual(W.min())){const d=t.Ti.getLastRemoteSnapshotVersion(i).next(m=>t.Ti.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return M.waitFor(l).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,c,u)).next(()=>c)}).then(i=>(t.xs=s,i))}function JS(n,e,t){let r=ne(),s=ne();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=Ht();return t.forEach((l,c)=>{const u=i.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(W.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):U(nu,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{qs:o,Qs:s}})}function ZS(n,e){const t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=$c),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function eR(n,e){const t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Ti.getTargetData(r,e).next(i=>i?(s=i,M.resolve(s)):t.Ti.allocateTargetId(r).next(o=>(s=new hn(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Ti.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.xs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.xs=t.xs.insert(r.targetId,r),t.Os.set(e,r.targetId)),r})}async function Zl(n,e,t){const r=K(n),s=r.xs.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Zr(o))throw o;U(nu,`Failed to update sequence numbers for target ${e}: ${o}`)}r.xs=r.xs.remove(e),r.Os.delete(s.target)}function nm(n,e,t){const r=K(n);let s=W.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,d){const m=K(c),g=m.Os.get(d);return g!==void 0?M.resolve(m.xs.get(g)):m.Ti.getTargetData(u,d)}(r,o,bt(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ti.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Ms.getDocumentsMatchingQuery(o,e,t?s:W.min(),t?i:ne())).next(l=>(tR(r,UP(e),l),{documents:l,$s:i})))}function tR(n,e,t){let r=n.Ns.get(e)||W.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.Ns.set(e,r)}class rm{constructor(){this.activeTargetIds=HP()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nR{constructor(){this.xo=new rm,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,r){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new rm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{No(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="ConnectivityMonitor";class im{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){U(sm,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){U(sm,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i=null;function ec(){return $i===null?$i=function(){return 268435456+Math.round(2147483648*Math.random())}():$i++,"0x"+$i.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const il="RestConnection",sR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class iR{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo=`projects/${r}/databases/${s}`,this.Go=this.databaseId.database===bo?`project_id=${r}`:`project_id=${r}&database_id=${s}`}zo(e,t,r,s,i){const o=ec(),l=this.jo(e,t.toUriEncodedString());U(il,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(c,s,i);const{host:u}=new URL(l),d=Kr(u);return this.Jo(e,l,c,r,d).then(m=>(U(il,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Lr(il,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}Yo(e,t,r,s,i,o){return this.zo(e,t,r,s,i)}Ho(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xr}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}jo(e,t){const r=sR[e];return`${this.Ko}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze="WebChannelConnection";class aR extends iR{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,s,i){const o=ec();return new Promise((l,c)=>{const u=new Fy;u.setWithCredentials(!0),u.listenOnce(Uy.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Qi.NO_ERROR:const m=u.getResponseJson();U(ze,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Qi.TIMEOUT:U(ze,`RPC '${e}' ${o} timed out`),c(new Y(O.DEADLINE_EXCEEDED,"Request time out"));break;case Qi.HTTP_ERROR:const g=u.getStatus();if(U(ze,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let y=u.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const T=function(V){const k=V.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(k)>=0?k:O.UNKNOWN}(b.status);c(new Y(T,b.message))}else c(new Y(O.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Y(O.UNAVAILABLE,"Connection failed."));break;default:H(9055,{h_:e,streamId:o,P_:u.getLastErrorCode(),T_:u.getLastError()})}}finally{U(ze,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(s);U(ze,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",d,r,15)})}I_(e,t,r){const s=ec(),i=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$y(),l=Yy(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Ho(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const d=i.join("");U(ze,`Creating RPC '${e}' stream ${s}: ${d}`,c);const m=o.createWebChannel(d,c);this.E_(m);let g=!1,y=!1;const b=new oR({Zo:x=>{y?U(ze,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(g||(U(ze,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),U(ze,`RPC '${e}' stream ${s} sending:`,x),m.send(x))},Xo:()=>m.close()}),T=(x,V,k)=>{x.listen(V,R=>{try{k(R)}catch(D){setTimeout(()=>{throw D},0)}})};return T(m,Es.EventType.OPEN,()=>{y||(U(ze,`RPC '${e}' stream ${s} transport opened.`),b.__())}),T(m,Es.EventType.CLOSE,()=>{y||(y=!0,U(ze,`RPC '${e}' stream ${s} transport closed`),b.u_(),this.d_(m))}),T(m,Es.EventType.ERROR,x=>{y||(y=!0,Lr(ze,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),b.u_(new Y(O.UNAVAILABLE,"The operation could not be completed")))}),T(m,Es.EventType.MESSAGE,x=>{var V;if(!y){const k=x.data[0];le(!!k,16349);const R=k,D=(R==null?void 0:R.error)||((V=R[0])===null||V===void 0?void 0:V.error);if(D){U(ze,`RPC '${e}' stream ${s} received error:`,D);const F=D.status;let $=function(_){const C=Ce[_];if(C!==void 0)return Iv(C)}(F),A=D.message;$===void 0&&($=O.INTERNAL,A="Unknown error status: "+F+" with message "+D.message),y=!0,b.u_(new Y($,A)),m.close()}else U(ze,`RPC '${e}' stream ${s} received:`,k),b.c_(k)}}),T(l,By.STAT_EVENT,x=>{x.stat===Yl.PROXY?U(ze,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===Yl.NOPROXY&&U(ze,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.a_()},0),b}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function ol(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(n){return new hS(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fv{constructor(e,t,r=1e3,s=1.5,i=6e4){this.xi=e,this.timerId=t,this.A_=r,this.R_=s,this.V_=i,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),r=Math.max(0,Date.now()-this.g_),s=Math.max(0,t-r);s>0&&U("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.m_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.f_=this.xi.enqueueAfterDelay(this.timerId,s,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){this.f_!==null&&(this.f_.skipDelay(),this.f_=null)}cancel(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const om="PersistentStream";class Uv{constructor(e,t,r,s,i,o,l,c){this.xi=e,this.S_=r,this.D_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.v_=0,this.C_=null,this.F_=null,this.stream=null,this.M_=0,this.x_=new Fv(e,t)}O_(){return this.state===1||this.state===5||this.N_()}N_(){return this.state===2||this.state===3}start(){this.M_=0,this.state!==4?this.auth():this.B_()}async stop(){this.O_()&&await this.close(0)}L_(){this.state=0,this.x_.reset()}k_(){this.N_()&&this.C_===null&&(this.C_=this.xi.enqueueAfterDelay(this.S_,6e4,()=>this.q_()))}Q_(e){this.U_(),this.stream.send(e)}async q_(){if(this.N_())return this.close(0)}U_(){this.C_&&(this.C_.cancel(),this.C_=null)}K_(){this.F_&&(this.F_.cancel(),this.F_=null)}async close(e,t){this.U_(),this.K_(),this.x_.cancel(),this.v_++,e!==4?this.x_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(qt(t.toString()),qt("Using maximum backoff delay to prevent overloading the backend."),this.x_.p_()):t&&t.code===O.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.i_(t)}W_(){}auth(){this.state=1;const e=this.G_(this.v_),t=this.v_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.v_===t&&this.z_(r,s)},r=>{e(()=>{const s=new Y(O.UNKNOWN,"Fetching auth token failed: "+r.message);return this.j_(s)})})}z_(e,t){const r=this.G_(this.v_);this.stream=this.H_(e,t),this.stream.e_(()=>{r(()=>this.listener.e_())}),this.stream.n_(()=>{r(()=>(this.state=2,this.F_=this.xi.enqueueAfterDelay(this.D_,1e4,()=>(this.N_()&&(this.state=3),Promise.resolve())),this.listener.n_()))}),this.stream.i_(s=>{r(()=>this.j_(s))}),this.stream.onMessage(s=>{r(()=>++this.M_==1?this.J_(s):this.onNext(s))})}B_(){this.state=5,this.x_.y_(async()=>{this.state=0,this.start()})}j_(e){return U(om,`close with error: ${e}`),this.stream=null,this.close(4,e)}G_(e){return t=>{this.xi.enqueueAndForget(()=>this.v_===e?t():(U(om,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lR extends Uv{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}H_(e,t){return this.connection.I_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.x_.reset();const t=mS(this.serializer,e),r=function(i){if(!("targetChange"in i))return W.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?W.min():o.readTime?Et(o.readTime):W.min()}(e);return this.listener.Y_(t,r)}Z_(e){const t={};t.database=Jl(this.serializer),t.addTarget=function(i,o){let l;const c=o.target;if(l=Gl(c)?{documents:yS(i,c)}:{query:vS(i,c).gt},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Pv(i,o.resumeToken);const u=Kl(i,o.expectedCount);u!==null&&(l.expectedCount=u)}else if(o.snapshotVersion.compareTo(W.min())>0){l.readTime=Co(i,o.snapshotVersion.toTimestamp());const u=Kl(i,o.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=_S(this.serializer,e);r&&(t.labels=r),this.Q_(t)}X_(e){const t={};t.database=Jl(this.serializer),t.removeTarget=e,this.Q_(t)}}class cR extends Uv{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get ea(){return this.M_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.ea&&this.ta([])}H_(e,t){return this.connection.I_("Write",e,t)}J_(e){return le(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0,55816),this.listener.na()}onNext(e){le(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.x_.reset();const t=gS(e.writeResults,e.commitTime),r=Et(e.commitTime);return this.listener.ra(r,t)}ia(){const e={};e.database=Jl(this.serializer),this.Q_(e)}ta(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>pS(this.serializer,r))};this.Q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{}class hR extends uR{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.sa=!1}oa(){if(this.sa)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,r,s){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.zo(e,Ql(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Y(O.UNKNOWN,i.toString())})}Yo(e,t,r,s,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Yo(e,Ql(t,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Y(O.UNKNOWN,o.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class dR{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){this._a===0&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){this.state==="Online"?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.la("Offline")))}set(e){this.Ta(),this._a=0,e==="Online"&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ua?(qt(t),this.ua=!1):U("OnlineStateTracker",t)}Ta(){this.aa!==null&&(this.aa.cancel(),this.aa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr="RemoteStore";class fR{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=i,this.Ra.No(o=>{r.enqueueAndForget(async()=>{mr(this)&&(U(nr,"Restarting streams for network reachability change."),await async function(c){const u=K(c);u.da.add(4),await hi(u),u.Va.set("Unknown"),u.da.delete(4),await ia(u)}(this))})}),this.Va=new dR(r,s)}}async function ia(n){if(mr(n))for(const e of n.Aa)await e(!0)}async function hi(n){for(const e of n.Aa)await e(!1)}function Bv(n,e){const t=K(n);t.Ea.has(e.targetId)||(t.Ea.set(e.targetId,e),ou(t)?iu(t):ts(t).N_()&&su(t,e))}function ru(n,e){const t=K(n),r=ts(t);t.Ea.delete(e),r.N_()&&Yv(t,e),t.Ea.size===0&&(r.N_()?r.k_():mr(t)&&t.Va.set("Unknown"))}function su(n,e){if(n.ma.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(W.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ts(n).Z_(e)}function Yv(n,e){n.ma.Ke(e),ts(n).X_(e)}function iu(n){n.ma=new aS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n.Ea.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),ts(n).start(),n.Va.ca()}function ou(n){return mr(n)&&!ts(n).O_()&&n.Ea.size>0}function mr(n){return K(n).da.size===0}function $v(n){n.ma=void 0}async function mR(n){n.Va.set("Online")}async function pR(n){n.Ea.forEach((e,t)=>{su(n,e)})}async function gR(n,e){$v(n),ou(n)?(n.Va.Pa(e),iu(n)):n.Va.set("Unknown")}async function yR(n,e,t){if(n.Va.set("Online"),e instanceof Cv&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ea.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ea.delete(l),s.ma.removeTarget(l))}(n,e)}catch(r){U(nr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await So(n,r)}else if(e instanceof eo?n.ma.Xe(e):e instanceof Av?n.ma.ot(e):n.ma.nt(e),!t.isEqual(W.min()))try{const r=await Lv(n.localStore);t.compareTo(r)>=0&&await function(i,o){const l=i.ma.It(o);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=i.Ea.get(u);d&&i.Ea.set(u,d.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,u)=>{const d=i.Ea.get(c);if(!d)return;i.Ea.set(c,d.withResumeToken(Ue.EMPTY_BYTE_STRING,d.snapshotVersion)),Yv(i,c);const m=new hn(d.target,c,u,d.sequenceNumber);su(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){U(nr,"Failed to raise snapshot:",r),await So(n,r)}}async function So(n,e,t){if(!Zr(e))throw e;n.da.add(1),await hi(n),n.Va.set("Offline"),t||(t=()=>Lv(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{U(nr,"Retrying IndexedDB access"),await t(),n.da.delete(1),await ia(n)})}function zv(n,e){return e().catch(t=>So(n,t,e))}async function oa(n){const e=K(n),t=Rn(e);let r=e.Ia.length>0?e.Ia[e.Ia.length-1].batchId:$c;for(;vR(e);)try{const s=await ZS(e.localStore,r);if(s===null){e.Ia.length===0&&t.k_();break}r=s.batchId,wR(e,s)}catch(s){await So(e,s)}qv(e)&&Hv(e)}function vR(n){return mr(n)&&n.Ia.length<10}function wR(n,e){n.Ia.push(e);const t=Rn(n);t.N_()&&t.ea&&t.ta(e.mutations)}function qv(n){return mr(n)&&!Rn(n).O_()&&n.Ia.length>0}function Hv(n){Rn(n).start()}async function _R(n){Rn(n).ia()}async function xR(n){const e=Rn(n);for(const t of n.Ia)e.ta(t.mutations)}async function bR(n,e,t){const r=n.Ia.shift(),s=Qc.from(r,e,t);await zv(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await oa(n)}async function TR(n,e){e&&Rn(n).ea&&await async function(r,s){if(function(o){return iS(o)&&o!==O.ABORTED}(s.code)){const i=r.Ia.shift();Rn(r).L_(),await zv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await oa(r)}}(n,e),qv(n)&&Hv(n)}async function am(n,e){const t=K(n);t.asyncQueue.verifyOperationInProgress(),U(nr,"RemoteStore received new credentials");const r=mr(t);t.da.add(3),await hi(t),r&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.da.delete(3),await ia(t)}async function ER(n,e){const t=K(n);e?(t.da.delete(2),await ia(t)):e||(t.da.add(2),await hi(t),t.Va.set("Unknown"))}function ts(n){return n.fa||(n.fa=function(t,r,s){const i=K(t);return i.oa(),new lR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:mR.bind(null,n),n_:pR.bind(null,n),i_:gR.bind(null,n),Y_:yR.bind(null,n)}),n.Aa.push(async e=>{e?(n.fa.L_(),ou(n)?iu(n):n.Va.set("Unknown")):(await n.fa.stop(),$v(n))})),n.fa}function Rn(n){return n.ga||(n.ga=function(t,r,s){const i=K(t);return i.oa(),new cR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{e_:()=>Promise.resolve(),n_:_R.bind(null,n),i_:TR.bind(null,n),na:xR.bind(null,n),ra:bR.bind(null,n)}),n.Aa.push(async e=>{e?(n.ga.L_(),await oa(n)):(await n.ga.stop(),n.Ia.length>0&&(U(nr,`Stopping write stream with ${n.Ia.length} pending writes`),n.Ia=[]))})),n.ga}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new xn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,l=new au(e,t,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Y(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lu(n,e){if(qt("AsyncQueue",`${e}: ${n}`),Zr(n))return new Y(O.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{static emptySet(e){return new Nr(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=Is(),this.sortedSet=new _e(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Nr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Nr;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.pa=new _e(z.comparator)}track(e){const t=e.doc.key,r=this.pa.get(t);r?e.type!==0&&r.type===3?this.pa=this.pa.insert(t,e):e.type===3&&r.type!==1?this.pa=this.pa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.pa=this.pa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.pa=this.pa.remove(t):e.type===1&&r.type===2?this.pa=this.pa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.pa=this.pa.insert(t,{type:2,doc:e.doc}):H(63341,{Vt:e,ya:r}):this.pa=this.pa.insert(t,e)}wa(){const e=[];return this.pa.inorderTraversal((t,r)=>{e.push(r)}),e}}class $r{constructor(e,t,r,s,i,o,l,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(l=>{o.push({type:0,doc:l})}),new $r(e,t,Nr.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Zo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.ba=void 0,this.Sa=[]}Da(){return this.Sa.some(e=>e.va())}}class AR{constructor(){this.queries=cm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const s=K(t),i=s.queries;s.queries=cm(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Y(O.ABORTED,"Firestore shutting down"))}}function cm(){return new dr(n=>fv(n),Zo)}async function CR(n,e){const t=K(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Da()&&e.va()&&(r=2):(i=new IR,r=e.va()?0:1);try{switch(r){case 0:i.ba=await t.onListen(s,!0);break;case 1:i.ba=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const l=lu(o,`Initialization of query '${br(e.query)}' failed`);return void e.onError(l)}t.queries.set(s,i),i.Sa.push(e),e.Fa(t.onlineState),i.ba&&e.Ma(i.ba)&&cu(t)}async function PR(n,e){const t=K(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.va()?0:1:!i.Da()&&e.va()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function SR(n,e){const t=K(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const l of o.Sa)l.Ma(s)&&(r=!0);o.ba=s}}r&&cu(t)}function RR(n,e,t){const r=K(n),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(t);r.queries.delete(e)}function cu(n){n.Ca.forEach(e=>{e.next()})}var tc,um;(um=tc||(tc={})).xa="default",um.Cache="cache";class NR{constructor(e,t,r){this.query=e,this.Oa=t,this.Na=!1,this.Ba=null,this.onlineState="Unknown",this.options=r||{}}Ma(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new $r(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Na?this.La(e)&&(this.Oa.next(e),t=!0):this.ka(e,this.onlineState)&&(this.qa(e),t=!0),this.Ba=e,t}onError(e){this.Oa.error(e)}Fa(e){this.onlineState=e;let t=!1;return this.Ba&&!this.Na&&this.ka(this.Ba,e)&&(this.qa(this.Ba),t=!0),t}ka(e,t){if(!e.fromCache||!this.va())return!0;const r=t!=="Offline";return(!this.options.Qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}La(e){if(e.docChanges.length>0)return!0;const t=this.Ba&&this.Ba.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}qa(e){e=$r.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Na=!0,this.Oa.next(e)}va(){return this.options.source!==tc.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.key=e}}class Wv{constructor(e){this.key=e}}class kR{constructor(e,t){this.query=e,this.Ha=t,this.Ja=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ne(),this.mutatedKeys=ne(),this.Za=mv(e),this.Xa=new Nr(this.Za)}get eu(){return this.Ha}tu(e,t){const r=t?t.nu:new lm,s=t?t.Xa:this.Xa;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,m)=>{const g=s.get(d),y=ea(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let x=!1;g&&y?g.data.isEqual(y.data)?b!==T&&(r.track({type:3,doc:y}),x=!0):this.ru(g,y)||(r.track({type:2,doc:y}),x=!0,(c&&this.Za(y,c)>0||u&&this.Za(y,u)<0)&&(l=!0)):!g&&y?(r.track({type:0,doc:y}),x=!0):g&&!y&&(r.track({type:1,doc:g}),x=!0,(c||u)&&(l=!0)),x&&(y?(o=o.add(y),i=T?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Xa:o,nu:r,Cs:l,mutatedKeys:i}}ru(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.Xa;this.Xa=e.Xa,this.mutatedKeys=e.mutatedKeys;const o=e.nu.wa();o.sort((d,m)=>function(y,b){const T=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H(20277,{Vt:x})}};return T(y)-T(b)}(d.type,m.type)||this.Za(d.doc,m.doc)),this.iu(r),s=s!=null&&s;const l=t&&!s?this.su():[],c=this.Ya.size===0&&this.current&&!s?1:0,u=c!==this.Ja;return this.Ja=c,o.length!==0||u?{snapshot:new $r(this.query,e.Xa,i,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),ou:l}:{ou:l}}Fa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Xa:this.Xa,nu:new lm,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{ou:[]}}_u(e){return!this.Ha.has(e)&&!!this.Xa.has(e)&&!this.Xa.get(e).hasLocalMutations}iu(e){e&&(e.addedDocuments.forEach(t=>this.Ha=this.Ha.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ha=this.Ha.delete(t)),this.current=e.current)}su(){if(!this.current)return[];const e=this.Ya;this.Ya=ne(),this.Xa.forEach(r=>{this._u(r.key)&&(this.Ya=this.Ya.add(r.key))});const t=[];return e.forEach(r=>{this.Ya.has(r)||t.push(new Wv(r))}),this.Ya.forEach(r=>{e.has(r)||t.push(new Gv(r))}),t}au(e){this.Ha=e.$s,this.Ya=ne();const t=this.tu(e.documents);return this.applyChanges(t,!0)}uu(){return $r.fromInitialDocuments(this.query,this.Xa,this.mutatedKeys,this.Ja===0,this.hasCachedResults)}}const uu="SyncEngine";class VR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class jR{constructor(e){this.key=e,this.cu=!1}}class DR{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.lu={},this.hu=new dr(l=>fv(l),Zo),this.Pu=new Map,this.Tu=new Set,this.Iu=new _e(z.comparator),this.Eu=new Map,this.du=new Zc,this.Au={},this.Ru=new Map,this.Vu=Yr.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return this.mu===!0}}async function MR(n,e,t=!0){const r=e0(n);let s;const i=r.hu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.uu()):s=await Kv(r,e,t,!0),s}async function OR(n,e){const t=e0(n);await Kv(t,e,!0,!1)}async function Kv(n,e,t,r){const s=await eR(n.localStore,bt(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let l;return r&&(l=await LR(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&Bv(n.remoteStore,s),l}async function LR(n,e,t,r,s){n.fu=(m,g,y)=>async function(T,x,V,k){let R=x.view.tu(V);R.Cs&&(R=await nm(T.localStore,x.query,!1).then(({documents:A})=>x.view.tu(A,R)));const D=k&&k.targetChanges.get(x.targetId),F=k&&k.targetMismatches.get(x.targetId)!=null,$=x.view.applyChanges(R,T.isPrimaryClient,D,F);return dm(T,x.targetId,$.ou),$.snapshot}(n,m,g,y);const i=await nm(n.localStore,e,!0),o=new kR(e,i.$s),l=o.tu(i.documents),c=ui.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),u=o.applyChanges(l,n.isPrimaryClient,c);dm(n,t,u.ou);const d=new VR(e,t,o);return n.hu.set(e,d),n.Pu.has(t)?n.Pu.get(t).push(e):n.Pu.set(t,[e]),u.snapshot}async function FR(n,e,t){const r=K(n),s=r.hu.get(e),i=r.Pu.get(s.targetId);if(i.length>1)return r.Pu.set(s.targetId,i.filter(o=>!Zo(o,e))),void r.hu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Zl(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&ru(r.remoteStore,s.targetId),nc(r,s.targetId)}).catch(Jr)):(nc(r,s.targetId),await Zl(r.localStore,s.targetId,!0))}async function UR(n,e){const t=K(n),r=t.hu.get(e),s=t.Pu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ru(t.remoteStore,r.targetId))}async function BR(n,e,t){const r=WR(n);try{const s=await function(o,l){const c=K(o),u=ke.now(),d=l.reduce((y,b)=>y.add(b.key),ne());let m,g;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=Ht(),T=ne();return c.Bs.getEntries(y,d).next(x=>{b=x,b.forEach((V,k)=>{k.isValidDocument()||(T=T.add(V))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(x=>{m=x;const V=[];for(const k of l){const R=eS(k,m.get(k.key).overlayedDocument);R!=null&&V.push(new fr(k.key,R,sv(R.value.mapValue),Tt.exists(!0)))}return c.mutationQueue.addMutationBatch(y,u,V,l)}).next(x=>{g=x;const V=x.applyToLocalDocumentSet(m,T);return c.documentOverlayCache.saveOverlays(y,x.batchId,V)})}).then(()=>({batchId:g.batchId,changes:gv(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let u=o.Au[o.currentUser.toKey()];u||(u=new _e(J)),u=u.insert(l,c),o.Au[o.currentUser.toKey()]=u}(r,s.batchId,t),await di(r,s.changes),await oa(r.remoteStore)}catch(s){const i=lu(s,"Failed to persist write");t.reject(i)}}async function Qv(n,e){const t=K(n);try{const r=await XS(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t.Eu.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.cu=!0:s.modifiedDocuments.size>0?le(o.cu,14607):s.removedDocuments.size>0&&(le(o.cu,42227),o.cu=!1))}),await di(t,r,e)}catch(r){await Jr(r)}}function hm(n,e,t){const r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.hu.forEach((i,o)=>{const l=o.view.Fa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=K(o);c.onlineState=l;let u=!1;c.queries.forEach((d,m)=>{for(const g of m.Sa)g.Fa(l)&&(u=!0)}),u&&cu(c)}(r.eventManager,e),s.length&&r.lu.Y_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YR(n,e,t){const r=K(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Eu.get(e),i=s&&s.key;if(i){let o=new _e(z.comparator);o=o.insert(i,Ge.newNoDocument(i,W.min()));const l=ne().add(i),c=new ra(W.min(),new Map,new _e(J),o,l);await Qv(r,c),r.Iu=r.Iu.remove(i),r.Eu.delete(e),hu(r)}else await Zl(r.localStore,e,!1).then(()=>nc(r,e,t)).catch(Jr)}async function $R(n,e){const t=K(n),r=e.batch.batchId;try{const s=await QS(t.localStore,e);Jv(t,r,null),Xv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await di(t,s)}catch(s){await Jr(s)}}async function zR(n,e,t){const r=K(n);try{const s=await function(o,l){const c=K(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(m=>(le(m!==null,37113),d=m.keys(),c.mutationQueue.removeMutationBatch(u,m))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);Jv(r,e,t),Xv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await di(r,s)}catch(s){await Jr(s)}}function Xv(n,e){(n.Ru.get(e)||[]).forEach(t=>{t.resolve()}),n.Ru.delete(e)}function Jv(n,e,t){const r=K(n);let s=r.Au[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.Au[r.currentUser.toKey()]=s}}function nc(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Pu.get(e))n.hu.delete(r),t&&n.lu.gu(r,t);n.Pu.delete(e),n.isPrimaryClient&&n.du.Hr(e).forEach(r=>{n.du.containsKey(r)||Zv(n,r)})}function Zv(n,e){n.Tu.delete(e.path.canonicalString());const t=n.Iu.get(e);t!==null&&(ru(n.remoteStore,t),n.Iu=n.Iu.remove(e),n.Eu.delete(t),hu(n))}function dm(n,e,t){for(const r of t)r instanceof Gv?(n.du.addReference(r.key,e),qR(n,r)):r instanceof Wv?(U(uu,"Document no longer in limbo: "+r.key),n.du.removeReference(r.key,e),n.du.containsKey(r.key)||Zv(n,r.key)):H(19791,{pu:r})}function qR(n,e){const t=e.key,r=t.path.canonicalString();n.Iu.get(t)||n.Tu.has(r)||(U(uu,"New document in limbo: "+t),n.Tu.add(r),hu(n))}function hu(n){for(;n.Tu.size>0&&n.Iu.size<n.maxConcurrentLimboResolutions;){const e=n.Tu.values().next().value;n.Tu.delete(e);const t=new z(me.fromString(e)),r=n.Vu.next();n.Eu.set(r,new jR(t)),n.Iu=n.Iu.insert(t,r),Bv(n.remoteStore,new hn(bt(hv(t.path)),r,"TargetPurposeLimboResolution",Qo.le))}}async function di(n,e,t){const r=K(n),s=[],i=[],o=[];r.hu.isEmpty()||(r.hu.forEach((l,c)=>{o.push(r.fu(c,e,t).then(u=>{var d;if((u||t)&&r.isPrimaryClient){const m=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,m?"current":"not-current")}if(u){s.push(u);const m=tu.Rs(c.targetId,u);i.push(m)}}))}),await Promise.all(o),r.lu.Y_(s),await async function(c,u){const d=K(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>M.forEach(u,g=>M.forEach(g.ds,y=>d.persistence.referenceDelegate.addReference(m,g.targetId,y)).next(()=>M.forEach(g.As,y=>d.persistence.referenceDelegate.removeReference(m,g.targetId,y)))))}catch(m){if(!Zr(m))throw m;U(nu,"Failed to update sequence numbers: "+m)}for(const m of u){const g=m.targetId;if(!m.fromCache){const y=d.xs.get(g),b=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(b);d.xs=d.xs.insert(g,T)}}}(r.localStore,i))}async function HR(n,e){const t=K(n);if(!t.currentUser.isEqual(e)){U(uu,"User change. New user:",e.toKey());const r=await Ov(t.localStore,e);t.currentUser=e,function(i,o){i.Ru.forEach(l=>{l.forEach(c=>{c.reject(new Y(O.CANCELLED,o))})}),i.Ru.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await di(t,r.ks)}}function GR(n,e){const t=K(n),r=t.Eu.get(e);if(r&&r.cu)return ne().add(r.key);{let s=ne();const i=t.Pu.get(e);if(!i)return s;for(const o of i){const l=t.hu.get(o);s=s.unionWith(l.view.eu)}return s}}function e0(n){const e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qv.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=GR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.lu.Y_=SR.bind(null,e.eventManager),e.lu.gu=RR.bind(null,e.eventManager),e}function WR(n){const e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$R.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zR.bind(null,e),e}class Ro{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=sa(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return KS(this.persistence,new HS,e.initialUser,this.serializer)}Su(e){return new Mv(eu.fi,this.serializer)}bu(e){return new nR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ro.provider={build:()=>new Ro};class KR extends Ro{constructor(e){super(),this.cacheSizeBytes=e}vu(e,t){le(this.persistence.referenceDelegate instanceof Po,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new NS(r,e.asyncQueue,t)}Su(e){const t=this.cacheSizeBytes!==void 0?tt.withCacheSize(this.cacheSizeBytes):tt.DEFAULT;return new Mv(r=>Po.fi(r,t),this.serializer)}}class rc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hm(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HR.bind(null,this.syncEngine),await ER(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new AR}()}createDatastore(e){const t=sa(e.databaseInfo.databaseId),r=function(i){return new aR(i)}(e.databaseInfo);return function(i,o,l,c){return new hR(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,l){return new fR(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,t=>hm(this.syncEngine,t,0),function(){return im.C()?new im:new rR}())}createSyncEngine(e,t){return function(s,i,o,l,c,u,d){const m=new DR(s,i,o,l,c,u);return d&&(m.mu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=K(s);U(nr,"RemoteStore shutting down."),i.da.add(5),await hi(i),i.Ra.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}rc.provider={build:()=>new rc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Mu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Mu(this.observer.error,e):qt("Uncaught Error in snapshot listener:",e.toString()))}xu(){this.muted=!0}Mu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nn="FirestoreClient";class XR{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=He.UNAUTHENTICATED,this.clientId=Gy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{U(Nn,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(U(Nn,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=lu(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function al(n,e){n.asyncQueue.verifyOperationInProgress(),U(Nn,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ov(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function fm(n,e){n.asyncQueue.verifyOperationInProgress();const t=await JR(n);U(Nn,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>am(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>am(e.remoteStore,s)),n._onlineComponents=e}async function JR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){U(Nn,"Using user provided OfflineComponentProvider");try{await al(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===O.FAILED_PRECONDITION||s.code===O.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Lr("Error using user provided cache. Falling back to memory cache: "+t),await al(n,new Ro)}}else U(Nn,"Using default OfflineComponentProvider"),await al(n,new KR(void 0));return n._offlineComponents}async function t0(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(U(Nn,"Using user provided OnlineComponentProvider"),await fm(n,n._uninitializedComponentsProvider._online)):(U(Nn,"Using default OnlineComponentProvider"),await fm(n,new rc))),n._onlineComponents}function ZR(n){return t0(n).then(e=>e.syncEngine)}async function eN(n){const e=await t0(n),t=e.eventManager;return t.onListen=MR.bind(null,e.syncEngine),t.onUnlisten=FR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=OR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=UR.bind(null,e.syncEngine),t}function tN(n,e,t={}){const r=new xn;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,u){const d=new QR({next:g=>{d.xu(),o.enqueueAndForget(()=>PR(i,m)),g.fromCache&&c.source==="server"?u.reject(new Y(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),m=new NR(l,d,{includeMetadataChanges:!0,Qa:!0});return CR(i,m)}(await eN(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n0(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r0(n,e,t){if(!t)throw new Y(O.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function nN(n,e,t,r){if(e===!0&&r===!0)throw new Y(O.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function pm(n){if(!z.isDocumentKey(n))throw new Y(O.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gm(n){if(z.isDocumentKey(n))throw new Y(O.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function aa(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H(12329,{type:typeof n})}function Zs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Y(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=aa(n);throw new Y(O.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function rN(n,e){if(e<=0)throw new Y(O.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="firestore.googleapis.com",ym=!0;class vm{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Y(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=s0,this.ssl=ym}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:ym;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Dv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<SS)throw new Y(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}nN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n0((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Y(O.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class la{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vm({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Y(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Y(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vm(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new oP;switch(r.type){case"firstParty":return new uP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Y(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=mm.get(t);r&&(U("ComponentProvider","Removing Datastore"),mm.delete(t),r.terminate())}(this),Promise.resolve()}}function sN(n,e,t,r={}){var s;n=Zs(n,la);const i=Kr(e),o=n._getSettings(),l=Object.assign(Object.assign({},o),{emulatorOptions:n._getEmulatorOptions()}),c=`${e}:${t}`;i&&(Ry(`https://${c}`),Ny("Firestore",!0)),o.host!==s0&&o.host!==c&&Lr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=Object.assign(Object.assign({},o),{host:c,ssl:i,emulatorOptions:r});if(!Zn(u,l)&&(n._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=He.MOCK_USER;else{d=VA(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Y(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new He(g)}n._authCredentials=new aP(new qy(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new jn(this.firestore,e,this._query)}}class ct{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ct(this.firestore,e,this._key)}}class bn extends jn{constructor(e,t,r){super(e,t,hv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ct(this.firestore,null,new z(e))}withConverter(e){return new bn(this.firestore,e,this._path)}}function wm(n,e,...t){if(n=ut(n),r0("collection","path",e),n instanceof la){const r=me.fromString(e,...t);return gm(r),new bn(n,null,r)}{if(!(n instanceof ct||n instanceof bn))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(me.fromString(e,...t));return gm(r),new bn(n.firestore,null,r)}}function i0(n,e,...t){if(n=ut(n),arguments.length===1&&(e=Gy.newId()),r0("doc","path",e),n instanceof la){const r=me.fromString(e,...t);return pm(r),new ct(n,null,new z(r))}{if(!(n instanceof ct||n instanceof bn))throw new Y(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(me.fromString(e,...t));return pm(r),new ct(n.firestore,n instanceof bn?n.converter:null,new z(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _m="AsyncQueue";class xm{constructor(e=Promise.resolve()){this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new Fv(this,"async_queue_retry"),this.rc=()=>{const r=ol();r&&U(_m,"Visibility state changed to "+r.visibilityState),this.x_.b_()},this.sc=e;const t=ol();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=ol();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new xn;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(this.Ju.length!==0){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!Zr(e))throw e;U(_m,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(r=>{throw this.Xu=r,this.ec=!1,qt("INTERNAL UNHANDLED ERROR: ",bm(r)),r}).then(r=>(this.ec=!1,r))));return this.sc=t,t}enqueueAfterDelay(e,t,r){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const s=au.createAndSchedule(this,e,t,r,i=>this.uc(i));return this.Zu.push(s),s}oc(){this.Xu&&H(47125,{cc:bm(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do e=this.sc,await e;while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function bm(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class ca extends la{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new xm,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new xm(e),this._firestoreClient=void 0,await e}}}function iN(n,e){const t=typeof n=="object"?n:Dy(),r=typeof n=="string"?n:e||bo,s=Bc(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=NA("firestore");i&&sN(s,...i)}return s}function o0(n){if(n._terminated)throw new Y(O.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||oN(n),n._firestoreClient}function oN(n){var e,t,r;const s=n._freezeSettings(),i=function(l,c,u,d){return new IP(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,n0(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new XR(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zr(Ue.fromBase64String(e))}catch(t){throw new Y(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new zr(Ue.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Y(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Le(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Y(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Y(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=/^__.*__$/;class lN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new fr(e,this.data,this.fieldMask,t,this.fieldTransforms):new ci(e,this.data,t,this.fieldTransforms)}}function a0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H(40011,{Ic:n})}}class gu{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Ec(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ic(){return this.settings.Ic}dc(e){return new gu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ac(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.dc({path:r,Rc:!1});return s.Vc(e),s}mc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.dc({path:r,Rc:!1});return s.Ec(),s}fc(e){return this.dc({path:void 0,Rc:!0})}gc(e){return No(e,this.settings.methodName,this.settings.yc||!1,this.path,this.settings.wc)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Ec(){if(this.path)for(let e=0;e<this.path.length;e++)this.Vc(this.path.get(e))}Vc(e){if(e.length===0)throw this.gc("Document fields must not be empty");if(a0(this.Ic)&&aN.test(e))throw this.gc('Document fields cannot begin and end with "__"')}}class cN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||sa(e)}bc(e,t,r,s=!1){return new gu({Ic:e,methodName:t,wc:r,path:Le.emptyPath(),Rc:!1,yc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function l0(n){const e=n._freezeSettings(),t=sa(n._databaseId);return new cN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function uN(n,e,t,r,s,i={}){const o=n.bc(i.merge||i.mergeFields?2:0,e,t,s);h0("Data must be an object, but it was:",o,r);const l=c0(r,o);let c,u;if(i.merge)c=new mt(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const g=dN(e,m,t);if(!o.contains(g))throw new Y(O.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mN(d,g)||d.push(g)}c=new mt(d),u=o.fieldTransforms.filter(m=>c.covers(m.field))}else c=null,u=o.fieldTransforms;return new lN(new lt(l),c,u)}class yu extends fu{_toFieldTransform(e){return new QP(e.path,new Qs)}isEqual(e){return e instanceof yu}}function hN(n,e,t,r=!1){return vu(t,n.bc(r?4:3,e))}function vu(n,e){if(u0(n=ut(n)))return h0("Unsupported field value:",e,n),c0(n,e);if(n instanceof fu)return function(r,s){if(!a0(s.Ic))throw s.gc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.gc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Rc&&e.Ic!==4)throw e.gc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=vu(l,s.fc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=ut(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:Co(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Co(s.serializer,i)}}if(r instanceof mu)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zr)return{bytesValue:Pv(s.serializer,r._byteString)};if(r instanceof ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.gc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Jc(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pu)return function(o,l){return{mapValue:{fields:{[tv]:{stringValue:rv},[To]:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.gc("VectorValues must only contain numeric values.");return Wc(l.serializer,u)})}}}}}}(r,s);throw s.gc(`Unsupported field value: ${aa(r)}`)}(n,e)}function c0(n,e){const t={};return Ky(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hr(n,(r,s)=>{const i=vu(s,e.Ac(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function u0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ke||n instanceof mu||n instanceof zr||n instanceof ct||n instanceof fu||n instanceof pu)}function h0(n,e,t){if(!u0(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=aa(t);throw r==="an object"?e.gc(n+" a custom object"):e.gc(n+" "+r)}}function dN(n,e,t){if((e=ut(e))instanceof du)return e._internalPath;if(typeof e=="string")return d0(n,e);throw No("Field path arguments must be of type string or ",n,!1,void 0,t)}const fN=new RegExp("[~\\*/\\[\\]]");function d0(n,e,t){if(e.search(fN)>=0)throw No(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new du(...e.split("."))._internalPath}catch{throw No(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function No(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new Y(O.INVALID_ARGUMENT,l+n+c)}function mN(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new pN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wu("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class pN extends f0{data(){return super.data()}}function wu(n,e){return typeof e=="string"?d0(n,e):e instanceof du?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Y(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _u{}class xu extends _u{}function yN(n,e,...t){let r=[];e instanceof _u&&r.push(e),r=r.concat(t),function(i){const o=i.filter(c=>c instanceof Tu).length,l=i.filter(c=>c instanceof bu).length;if(o>1||o>0&&l>0)throw new Y(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class bu extends xu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bu(e,t,r)}_apply(e){const t=this._parse(e);return m0(e._query,t),new jn(e.firestore,e.converter,Wl(e._query,t))}_parse(e){const t=l0(e.firestore);return function(i,o,l,c,u,d,m){let g;if(u.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Y(O.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Em(m,d);const b=[];for(const T of m)b.push(Tm(c,i,T));g={arrayValue:{values:b}}}else g=Tm(c,i,m)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Em(m,d),g=hN(l,o,m,d==="in"||d==="not-in");return Re.create(u,d,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Tu extends _u{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Tu(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:gt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)m0(o,c),o=Wl(o,c)}(e._query,t),new jn(e.firestore,e.converter,Wl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Eu extends xu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Eu(e,t)}_apply(e){const t=function(s,i,o){if(s.startAt!==null)throw new Y(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Y(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ks(i,o)}(e._query,this._field,this._direction);return new jn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new es(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function vN(n,e="asc"){const t=e,r=wu("orderBy",n);return Eu._create(r,t)}class Iu extends xu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Iu(e,t,r)}_apply(e){return new jn(e.firestore,e.converter,Io(e._query,this._limit,this._limitType))}}function wN(n){return rN("limit",n),Iu._create("limit",n,"F")}function Tm(n,e,t){if(typeof(t=ut(t))=="string"){if(t==="")throw new Y(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dv(e)&&t.indexOf("/")!==-1)throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(me.fromString(t));if(!z.isDocumentKey(r))throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Of(n,new z(r))}if(t instanceof ct)return Of(n,t._key);throw new Y(O.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${aa(t)}.`)}function Em(n,e){if(!Array.isArray(n)||n.length===0)throw new Y(O.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function m0(n,e){const t=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Y(O.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class _N{convertValue(e,t="none"){switch(Sn(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ae(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hr(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[To].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ae(o.doubleValue));return new pu(i)}convertGeoPoint(e){return new mu(Ae(e.latitude),Ae(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Jo(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Hs(e));default:return null}}convertTimestamp(e){const t=Cn(e);return new ke(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=me.fromString(e);le(jv(r),9688,{name:e});const s=new Gs(r.get(1),r.get(3)),i=new z(r.popFirst(5));return s.isEqual(t)||qt(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class bN extends f0{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new to(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class to extends bN{data(e={}){return super.data(e)}}class TN{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new zi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new to(this._firestore,this._userDataWriter,r.key,r,new zi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Y(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new to(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new to(s._firestore,s._userDataWriter,l.doc.key,l.doc,new zi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:EN(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H(61501,{type:n})}}class IN extends _N{constructor(e){super(),this.firestore=e}convertBytes(e){return new zr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ct(this.firestore,null,t)}}function AN(n){n=Zs(n,jn);const e=Zs(n.firestore,ca),t=o0(e),r=new IN(e);return gN(n._query),tN(t,n._query).then(s=>new TN(e,r,n,s))}function CN(n){return p0(Zs(n.firestore,ca),[new Kc(n._key,Tt.none())])}function PN(n,e){const t=Zs(n.firestore,ca),r=i0(n),s=xN(n.converter,e);return p0(t,[uN(l0(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,Tt.exists(!1))]).then(()=>r)}function p0(n,e){return function(r,s){const i=new xn;return r.asyncQueue.enqueueAndForget(async()=>BR(await ZR(r),s,i)),i.promise}(o0(n),e)}function Im(){return new yu("serverTimestamp")}(function(e,t=!0){(function(s){Xr=s})(Qr),Or(new er("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new ca(new lP(r.getProvider("auth-internal")),new hP(o,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Y(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Gs(u.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),wn(If,Af,e),wn(If,Af,"esm2017")})();var SN="firebase",RN="11.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wn(SN,RN,"app");function g0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NN=g0,y0=new ai("auth","Firebase",g0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=new Fc("@firebase/auth");function kN(n,...e){ko.logLevel<=te.WARN&&ko.warn(`Auth (${Qr}): ${n}`,...e)}function no(n,...e){ko.logLevel<=te.ERROR&&ko.error(`Auth (${Qr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(n,...e){throw Au(n,...e)}function It(n,...e){return Au(n,...e)}function v0(n,e,t){const r=Object.assign(Object.assign({},NN()),{[e]:t});return new ai("auth","Firebase",r).create(e,{appName:n.name})}function Qn(n){return v0(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Au(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return y0.create(n,...e)}function G(n,e,...t){if(!n)throw Au(e,...t)}function Ot(n){const e="INTERNAL ASSERTION FAILED: "+n;throw no(e),new Error(e)}function Wt(n,e){n||Ot(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function VN(){return Am()==="http:"||Am()==="https:"}function Am(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(VN()||FA()||"connection"in navigator)?navigator.onLine:!0}function DN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){this.shortDelay=e,this.longDelay=t,Wt(t>e,"Short delay should be less than long delay!"),this.isMobile=MA()||UA()}get(){return jN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(n,e){Wt(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LN=new fi(3e4,6e4);function Pu(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ns(n,e,t,r,s={}){return _0(n,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=li(Object.assign({key:n.config.apiKey},o)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},i);return LA()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&Kr(n.emulatorConfig.host)&&(u.credentials="include"),w0.fetch()(await x0(n,n.config.apiHost,t,l),u)})}async function _0(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},MN),e);try{const s=new UN(n),i=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw qi(n,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw qi(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw qi(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw qi(n,"user-disabled",o);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw v0(n,d,u);Gt(n,d)}}catch(s){if(s instanceof Kt)throw s;Gt(n,"network-request-failed",{message:String(s)})}}async function FN(n,e,t,r,s={}){const i=await ns(n,e,t,r,s);return"mfaPendingCredential"in i&&Gt(n,"multi-factor-auth-required",{_serverResponse:i}),i}async function x0(n,e,t,r){const s=`${e}${t}?${r}`,i=n,o=i.config.emulator?Cu(n.config,s):`${n.config.apiScheme}://${s}`;return ON.includes(t)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class UN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(It(this.auth,"network-request-failed")),LN.get())})}}function qi(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=It(n,e,r);return s.customData._tokenResponse=t,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BN(n,e){return ns(n,"POST","/v1/accounts:delete",e)}async function Vo(n,e){return ns(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YN(n,e=!1){const t=ut(n),r=await t.getIdToken(e),s=Su(r);G(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ms(ll(s.auth_time)),issuedAtTime:Ms(ll(s.iat)),expirationTime:Ms(ll(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ll(n){return Number(n)*1e3}function Su(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return no("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ay(t);return s?JSON.parse(s):(no("Failed to decode base64 JWT payload"),null)}catch(s){return no("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cm(n){const e=Su(n);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ei(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Kt&&$N(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function $N({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ms(this.lastLoginAt),this.creationTime=Ms(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(n){var e;const t=n.auth,r=await n.getIdToken(),s=await ei(n,Vo(t,{idToken:r}));G(s==null?void 0:s.users.length,t,"internal-error");const i=s.users[0];n._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?b0(i.providerUserInfo):[],l=HN(n.providerData,o),c=n.isAnonymous,u=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),d=c?u:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new ic(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(n,m)}async function qN(n){const e=ut(n);await jo(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HN(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function b0(n){return n.map(e=>{var{providerId:t}=e,r=lc(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(n,e){const t=await _0(n,{},async()=>{const r=li({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=n.config,o=await x0(n,s,"/v1/token",`key=${i}`),l=await n._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return n.emulatorConfig&&Kr(n.emulatorConfig.host)&&(c.credentials="include"),w0.fetch()(o,c)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function WN(n,e){return ns(n,"POST","/v2/accounts:revokeToken",Pu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cm(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){G(e.length!==0,"internal-error");const t=Cm(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:i}=await GN(e,t);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:i}=t,o=new kr;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kr,this.toJSON())}_performRefresh(){return Ot("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n,e){G(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class pt{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,i=lc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ic(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await ei(this,this.stsTokenManager.getToken(this.auth,e));return G(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return YN(this,e)}reload(){return qN(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await jo(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_t(this.auth.app))return Promise.reject(Qn(this.auth));const e=await this.getIdToken();return await ei(this,BN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,i,o,l,c,u,d;const m=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(s=t.email)!==null&&s!==void 0?s:void 0,y=(i=t.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,T=(l=t.tenantId)!==null&&l!==void 0?l:void 0,x=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,V=(u=t.createdAt)!==null&&u!==void 0?u:void 0,k=(d=t.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:R,emailVerified:D,isAnonymous:F,providerData:$,stsTokenManager:A}=t;G(R&&A,e,"internal-error");const w=kr.fromJSON(this.name,A);G(typeof R=="string",e,"internal-error"),nn(m,e.name),nn(g,e.name),G(typeof D=="boolean",e,"internal-error"),G(typeof F=="boolean",e,"internal-error"),nn(y,e.name),nn(b,e.name),nn(T,e.name),nn(x,e.name),nn(V,e.name),nn(k,e.name);const _=new pt({uid:R,auth:e,email:g,emailVerified:D,displayName:m,isAnonymous:F,photoURL:b,phoneNumber:y,tenantId:T,stsTokenManager:w,createdAt:V,lastLoginAt:k});return $&&Array.isArray($)&&(_.providerData=$.map(C=>Object.assign({},C))),x&&(_._redirectEventId=x),_}static async _fromIdTokenResponse(e,t,r=!1){const s=new kr;s.updateFromServerResponse(t);const i=new pt({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await jo(i),i}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?b0(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new kr;l.updateFromIdToken(r);const c=new pt({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ic(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=new Map;function Lt(n){Wt(n instanceof Function,"Expected a class definition");let e=Pm.get(n);return e?(Wt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Pm.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}T0.type="NONE";const Sm=T0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(n,e,t){return`firebase:${n}:${e}:${t}`}class Vr{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ro(this.userKey,s.apiKey,i),this.fullPersistenceKey=ro("persistence",s.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Vo(this.auth,{idToken:e}).catch(()=>{});return t?pt._fromGetAccountInfoResponse(this.auth,t,e):null}return pt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Vr(Lt(Sm),e,r);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||Lt(Sm);const o=ro(r,e.config.apiKey,e.name);let l=null;for(const u of t)try{const d=await u._get(o);if(d){let m;if(typeof d=="string"){const g=await Vo(e,{idToken:d}).catch(()=>{});if(!g)break;m=await pt._fromGetAccountInfoResponse(e,g,d)}else m=pt._fromJSON(e,d);u!==i&&(l=m),i=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Vr(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(t.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Vr(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(C0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(E0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S0(e))return"Blackberry";if(R0(e))return"Webos";if(I0(e))return"Safari";if((e.includes("chrome/")||A0(e))&&!e.includes("edge/"))return"Chrome";if(P0(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function E0(n=We()){return/firefox\//i.test(n)}function I0(n=We()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function A0(n=We()){return/crios\//i.test(n)}function C0(n=We()){return/iemobile/i.test(n)}function P0(n=We()){return/android/i.test(n)}function S0(n=We()){return/blackberry/i.test(n)}function R0(n=We()){return/webos/i.test(n)}function Ru(n=We()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function KN(n=We()){var e;return Ru(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QN(){return BA()&&document.documentMode===10}function N0(n=We()){return Ru(n)||P0(n)||R0(n)||S0(n)||/windows phone/i.test(n)||C0(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k0(n,e=[]){let t;switch(n){case"Browser":t=Rm(We());break;case"Worker":t=`${Rm(We())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Qr}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(n,e={}){return ns(n,"GET","/v2/passwordPolicy",Pu(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=6;class ek{constructor(e){var t,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:ZN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tk{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nm(this),this.idTokenSubscription=new Nm(this),this.beforeStateQueue=new XN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Lt(t)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Vr.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Vo(this,{idToken:e}),r=await pt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(_t(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await jo(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_t(this.app))return Promise.reject(Qn(this));const t=e?ut(e):null;return t&&G(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _t(this.app)?Promise.reject(Qn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _t(this.app)?Promise.reject(Qn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lt(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await JN(this),t=new ek(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ai("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await WN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Lt(e)||this._popupRedirectResolver;G(t,this,"argument-error"),this.redirectPersistenceManager=await Vr.create(this,[Lt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const i=typeof t=="function"?t:t.next.bind(t);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(t);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=k0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(_t(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&kN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Nu(n){return ut(n)}class Nm{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(t=>this.observer=t)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nk(n){ku=n}function rk(n){return ku.loadJS(n)}function sk(){return ku.gapiScript}function ik(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(n,e){const t=Bc(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),i=t.getOptions();if(Zn(i,e??{}))return s;Gt(s,"already-initialized")}return t.initialize({options:e})}function ak(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Lt);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function lk(n,e,t){const r=Nu(n);G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(t!=null&&t.disableWarnings),i=V0(e),{host:o,port:l}=ck(e),c=l===null?"":`:${l}`,u={url:`${i}//${o}${c}/`},d=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){G(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),G(Zn(u,r.config.emulator)&&Zn(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Kr(o)?(Ry(`${i}//${o}${c}`),Ny("Auth",!0)):s||uk()}function V0(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ck(n){const e=V0(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:km(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:km(o)}}}function km(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function uk(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ot("not implemented")}_getIdTokenResponse(e){return Ot("not implemented")}_linkToIdToken(e,t){return Ot("not implemented")}_getReauthenticationResolver(e){return Ot("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(n,e){return FN(n,"POST","/v1/accounts:signInWithIdp",Pu(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk="http://localhost";class rr extends j0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Gt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,i=lc(t,["providerId","signInMethod"]);if(!r||!s)return null;const o=new rr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return jr(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,jr(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jr(e,t)}buildRequest(){const e={requestUri:hk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=li(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends D0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on extends mi{constructor(){super("facebook.com")}static credential(e){return rr._fromParams({providerId:on.PROVIDER_ID,signInMethod:on.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return on.credentialFromTaggedObject(e)}static credentialFromError(e){return on.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return on.credential(e.oauthAccessToken)}catch{return null}}}on.FACEBOOK_SIGN_IN_METHOD="facebook.com";on.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an extends mi{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return rr._fromParams({providerId:an.PROVIDER_ID,signInMethod:an.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return an.credentialFromTaggedObject(e)}static credentialFromError(e){return an.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return an.credential(t,r)}catch{return null}}}an.GOOGLE_SIGN_IN_METHOD="google.com";an.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends mi{constructor(){super("github.com")}static credential(e){return rr._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ln.credential(e.oauthAccessToken)}catch{return null}}}ln.GITHUB_SIGN_IN_METHOD="github.com";ln.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn extends mi{constructor(){super("twitter.com")}static credential(e,t){return rr._fromParams({providerId:cn.PROVIDER_ID,signInMethod:cn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cn.credentialFromTaggedObject(e)}static credentialFromError(e){return cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return cn.credential(t,r)}catch{return null}}}cn.TWITTER_SIGN_IN_METHOD="twitter.com";cn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const i=await pt._fromIdTokenResponse(e,r,s),o=Vm(r);return new qr({user:i,providerId:o,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=Vm(r);return new qr({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function Vm(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Kt{constructor(e,t,r,s){var i;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Do.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new Do(e,t,r,s)}}function M0(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Do._fromErrorAndOperation(n,i,e,r):i})}async function dk(n,e,t=!1){const r=await ei(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return qr._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(n,e,t=!1){const{auth:r}=n;if(_t(r.app))return Promise.reject(Qn(r));const s="reauthenticate";try{const i=await ei(n,M0(r,s,e,n),t);G(i.idToken,r,"internal-error");const o=Su(i.idToken);G(o,r,"internal-error");const{sub:l}=o;return G(n.uid===l,r,"user-mismatch"),qr._forOperation(n,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Gt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mk(n,e,t=!1){if(_t(n.app))return Promise.reject(Qn(n));const r="signIn",s=await M0(n,r,e),i=await qr._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(i.user),i}function pk(n,e,t,r){return ut(n).onIdTokenChanged(e,t,r)}function gk(n,e,t){return ut(n).beforeAuthStateChanged(e,t)}const Mo="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mo,"1"),this.storage.removeItem(Mo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yk=1e3,vk=10;class L0 extends O0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=N0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!t&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QN()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,vk):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},yk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}L0.type="LOCAL";const wk=L0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0 extends O0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}F0.type="SESSION";const U0=F0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new ua(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:i}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async u=>u(t.origin,i)),c=await _k(l);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ua.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const u=Vu("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(d),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(){return window}function bk(n){At().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(){return typeof At().WorkerGlobalScope<"u"&&typeof At().importScripts=="function"}async function Tk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ek(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Ik(){return B0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0="firebaseLocalStorageDb",Ak=1,Oo="firebaseLocalStorage",$0="fbase_key";class pi{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ha(n,e){return n.transaction([Oo],e?"readwrite":"readonly").objectStore(Oo)}function Ck(){const n=indexedDB.deleteDatabase(Y0);return new pi(n).toPromise()}function oc(){const n=indexedDB.open(Y0,Ak);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Oo,{keyPath:$0})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Oo)?e(r):(r.close(),await Ck(),e(await oc()))})})}async function jm(n,e,t){const r=ha(n,!0).put({[$0]:e,value:t});return new pi(r).toPromise()}async function Pk(n,e){const t=ha(n,!1).get(e),r=await new pi(t).toPromise();return r===void 0?null:r.value}function Dm(n,e){const t=ha(n,!0).delete(e);return new pi(t).toPromise()}const Sk=800,Rk=3;class z0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await oc(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>Rk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return B0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ua._getInstance(Ik()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Tk(),!this.activeServiceWorker)return;this.sender=new xk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ek()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await oc();return await jm(e,Mo,"1"),await Dm(e,Mo),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>jm(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>Pk(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Dm(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=ha(s,!1).getAll();return new pi(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Sk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}z0.type="LOCAL";const Nk=z0;new fi(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(n,e){return e?Lt(e):(G(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju extends j0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Vk(n){return mk(n.auth,new ju(n),n.bypassAuthState)}function jk(n){const{auth:e,user:t}=n;return G(t,e,"internal-error"),fk(t,new ju(n),n.bypassAuthState)}async function Dk(n){const{auth:e,user:t}=n;return G(t,e,"internal-error"),dk(t,new ju(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(e,t,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Vk;case"linkViaPopup":case"linkViaRedirect":return Dk;case"reauthViaPopup":case"reauthViaRedirect":return jk;default:Gt(this.auth,"internal-error")}}resolve(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new fi(2e3,1e4);class Sr extends q0{constructor(e,t,r,s,i){super(e,t,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Sr.currentPopupAction&&Sr.currentPopupAction.cancel(),Sr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Wt(this.filter.length===1,"Popup operations only handle one event");const e=Vu();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(It(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(It(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(It(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Mk.get())};e()}}Sr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok="pendingRedirect",so=new Map;class Lk extends q0{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=so.get(this.auth._key());if(!e){try{const r=await Fk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}so.set(this.auth._key(),e)}return this.bypassAuthState||so.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Fk(n,e){const t=Yk(e),r=Bk(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function Uk(n,e){so.set(n._key(),e)}function Bk(n){return Lt(n._redirectPersistence)}function Yk(n){return ro(Ok,n.config.apiKey,n.name)}async function $k(n,e,t=!1){if(_t(n.app))return Promise.reject(Qn(n));const r=Nu(n),s=kk(r,e),o=await new Lk(r,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=10*60*1e3;class qk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Hk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!H0(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(It(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=zk&&this.cachedEventUids.clear(),this.cachedEventUids.has(Mm(e))}saveEventToCache(e){this.cachedEventUids.add(Mm(e)),this.lastProcessedEventTime=Date.now()}}function Mm(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function H0({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Hk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H0(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gk(n,e={}){return ns(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kk=/^https?/;async function Qk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Gk(n);for(const t of e)try{if(Xk(t))return}catch{}Gt(n,"unauthorized-domain")}function Xk(n){const e=sc(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===r}if(!Kk.test(t))return!1;if(Wk.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk=new fi(3e4,6e4);function Om(){const n=At().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Zk(n){return new Promise((e,t)=>{var r,s,i;function o(){Om(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Om(),t(It(n,"network-request-failed"))},timeout:Jk.get()})}if(!((s=(r=At().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=At().gapi)===null||i===void 0)&&i.load)o();else{const l=ik("iframefcb");return At()[l]=()=>{gapi.load?o():t(It(n,"network-request-failed"))},rk(`${sk()}?onload=${l}`).catch(c=>t(c))}}).catch(e=>{throw io=null,e})}let io=null;function eV(n){return io=io||Zk(n),io}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV=new fi(5e3,15e3),nV="__/auth/iframe",rV="emulator/auth/iframe",sV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},iV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function oV(n){const e=n.config;G(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Cu(e,rV):`https://${n.config.authDomain}/${nV}`,r={apiKey:e.apiKey,appName:n.name,v:Qr},s=iV.get(n.config.apiHost);s&&(r.eid=s);const i=n._getFrameworks();return i.length&&(r.fw=i.join(",")),`${t}?${li(r).slice(1)}`}async function aV(n){const e=await eV(n),t=At().gapi;return G(t,n,"internal-error"),e.open({where:document.body,url:oV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sV,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=It(n,"network-request-failed"),l=At().setTimeout(()=>{i(o)},tV.get());function c(){At().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},cV=500,uV=600,hV="_blank",dV="http://localhost";class Lm{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function fV(n,e,t,r=cV,s=uV){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},lV),{width:r.toString(),height:s.toString(),top:i,left:o}),u=We().toLowerCase();t&&(l=A0(u)?hV:t),E0(u)&&(e=e||dV,c.scrollbars="yes");const d=Object.entries(c).reduce((g,[y,b])=>`${g}${y}=${b},`,"");if(KN(u)&&l!=="_self")return mV(e||"",l),new Lm(null);const m=window.open(e||"",l,d);G(m,n,"popup-blocked");try{m.focus()}catch{}return new Lm(m)}function mV(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV="__/auth/handler",gV="emulator/auth/handler",yV=encodeURIComponent("fac");async function Fm(n,e,t,r,s,i){G(n.config.authDomain,n,"auth-domain-config-required"),G(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Qr,eventId:s};if(e instanceof D0){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",WA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,m]of Object.entries(i||{}))o[d]=m}if(e instanceof mi){const d=e.getScopes().filter(m=>m!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await n._getAppCheckToken(),u=c?`#${yV}=${encodeURIComponent(c)}`:"";return`${vV(n)}?${li(l).slice(1)}${u}`}function vV({config:n}){return n.emulator?Cu(n,gV):`https://${n.authDomain}/${pV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cl="webStorageSupport";class wV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=U0,this._completeRedirectFn=$k,this._overrideRedirectResult=Uk}async _openPopup(e,t,r,s){var i;Wt((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Fm(e,t,r,sc(),s);return fV(e,o,Vu())}async _openRedirect(e,t,r,s){await this._originValidation(e);const i=await Fm(e,t,r,sc(),s);return bk(i),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:i}=this.eventManagers[t];return s?Promise.resolve(s):(Wt(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await aV(e),r=new qk(e);return t.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cl,{type:cl},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[cl];o!==void 0&&t(!!o),Gt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Qk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return N0()||I0()||Ru()}}const _V=wV;var Um="@firebase/auth",Bm="1.10.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function TV(n){Or(new er("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:k0(n)},u=new tk(r,s,i,c);return ak(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Or(new er("auth-internal",e=>{const t=Nu(e.getProvider("auth").getImmediate());return(r=>new xV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(Um,Bm,bV(n)),wn(Um,Bm,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV=5*60,IV=Sy("authIdTokenMaxAge")||EV;let Ym=null;const AV=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>IV)return;const s=t==null?void 0:t.token;Ym!==s&&(Ym=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function CV(n=Dy()){const e=Bc(n,"auth");if(e.isInitialized())return e.getImmediate();const t=ok(n,{popupRedirectResolver:_V,persistence:[Nk,wk,U0]}),r=Sy("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=AV(i.toString());gk(t,o,()=>o(t.currentUser)),pk(t,l=>o(l))}}const s=Cy("auth");return s&&lk(t,`http://${s}`),t}function PV(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}nk({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const i=It("internal-error");i.customData=s,t(i)},r.type="text/javascript",r.charset="UTF-8",PV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});TV("Browser");const SV={apiKey:"AIzaSyBEkHEv31lTHHEMAyD2EJCMvZNXrtLd4Pw",authDomain:"vaastu-guru.firebaseapp.com",projectId:"vaastu-guru",storageBucket:"vaastu-guru.firebasestorage.app",messagingSenderId:"1014806685724",appId:"1:1014806685724:web:500d11f3252c1a080cd7d9",measurementId:"G-ZYCD6R3GJE"},G0=jy(SV);CV(G0);const ul=iN(G0),Hr=Fe.forwardRef(({className:n,type:e,...t},r)=>h.jsx("input",{type:e,className:Ze("flex h-10 w-full rounded-xl border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:r,...t}));Hr.displayName="Input";const Tn=({onSuccess:n})=>{const[e,t]=I.useState(""),[r,s]=I.useState(""),[i,o]=I.useState(!1),l=async c=>{if(c.preventDefault(),!e||!r){Se({title:"Missing Information",description:"Please fill in all fields",variant:"destructive"});return}if(r.length!==10){Se({title:"Invalid Phone",description:"Please enter a 10-digit phone number",variant:"destructive"});return}o(!0);try{await bA({name:e,phone:r})&&(Se({title:"Success!",description:"Your consultation request has been submitted"}),n==null||n())}catch(u){console.error("Submission Error:",u),Se({title:"Error",description:"Failed to submit request. Please try again.",variant:"destructive"})}finally{o(!1)}};return h.jsxs("form",{onSubmit:l,className:"space-y-6",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx(Jn,{htmlFor:"name",className:"text-gray-700 font-medium",children:"Your Name"}),h.jsx(Hr,{id:"name",value:e,onChange:c=>t(c.target.value),className:"border-gray-300 focus:border-orange-500 focus:ring-orange-500 rounded-xl",required:!0})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx(Jn,{htmlFor:"phone",className:"text-gray-700 font-medium",children:"Phone Number"}),h.jsx(Hr,{id:"phone",type:"tel",value:r,onChange:c=>s(c.target.value.replace(/\D/g,"")),className:"border-gray-300 focus:border-orange-500 focus:ring-orange-500 rounded-xl",maxLength:10,required:!0})]}),h.jsx(Q.div,{whileHover:{scale:1.02},whileTap:{scale:.98},transition:{duration:.2},children:h.jsx(ae,{type:"submit",className:"w-full bg-orange-600 hover:bg-orange-700 text-white font-medium py-3 px-6 rounded-xl transition-all duration-300 shadow-md hover:shadow-lg",disabled:i,children:i?h.jsxs("span",{className:"flex items-center justify-center",children:[h.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Submit Request"})})]})};function RV(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var NV=["color"],kV=I.forwardRef(function(n,e){var t=n.color,r=t===void 0?"currentColor":t,s=RV(n,NV);return I.createElement("svg",Object.assign({width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},s,{ref:e}),I.createElement("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:r,fillRule:"evenodd",clipRule:"evenodd"}))});const Yt=Dw,Gr=Mw,W0=({className:n,children:e,...t})=>h.jsx(qm,{className:Ze(n),...t,children:h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e})});W0.displayName=qm.displayName;const K0=I.forwardRef(({className:n,...e},t)=>h.jsx(Hm,{ref:t,className:Ze("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm transition-all duration-300","data-[state=closed]:animate-out data-[state=closed]:fade-out data-[state=open]:fade-in",n),...e}));K0.displayName=Hm.displayName;const Ct=I.forwardRef(({className:n,children:e,...t},r)=>h.jsxs(W0,{children:[h.jsx(K0,{}),h.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"flex items-center justify-center w-full h-full",children:h.jsxs(Gm,{ref:r,className:Ze("relative z-50 w-full max-w-md gap-4 rounded-2xl border border-orange-200 bg-gradient-to-br from-orange-50 to-white p-6 shadow-xl","animate-in data-[state=open]:fade-in-90 data-[state=open]:slide-in-from-bottom-10","sm:zoom-in-90 data-[state=open]:sm:slide-in-from-bottom-0",n),...t,children:[e,h.jsxs(jw,{className:"absolute right-4 top-4 rounded-sm p-1 opacity-70 transition-opacity hover:bg-orange-100 hover:opacity-100 focus:outline-none disabled:pointer-events-none",children:[h.jsx(kV,{className:"h-5 w-5 text-orange-600"}),h.jsx("span",{className:"sr-only",children:"Close"})]})]})})]}));Ct.displayName=Gm.displayName;const Pt=({className:n,...e})=>h.jsx("div",{className:Ze("flex flex-col space-y-2 text-center",n),...e});Pt.displayName="DialogHeader";const St=I.forwardRef(({className:n,...e},t)=>h.jsx(Wm,{ref:t,className:Ze("text-2xl font-bold text-orange-600",n),...e}));St.displayName=Wm.displayName;const Rt=I.forwardRef(({className:n,...e},t)=>h.jsx(Km,{ref:t,className:Ze("text-sm text-orange-500",n),...e}));Rt.displayName=Km.displayName;const VV=()=>h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-orange-500"})}),jV=({reviews:n,isSignedIn:e,user:t,handleDeleteReview:r})=>{var l;const s=I.useRef(null),[i,o]=I.useState(30);return I.useEffect(()=>{n.length>5?o(40+n.length*2):o(30)},[n.length]),h.jsx("div",{className:"overflow-hidden py-4",ref:s,children:h.jsx(Q.div,{className:"flex",animate:{x:[0,-((l=s.current)==null?void 0:l.scrollWidth)/2||-1e3]},transition:{x:{repeat:1/0,repeatType:"loop",duration:i,ease:"linear"}},children:[...n,...n].map((c,u)=>h.jsxs(Q.div,{className:"flex-shrink-0 mx-3 bg-gradient-to-br from-orange-50 to-white p-6 rounded-2xl shadow-lg min-w-[300px] max-w-[320px]",whileHover:{scale:1.05},transition:{type:"spring",stiffness:300},children:[h.jsx(Bx,{className:"h-8 w-8 text-orange-500 mb-4"}),h.jsx("div",{className:"mb-4",children:h.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(d=>h.jsx(De,{className:`h-5 w-5 ${d<=c.rating?"text-yellow-400 fill-current":"text-gray-300"}`},d))})}),h.jsxs("p",{className:"text-gray-700 mb-4 italic",children:['"',c.comment,'"']}),h.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-500",children:[h.jsx("span",{className:"font-medium",children:c.name}),h.jsx("span",{children:c.createdAt&&!isNaN(new Date(c.createdAt).getTime())?new Date(c.createdAt).toLocaleDateString():"No date"})]}),e&&(t==null?void 0:t.id)===c.userId&&h.jsx("button",{onClick:()=>r(c.id),className:"absolute top-3 right-3 text-red-500 hover:text-red-700 transition",title:"Delete Review",children:h.jsx($x,{size:18})})]},`${c.id}-${u}`))})})},DV=()=>{const[n,e]=I.useState([]),[t,r]=I.useState({rating:5,comment:""}),{isLoaded:s,isSignedIn:i,user:o}=sr(),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{try{const y=yN(wm(ul,"reviews"),vN("createdAt","desc"),wN(50)),T=(await AN(y)).docs.map(x=>{var k;const V=x.data();return{id:x.id,...V,createdAt:(k=V.createdAt)!=null&&k.toDate?V.createdAt.toDate():null,isCurrentUser:i&&V.userId===(o==null?void 0:o.id)}});e(T)}catch(y){console.error("Error fetching reviews:",y),Se({title:"Error",description:"Could not load reviews",variant:"destructive"})}})()},[i,o==null?void 0:o.id]);const u=async g=>{if(!i){Se({title:"Not signed in",description:"Please sign in to delete your review",variant:"destructive"});return}try{await CN(i0(ul,"reviews",g)),e(y=>y.filter(b=>b.id!==g)),Se({title:"Deleted",description:"Your review has been removed."})}catch(y){console.error("Error deleting review:",y),Se({title:"Error",description:"Could not delete review",variant:"destructive"})}},d=async g=>{if(g.preventDefault(),!i)return Se({title:"Please sign in",description:"You need to be logged in to submit a review",variant:"destructive"});const y=t.comment.trim();if(y.length<3)return Se({title:"Invalid comment",description:"Comment must be at least 3 characters",variant:"destructive"});if(t.rating<1||t.rating>5)return Se({title:"Invalid rating",description:"Rating must be between 1 and 5",variant:"destructive"});try{const b={name:o.fullName||o.username||"Anonymous",userId:o.id,rating:Number(t.rating),comment:y,createdAt:Im(),updatedAt:Im()},T=await PN(wm(ul,"reviews"),b);e(x=>[{id:T.id,...b,createdAt:new Date,isCurrentUser:!0},...x]),r({rating:5,comment:""}),Se({title:"Success!",description:"Your review has been submitted"})}catch(b){console.error("Error adding review:",b),Se({title:"Error",description:b.message||"Failed to submit review",variant:"destructive"})}},m=(g,y=!1,b=null)=>h.jsx("div",{className:"flex space-x-1",children:[1,2,3,4,5].map(T=>h.jsx(De,{className:`h-5 w-5 ${T<=g?"text-yellow-400 fill-current":"text-gray-300"} ${y?"cursor-pointer hover:text-yellow-400":""}`,onClick:y?()=>b(T):void 0},T))});return s?h.jsxs(h.Fragment,{children:[h.jsxs(Xn,{children:[h.jsx("title",{children:"Vaastu Guru - Expert Numerology & Vaastu Consultancy"}),h.jsx("meta",{name:"description",content:"Get expert numerology and vaastu consultations from Yashraj Guruji and Rishabh Goel. Transform your life with ancient wisdom and modern insights."})]}),h.jsxs("div",{className:"min-h-screen",children:[h.jsx("section",{className:"relative py-20 px-4 text-center",children:h.jsx("div",{className:"container mx-auto max-w-6xl",children:h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"space-y-8",children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white text-shadow",children:["Welcome to ",h.jsx("span",{className:"text-black",children:"Vaastu Guru"})]}),h.jsx("p",{className:"text-xl md:text-2xl text-white max-w-3xl mx-auto",children:"Unlock the secrets of your destiny through ancient numerology and vaastu wisdom"}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4 mt-8",children:[i?h.jsxs(Yt,{open:l,onOpenChange:c,children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105 px-8 py-3 text-lg rounded-xl",children:"Book Consultation"})}),h.jsxs(Ct,{className:"sm:max-w-[425px]",children:[h.jsxs(Pt,{children:[h.jsx(St,{children:"Book a Consultation"}),h.jsx(Rt,{children:"Fill out the form below and we'll contact you shortly"})]}),h.jsx(Tn,{onSuccess:()=>c(!1)})]})]}):h.jsx(Ft,{mode:"modal",children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105 px-8 py-3 text-lg rounded-xl",children:"Book Consultation"})}),h.jsx(ae,{asChild:!0,variant:"outline",className:"border-white text-white hover:bg-white hover:text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 px-8 py-3 text-lg rounded-xl",children:h.jsx(fn,{to:"/services",children:"Learn More"})})]})]})})}),h.jsx("section",{className:"py-16 bg-white",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[h.jsxs(Q.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"space-y-6",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold gradient-text",children:"Book Expert Consultation"}),h.jsx("p",{className:"text-lg text-gray-600",children:"Get personalized guidance from our experts in numerology and vaastu shastra. Transform your life and spaces with ancient wisdom tailored to your needs."}),h.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-amber-50 p-5 rounded-2xl border-2 border-orange-100 shadow-sm",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:"bg-orange-500 p-2 rounded-full flex-shrink-0",children:h.jsx(Hi,{className:"h-5 w-5 text-white"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-semibold text-orange-800 text-lg mb-1",children:"Instant Call Consultation"}),h.jsx("p",{className:"text-sm text-orange-700 mb-3",children:"Connect directly with Rishabh Goel for immediate guidance"}),h.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-xl border border-orange-200",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-xs text-gray-500 line-through block",children:"Regular: ₹2099"}),h.jsx("span",{className:"text-xl font-bold text-orange-600",children:"Only ₹499"})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("span",{className:"text-xs bg-gradient-to-r from-orange-500 to-amber-500 text-white px-2 py-1 rounded-full font-medium",children:"77% OFF"}),h.jsx("p",{className:"text-xs text-green-600 mt-1 font-medium",children:"Limited Time"})]})]}),h.jsxs("ul",{className:"text-xs text-orange-700 mt-3 space-y-1 pl-1",children:[h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),h.jsx("span",{children:"Accepts one Date of Birth"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),h.jsx("span",{children:"Immediate connection after payment"})]}),h.jsxs("li",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-1.5 h-1.5 bg-orange-500 rounded-full"}),h.jsx("span",{children:"Personalized solutions for your needs"})]})]})]})]})}),h.jsx("div",{className:"flex flex-wrap gap-4",children:i?h.jsxs(Yt,{open:l,onOpenChange:c,children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover px-8 py-3 text-lg rounded-xl hover:orange-gradient-hover transition-transform duration-300 ease-in-out",children:"Book Consultation"})}),h.jsxs(Ct,{className:"sm:max-w-[425px]",children:[h.jsxs(Pt,{children:[h.jsx(St,{children:"Book a Consultation"}),h.jsx(Rt,{children:"Fill out the form below and we'll contact you shortly"})]}),h.jsx(Tn,{onSuccess:()=>c(!1)})]})]}):h.jsx(Ft,{mode:"modal",children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover px-8 py-3 text-lg rounded-xl hover:orange-gradient-hover transition-transform duration-300 ease-in-out",children:"Book Consultation"})})})]}),h.jsx(Q.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"flex justify-center",children:h.jsx("img",{src:"https://eugenixhairsciences.com/wp-content/uploads/2023/09/consultation.jpg",alt:"Consultation session",className:"rounded-xl shadow-lg w-full max-w-md"})})]})})}),h.jsx("section",{className:"py-16 bg-gradient-to-r from-orange-50 to-white",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[h.jsx(Q.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"flex justify-center order-2 md:order-1",children:h.jsx("img",{src:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",alt:"Numerology calculator",className:"rounded-xl shadow-lg w-full max-w-md"})}),h.jsxs(Q.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"space-y-6 order-1 md:order-2",children:[h.jsx("h2",{className:"text-3xl md:text-4xl font-bold gradient-text",children:"Numerology Calculator"}),h.jsx("p",{className:"text-lg text-gray-600",children:"Discover insights about yourself with our advanced numerology calculator:"}),h.jsxs("ul",{className:"space-y-4 text-gray-700",children:[h.jsxs("li",{className:"flex items-start",children:[h.jsx(mn,{className:"h-5 w-5 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsx("span",{children:"Analyzes your core personality traits and behaviors"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(mn,{className:"h-5 w-5 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsx("span",{children:"Shows your current fortune meter"})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(mn,{className:"h-5 w-5 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsx("span",{children:"Checks name compatibility with person"})]})]}),h.jsx(ae,{asChild:!0,className:"orange-gradient text-white hover:orange-gradient-hover px-8 py-3 text-lg rounded-xl hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105",children:h.jsx(fn,{to:"/calculator",children:"Try Calculator"})})]})]})})}),h.jsx("section",{className:"py-16 bg-white",children:h.jsx("div",{className:"container mx-auto px-4",children:h.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[{icon:Hx,number:"10000+",label:"Happy Clients"},{icon:jp,number:"25+",label:"Years Experience"},{icon:Mx,number:"98%",label:"Success Rate"},{icon:zx,number:"24/7",label:"Support"}].map((g,y)=>h.jsxs(Q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:y*.1},className:"space-y-4",children:[h.jsx(g.icon,{className:"h-12 w-12 text-orange-500 mx-auto"}),h.jsxs("div",{children:[h.jsx("div",{className:"text-3xl font-bold gradient-text",children:g.number}),h.jsx("div",{className:"text-gray-600",children:g.label})]})]},y))})})}),h.jsx("section",{className:"py-20 bg-gradient-to-r from-orange-50 to-white",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[h.jsx("h2",{className:"text-4xl font-bold gradient-text mb-4",children:"Meet Our Expert Consultants"}),h.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:"Our experienced consultants combine ancient wisdom with modern insights to guide you"})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-12 max-w-5xl mx-auto",children:[h.jsxs(Q.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"bg-white rounded-2xl shadow-md p-8 text-center border border-gray-100 hover:shadow-xl transition duration-300",children:[h.jsx("img",{alt:"Yashraj Guruji - Numerology Expert",className:"w-40 h-40 rounded-full mx-auto mb-6 object-cover border-4 border-orange-100",src:"/images/Profile2.jpg"}),h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Yashraj Guruji"}),h.jsx("p",{className:"text-pink-600 font-medium mb-4",children:"Senior Numerology Consultant"}),h.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"With over 20 years of experience in numerology, Yashraj Guruji has helped thousands discover their life path through numbers."}),h.jsxs("div",{className:"text-sm text-left text-gray-700 mb-4 space-y-1",children:[h.jsx("p",{children:"• Expert in Life Path Analysis"}),h.jsx("p",{children:"• Residential Vaastu Specialist"}),h.jsx("p",{children:"• Business Numerology Consultant"})]}),h.jsx("div",{className:"text-sm text-left text-gray-700 mb-4 space-y-1",children:h.jsxs("p",{children:[h.jsx("strong",{children:"Address:"})," C1, Yamuna Vihar, Delhi-110053"]})}),h.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[h.jsx("a",{href:"https://www.instagram.com/yashrajguruji/?igsh=b2U1aXpzcXh5amI%3D#",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:h.jsx(nd,{className:"w-5 h-5 text-pink-600 hover:text-pink-700 transition"})}),h.jsx("a",{href:"https://www.facebook.com/yash.kumargoel.5?rdid=VHXOM0u9TtMFE7qH&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F16GB7zP53k%2F#",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:h.jsx(td,{className:"w-5 h-5 text-blue-600 hover:text-blue-700 transition"})})]})]}),h.jsxs(Q.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{duration:.8},className:"bg-white rounded-2xl shadow-md p-8 text-center border border-gray-100 hover:shadow-xl transition duration-300",children:[h.jsx("img",{alt:"Rishabh Goel - Vaastu Consultant",className:"w-40 h-40 rounded-full mx-auto mb-6 object-cover border-4 border-orange-100",src:"/images/Profile.jpg"}),h.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Rishabh Goel"}),h.jsx("p",{className:"text-orange-500 font-medium mb-4",children:"Vaastu Consultant"}),h.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"A renowned Vaastu expert with 7+ years of experience, Rishabh Goel harmonizes spaces for prosperity and peace."}),h.jsxs("div",{className:"text-sm text-left text-gray-700 mb-4 space-y-1",children:[h.jsx("p",{children:"• Residential Vaastu Specialist"}),h.jsx("p",{children:"• Commercial Space Consultant"}),h.jsx("p",{children:"• Numerology Consultant"})]}),h.jsx("div",{className:"text-sm text-left text-gray-700 mb-4 space-y-1",children:h.jsxs("p",{children:[h.jsx("strong",{children:"Address:"})," C1, Yamuna Vihar, Delhi-110053"]})}),h.jsxs("div",{className:"flex justify-center gap-6 mt-4",children:[h.jsx("a",{href:"https://www.instagram.com/goel_bhaiji/?utm_source=qr&igsh=MTdmdTJseXdsbGV2cg%3D%3D#",target:"_blank",rel:"noopener noreferrer","aria-label":"Instagram",children:h.jsx(nd,{className:"w-5 h-5 text-pink-600 hover:text-pink-700 transition"})}),h.jsx("a",{href:"https://www.facebook.com/VaastuGuruBhaaiji?rdid=SUgkZb3o6ORBzvv3&share_url=https%3A%2F%2Fwww.facebook.com%2Fshare%2F1BTUVN8G2S%2F#",target:"_blank",rel:"noopener noreferrer","aria-label":"Facebook",children:h.jsx(td,{className:"w-5 h-5 text-blue-600 hover:text-blue-700 transition"})})]})]})]})]})}),h.jsx("section",{className:"py-20 bg-white",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[h.jsx("h2",{className:"text-4xl font-bold gradient-text mb-4",children:"What Our Clients Say"}),h.jsx("p",{className:"text-xl text-gray-600",children:"Real experiences from satisfied clients"})]}),n.length>0?h.jsx(jV,{reviews:n,isSignedIn:i,user:o,handleDeleteReview:u}):h.jsx("p",{className:"text-center text-gray-500 py-8",children:"No reviews yet. Be the first to leave one!"}),h.jsxs(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"max-w-2xl mx-auto bg-gradient-to-br from-orange-50 to-white p-8 rounded-2xl shadow-lg mt-16",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-6 text-center",children:"Share Your Experience"}),!i&&h.jsxs("div",{className:"text-center mb-6 p-4 bg-orange-100 rounded-xl",children:[h.jsx("p",{className:"text-orange-700 mb-4",children:"Please login to submit a review"}),h.jsx(Ft,{mode:"modal",children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105 rounded-xl",children:"Login / Sign Up"})})]}),h.jsxs("form",{onSubmit:d,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx(Jn,{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Your Rating"}),m(t.rating,!0,g=>r({...t,rating:g}))]}),h.jsxs("div",{children:[h.jsx(Jn,{htmlFor:"comment",className:"text-sm font-medium text-gray-700 mb-2 block",children:"Your Review"}),h.jsx("textarea",{id:"comment",value:t.comment,onChange:g=>r({...t,comment:g.target.value}),placeholder:"Share your experience with our services...",className:"w-full p-3 border border-gray-300 rounded-xl focus:border-orange-500 focus:ring-orange-500 min-h-[120px] resize-none",disabled:!i,required:!0})]}),h.jsx(ae,{type:"submit",disabled:!i,className:"w-full orange-gradient text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105 rounded-xl",children:"Submit Review"})]})]})]})})]})]}):h.jsx(VV,{})},MV=()=>h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-orange-500"})}),OV=()=>{const[n,e]=I.useState("numerology"),[t,r]=I.useState(!1),{isSignedIn:s,user:i,isLoaded:o}=sr(),l=[{number:1,meaning:"Leadership",description:"Independent, driven, and natural leaders with a pioneering spirit.",color:"text-red-500"},{number:2,meaning:"Harmony",description:"Sensitive, diplomatic, and gifted at bringing people together.",color:"text-orange-500"},{number:3,meaning:"Knowledge",description:"Curious minds who value learning, insight, and intellectual growth.",color:"text-yellow-500"},{number:4,meaning:"Stability",description:"Practical, reliable, and hardworking with a love for order.",color:"text-green-500"},{number:5,meaning:"Freedom",description:"Adventurous and versatile individuals who thrive on change and express themselves with clarity and confidence.",color:"text-blue-500"},{number:6,meaning:"Care",description:"Caring, family-focused, and drawn to beauty, comfort, and elegance.",color:"text-indigo-500"},{number:7,meaning:"Spiritual",description:"Introspective, analytical, and seekers of deeper meaning.",color:"text-purple-500"},{number:8,meaning:"Ambition",description:"Confident, disciplined, and success-oriented with strong willpower.",color:"text-pink-500"},{number:9,meaning:"Compassion",description:"Kind, idealistic, and devoted to service and global harmony.",color:"text-teal-500"}],c=[{direction:"North",element:"Water",significance:"Wealth and Career",tips:"Keep this area clean and clutter-free. Place water features here.",icon:"💧"},{direction:"Northeast",element:"Water + Earth",significance:"Spirituality and Knowledge",tips:"Ideal for prayer room or study area. Avoid heavy furniture.",icon:"🕉️"},{direction:"East",element:"Air",significance:"Health and Family",tips:"Good for main entrance. Keep windows open for fresh air.",icon:"🌬️"},{direction:"Southeast",element:"Fire",significance:"Energy and Passion",tips:"Perfect for kitchen placement. Avoid water elements here.",icon:"🔥"},{direction:"South",element:"Fire",significance:"Fame and Recognition",tips:"Display achievements and awards. Use red or orange colors.",icon:"⭐"},{direction:"Southwest",element:"Earth",significance:"Relationships and Stability",tips:"Master bedroom location. Use earth tones and heavy furniture.",icon:"🏔️"},{direction:"West",element:"Metal",significance:"Children and Creativity",tips:"Good for children's room. Display creative works here.",icon:"🎨"},{direction:"Northwest",element:"Metal + Air",significance:"Travel and Helpful People",tips:"Guest room or office space. Keep travel photos here.",icon:"✈️"}];return o?h.jsxs(h.Fragment,{children:[h.jsxs(Xn,{children:[h.jsx("title",{children:"About Numerology & Vaastu"}),h.jsx("meta",{name:"description",content:"Explore the ancient sciences of numerology and vaastu shastra. Learn principles, meanings, and practical applications for a harmonious life."})]}),h.jsx("div",{className:"min-h-screen py-20",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white text-shadow mb-4",children:["About ",h.jsx("span",{className:"text-black",children:"Ancient Wisdom"})]}),h.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto",children:"Discover the profound sciences of numerology and vaastu shastra that have guided humanity for millennia"})]}),h.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex justify-center mb-12",children:h.jsxs("div",{className:"bg-white rounded-2xl p-2 shadow-lg",children:[h.jsxs("button",{onClick:()=>e("numerology"),className:`px-8 py-3 rounded-xl font-medium transition-all duration-300 ${n==="numerology"?"orange-gradient text-white":"text-gray-600 hover:text-orange-500"}`,children:[h.jsx(mn,{className:"inline-block w-5 h-5 mr-2"}),"Numerology"]}),h.jsxs("button",{onClick:()=>e("vaastu"),className:`px-8 py-3 rounded-xl font-medium transition-all duration-300 ${n==="vaastu"?"orange-gradient text-white":"text-gray-600 hover:text-orange-500"}`,children:[h.jsx(Dp,{className:"inline-block w-5 h-5 mr-2"}),"Vaastu Shastra"]})]})}),n==="numerology"&&h.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-12",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",children:"What is Numerology?"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-700 mb-4",children:"Numerology is the ancient study of numbers and their mystical relationship with life events. It's based on the belief that numbers have vibrational frequencies that influence our lives, personalities, and destinies."}),h.jsx("p",{className:"text-gray-700 mb-6",children:"By analyzing your birth date and name, numerology reveals insights about your:"}),h.jsxs("ul",{className:"space-y-2 text-gray-700",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Life Path and Purpose"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Personality Traits"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Career Guidance"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Relationship Compatibility"]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("img",{alt:"Numerology chart with mystical numbers and symbols",className:"w-full max-w-md mx-auto rounded-2xl shadow-lg",src:"https://images.unsplash.com/photo-1644212054093-e5924f084240"})})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-8 text-center",children:"Core Number Meanings"}),h.jsx("div",{className:"grid md:grid-cols-3 gap-6",children:l.map((u,d)=>h.jsxs(Q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:d*.1},className:"bg-gradient-to-br from-orange-50 to-white p-6 rounded-2xl border border-orange-100 hover:shadow-lg transition-shadow",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:`text-4xl font-bold ${u.color} mb-2`,children:u.number}),h.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:u.meaning})]}),h.jsx("p",{className:"text-gray-600 text-sm text-center",children:u.description})]},u.number))})]})]}),n==="vaastu"&&h.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-12",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",children:"What is Vaastu Shastra?"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-700 mb-4",children:"Vaastu Shastra is an ancient Indian science of architecture and space arrangement. It harmonizes human dwellings with natural forces and cosmic energies to promote prosperity, health, and happiness."}),h.jsx("p",{className:"text-gray-700 mb-6",children:"Based on the five elements (Panchamahabhuta), Vaastu principles help create:"}),h.jsxs("ul",{className:"space-y-2 text-gray-700",children:[h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Positive Energy Flow"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Enhanced Well-being"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Financial Prosperity"]}),h.jsxs("li",{className:"flex items-center",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2"})," Harmonious Relationships"]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("img",{alt:"Vaastu compass showing eight directions with elements",className:"w-full max-w-md mx-auto rounded-2xl shadow-lg",src:"https://images.unsplash.com/photo-1598677128962-89d71838f39b"})})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-8 text-center",children:"Directional Principles"}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:c.map((u,d)=>h.jsxs(Q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:d*.1},className:"bg-gradient-to-br from-orange-50 to-white p-6 rounded-2xl border border-orange-100 hover:shadow-lg transition-shadow",children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"text-3xl mb-2",children:u.icon}),h.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:u.direction}),h.jsx("p",{className:"text-sm text-orange-600 font-medium",children:u.element})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("p",{className:"text-sm font-medium text-gray-700",children:u.significance}),h.jsx("p",{className:"text-xs text-gray-600",children:u.tips})]})]},u.direction))})]})]}),h.jsx(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mt-16",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-4",children:"Ready to Apply This Knowledge?"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Use our calculator to get personalized insights or book a consultation with our experts"}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[h.jsx(ae,{asChild:!0,className:"orange-gradient text-white transition-transform duration-300 ease-in-out hover:scale-105 hover:orange-gradient-hover rounded-xl",children:h.jsx(fn,{to:"/calculator",children:"Try Calculator"})}),s?h.jsxs(Yt,{open:t,onOpenChange:r,children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{variant:"outline",className:"border-orange-500 text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 hover:bg-orange-500 hover:text-white rounded-xl",children:"Book Consultation"})}),h.jsxs(Ct,{className:"sm:max-w-[425px]",children:[h.jsxs(Pt,{children:[h.jsx(St,{children:"Book a Consultation"}),h.jsx(Rt,{children:"Fill out the form below and we'll contact you shortly"})]}),h.jsx(Tn,{onSuccess:()=>r(!1)})]})]}):h.jsx(Ft,{mode:"modal",children:h.jsx(ae,{variant:"outline",className:"border-orange-500 text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 hover:bg-orange-500 hover:text-white rounded-xl",children:"Book Consultation"})})]})]})})]})})]}):h.jsx(MV,{})},LV=(n,e)=>{let r=e.replace(/-/g,"").split("").map(Number).reduce((c,u)=>c+u,0);for(;r>9&&r!==11&&r!==22&&r!==33;)r=r.toString().split("").map(Number).reduce((c,u)=>c+u,0);const s={A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:6,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7};let i=n.toUpperCase().replace(/[^A-Z]/g,"").split("").reduce((c,u)=>c+(s[u]||0),0);for(;i>9&&i!==11&&i!==22&&i!==33;)i=i.toString().split("").map(Number).reduce((c,u)=>c+u,0);const o="AEIOU";let l=n.toUpperCase().split("").reduce((c,u)=>o.includes(u)?c+(s[u]||0):c,0);for(;l>9&&l!==11&&l!==22&&l!==33;)l=l.toString().split("").map(Number).reduce((c,u)=>c+u,0);return{lifePathNumber:r,destinyNumber:i,soulUrgeNumber:l}},FV=({user:n,isSignedIn:e,setFormData:t,setResults:r,formData:s})=>{const[i,o]=I.useState(!1),l=async u=>{if(u.preventDefault(),!e){Se({title:"Sign In Required",description:"Please sign in to use the calculator",variant:"destructive"});return}if(!s.name.trim()||!s.birthDate){Se({title:"Error",description:"Please fill in your name and birth date",variant:"destructive"});return}o(!0),setTimeout(()=>{const d=LV(s.name,s.birthDate);r(d);const m={...s,...d,timestamp:new Date().toISOString(),userId:n.id},g=JSON.parse(localStorage.getItem("bhaggya_calculations")||"[]");g.push(m),localStorage.setItem("bhaggya_calculations",JSON.stringify(g)),Se({title:"Success!",description:"Your numerology profile has been generated."}),o(!1)},1500)},c=u=>{t({...s,[u.target.name]:u.target.value})};return h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"bg-white rounded-2xl shadow-xl p-8 card-shadow",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(mn,{className:"h-16 w-16 text-orange-500 mx-auto mb-4"}),h.jsx("h2",{className:"text-2xl font-bold gradient-text mb-2",children:"Personal Numerology Reading"}),h.jsx("p",{className:"text-gray-600",children:"Enter your details to unlock the secrets of your numbers"})]}),!e&&h.jsxs("div",{className:"text-center mb-8 p-6 bg-orange-50 rounded-xl border border-orange-200",children:[h.jsx("p",{className:"text-orange-700 mb-4 font-medium",children:"🔒 Please sign in to calculate your results"}),h.jsx("p",{className:"text-gray-600",children:"Create your account to get personalized numerology insights"})]}),h.jsxs("form",{onSubmit:l,className:"space-y-6",children:[h.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jn,{htmlFor:"name",className:"text-sm font-medium text-gray-700",children:"Full Name *"}),h.jsxs("div",{className:"relative",children:[h.jsx(qx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),h.jsx(Hr,{id:"name",name:"name",type:"text",value:s.name,onChange:c,placeholder:"Enter your full name",className:"pl-10",required:!0,disabled:!e})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx(Jn,{htmlFor:"birthDate",className:"text-sm font-medium text-gray-700",children:"Birth Date *"}),h.jsxs("div",{className:"relative",children:[h.jsx(jp,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),h.jsx(Hr,{id:"birthDate",name:"birthDate",type:"date",value:s.birthDate,onChange:c,className:"pl-10",required:!0,disabled:!e})]})]})]}),h.jsx(ae,{type:"submit",disabled:i||!e,className:"w-full orange-gradient text-white transition-transform duration-300 ease-in-out hover:scale-105 hover:orange-gradient-hover py-3 text-lg rounded-xl",children:i?"Calculating Your Numbers...":"Generate My Report"})]})]})},UV=[{numbers:[1,1],traits:["You naturally take charge and lead others","People look up to you for guidance","You sometimes focus too much on your own needs","You can get upset when things don't go your way"]},{numbers:[1,2],traits:["You're good at taking the lead in groups","You understand people's feelings easily","You sometimes put yourself first too much","Your mood changes can affect people around you"]},{numbers:[1,3],traits:["You're a natural leader in learning situations","You pick up new knowledge very quickly","You sometimes focus too much on your own way","You can act like you know more than others"]},{numbers:[1,4],traits:["You lead with steady and reliable methods","You bring calmness to stressful situations","You sometimes insist on your own methods too much","You might trust your ways more than you should"]},{numbers:[1,5],traits:["You lead through good communication","You connect well with all kinds of people","You sometimes focus on your needs first","You avoid hard work when possible"]},{numbers:[1,6],traits:["You lead with care for others","You naturally look after people's needs","You sometimes think of yourself first","You really like nice and expensive things"]},{numbers:[1,7],traits:["You lead with deep thinking","You look for meaning in everything","You sometimes focus on your own path too much","You get unsure about your choices"]},{numbers:[1,8],traits:["You lead with strong organization","You keep things neat and in order","You sometimes insist on your own way","You don't like changing your methods"]},{numbers:[1,9],traits:["You lead with kindness to all","You care about fairness for everyone","You sometimes think of yourself first","You get mad when things seem unfair"]},{numbers:[2,1],traits:["You sense people's feelings well","You can take charge when needed","Your moods change often","You sometimes focus on your needs first"]},{numbers:[2,2],traits:["You're very good at understanding feelings","You know what people need without words","Your emotions go up and down a lot","Your mood can change very quickly"]},{numbers:[2,3],traits:["You feel what others are feeling","You learn new things easily","Your emotions change often","You can act like you know more than others"]},{numbers:[2,4],traits:["You sense people's needs deeply","You bring calm to any situation","Your feelings change often","You might trust your ways too much"]},{numbers:[2,5],traits:["You understand people's emotions","You talk well with everyone","Your moods go up and down","You avoid hard work sometimes"]},{numbers:[2,6],traits:["You feel others' needs strongly","You take good care of people","Your emotions change often","You really enjoy fancy things"]},{numbers:[2,7],traits:["You sense deeper meanings easily","You think about life's big questions","Your feelings change a lot","You get confused about choices"]},{numbers:[2,8],traits:["You understand people's emotions","You keep things well organized","Your moods change often","You don't like changing your ways"]},{numbers:[2,9],traits:["You feel others' pain deeply","You care about everyone equally","Your emotions go up and down","You get angry at unfair things"]},{numbers:[3,1],traits:["You learn things very quickly","You can lead in learning situations","You might act like you know more","You sometimes focus on your needs first"]},{numbers:[3,2],traits:["You pick up knowledge easily","You understand feelings well","You can seem to know it all","Your moods change often"]},{numbers:[3,3],traits:["You're very smart and love learning","You grasp new ideas quickly","You might show off your smarts","You let people know how much you know"]},{numbers:[3,4],traits:["You understand things fast","You bring steady learning methods","You can act like you know more","You trust your ways too much"]},{numbers:[3,5],traits:["You learn through talking to people","You communicate ideas well","You might act like you know more","You avoid hard work sometimes"]},{numbers:[3,6],traits:["You learn about caring for others","You understand people's needs","You can seem to know it all","You really like luxury items"]},{numbers:[3,7],traits:["You learn deep spiritual ideas","You think about life's meaning","You might act like you know more","You get unsure about choices"]},{numbers:[3,8],traits:["You learn organized methods well","You keep knowledge neatly arranged","You can seem to know it all","You don't like changing your ways"]},{numbers:[3,9],traits:["You learn about helping humanity","You care about everyone's good","You might act like you know more","You get mad at unfair treatment"]},{numbers:[4,1],traits:["You bring steadiness to leadership","You lead in reliable ways","You might trust your methods too much","You sometimes focus on your needs first"]},{numbers:[4,2],traits:["You provide stable emotional support","You understand feelings deeply","You might be too sure of your ways","Your moods change often"]},{numbers:[4,3],traits:["You learn in steady, reliable ways","You pick up knowledge well","You might trust your methods too much","You can act like you know more"]},{numbers:[4,4],traits:["You're very steady in everything","People can always count on you","You might be too sure of yourself","You trust your ways more than needed"]},{numbers:[4,5],traits:["You communicate in reliable ways","You talk with steady methods","You might trust your ways too much","You avoid hard work sometimes"]},{numbers:[4,6],traits:["You care for others steadily","You provide reliable support","You might be too sure of your ways","You really enjoy nice things"]},{numbers:[4,7],traits:["You seek truth in steady ways","You think deeply with reliability","You might trust your methods too much","You get confused about choices"]},{numbers:[4,8],traits:["You organize things very reliably","You keep everything in perfect order","You might be too sure of your ways","You don't like changing methods"]},{numbers:[4,9],traits:["You help humanity in steady ways","You care about all people equally","You might trust your methods too much","You get angry at unfairness"]},{numbers:[5,1],traits:["You talk well as a leader","You communicate directions clearly","You avoid hard work sometimes","You sometimes focus on your needs first"]},{numbers:[5,2],traits:["You talk about feelings well","You understand emotional needs","You skip hard work when possible","Your moods change often"]},{numbers:[5,3],traits:["You explain ideas clearly","You share knowledge easily","You avoid difficult tasks","You can act like you know more"]},{numbers:[5,4],traits:["You communicate reliably","You talk in steady ways","You skip hard work sometimes","You might trust your ways too much"]},{numbers:[5,5],traits:["You're excellent at conversations","You connect with all kinds of people","You avoid difficult tasks","You don't like doing hard work"]},{numbers:[5,6],traits:["You talk about caring well","You communicate about people's needs","You skip hard work sometimes","You really enjoy luxury items"]},{numbers:[5,7],traits:["You discuss deep ideas well","You talk about life's meaning","You avoid difficult tasks","You get unsure about choices"]},{numbers:[5,8],traits:["You explain organized plans well","You communicate clear systems","You skip hard work sometimes","You don't like changing methods"]},{numbers:[5,9],traits:["You talk about helping others well","You communicate about fairness","You avoid difficult tasks","You get mad at unfair treatment"]},{numbers:[6,1],traits:["You care for others as a leader","You look after people's needs well","You really enjoy nice things","You sometimes focus on your needs first"]},{numbers:[6,2],traits:["You deeply care about feelings","You understand emotional needs","You love luxury items","Your moods change often"]},{numbers:[6,3],traits:["You care through sharing knowledge","You teach others what you know","You enjoy expensive things","You can act like you know more"]},{numbers:[6,4],traits:["You provide reliable care","You support others steadily","You love nice possessions","You might trust your ways too much"]},{numbers:[6,5],traits:["You care through good communication","You talk about helping well","You enjoy luxury items","You avoid hard work sometimes"]},{numbers:[6,6],traits:["You're naturally very caring","You nurture people beautifully","You love comfort and luxury","You enjoy nice things more than most"]},{numbers:[6,7],traits:["You care with spiritual depth","You think about helping deeply","You enjoy expensive things","You get unsure about choices"]},{numbers:[6,8],traits:["You care in organized ways","You systemize helping others","You love luxury items","You don't like changing methods"]},{numbers:[6,9],traits:["You care about all humanity","You want fairness for everyone","You enjoy nice things","You get angry at unfairness"]},{numbers:[7,1],traits:["You think deeply as a leader","You lead with spiritual insight","You get confused about choices","You sometimes focus on your needs first"]},{numbers:[7,2],traits:["You sense spiritual meanings","You understand deep feelings","You feel unsure about decisions","Your moods change often"]},{numbers:[7,3],traits:["You seek knowledge deeply","You learn with spiritual insight","You get confused about choices","You can act like you know more"]},{numbers:[7,4],traits:["You think about truth steadily","You seek meaning reliably","You feel unsure about decisions","You might trust your ways too much"]},{numbers:[7,5],traits:["You talk about deep ideas","You communicate spiritual thoughts","You get confused about choices","You avoid hard work sometimes"]},{numbers:[7,6],traits:["You care with spiritual depth","You nurture with deep meaning","You feel unsure about decisions","You really enjoy luxury items"]},{numbers:[7,7],traits:["You're very spiritually deep","You always seek life's truths","You get confused about choices","You often don't know what to do"]},{numbers:[7,8],traits:["You organize spiritual systems","You arrange deep knowledge neatly","You get confused about choices","You don't like changing methods"]},{numbers:[7,9],traits:["You think about helping deeply","You seek meaning in service","You feel unsure about decisions","You get angry at unfairness"]},{numbers:[8,1],traits:["You organize as a leader","You lead with clear systems","You don't like changing ways","You sometimes focus on your needs first"]},{numbers:[8,2],traits:["You systemize emotional support","You organize care for feelings","You resist changing methods","Your moods change often"]},{numbers:[8,3],traits:["You arrange knowledge neatly","You organize learning well","You don't like changing ways","You can act like you know more"]},{numbers:[8,4],traits:["You create reliable systems","You organize steady methods","You resist changing ways","You might trust your ways too much"]},{numbers:[8,5],traits:["You systemize communication","You organize talking points well","You don't like changing methods","You avoid hard work sometimes"]},{numbers:[8,6],traits:["You organize caring systems","You arrange help for others neatly","You resist changing ways","You really enjoy luxury items"]},{numbers:[8,7],traits:["You arrange spiritual knowledge","You organize deep thinking","You don't like changing methods","You get confused about choices"]},{numbers:[8,8],traits:["You're extremely well-organized","You keep everything in perfect order","You resist changing ways","You always want things your way"]},{numbers:[8,9],traits:["You systemize helping others","You organize care for humanity","You don't like changing methods","You get angry at unfairness"]},{numbers:[9,1],traits:["You care for all as a leader","You lead with kindness to everyone","You get mad at unfair things","You sometimes focus on your needs first"]},{numbers:[9,2],traits:["You feel for all people deeply","You understand everyone's pain","You get angry at unfairness","Your moods change often"]},{numbers:[9,3],traits:["You learn to help humanity","You gain knowledge to serve others","You get mad at unfair treatment","You can act like you know more"]},{numbers:[9,4],traits:["You steadily help all people","You reliably care for humanity","You get angry at unfairness","You might trust your ways too much"]},{numbers:[9,5],traits:["You talk about helping all","You communicate about fairness","You get mad at unfair things","You avoid hard work sometimes"]},{numbers:[9,6],traits:["You deeply care for everyone","You nurture all people equally","You get angry at unfairness","You really enjoy luxury items"]},{numbers:[9,7],traits:["You think about helping deeply","You seek meaning in service","You get mad at unfair treatment","You get confused about choices"]},{numbers:[9,8],traits:["You organize help for all","You systemize care for humanity","You get angry at unfairness","You don't like changing methods"]},{numbers:[9,9],traits:["You deeply care about all people","You want to make the world better","You get very mad at unfairness","You hate seeing suffering"]}],$m={A:1,B:2,C:3,D:4,E:5,F:8,G:3,H:5,I:1,J:1,K:2,L:3,M:4,N:5,O:7,P:8,Q:1,R:2,S:3,T:4,U:6,V:6,W:6,X:5,Y:1,Z:7},BV={1:{compatible:[1,2,3,4,5,6,7,9],description:"1 works best with 8"},2:{compatible:[],description:"2 doesn't have compatible numbers"},3:{compatible:[],description:"3 doesn't have compatible numbers"},4:{compatible:[],description:"4 doesn't have compatible numbers"},5:{compatible:[1,2,3,4,5,6,7,8,9],description:"5 works with all numbers"},6:{compatible:[1,2,4,5,6,7,8],description:"6 works best with 3 and 9"},7:{compatible:[],description:"7 doesn't have compatible numbers"},8:{compatible:[],description:"8 doesn't have compatible numbers"},9:{compatible:[],description:"9 doesn't have compatible numbers"},16:{compatible:[1,2,3,4,5,6,7,8,9],description:"16 works with all numbers"},22:{compatible:[1,3,5,6,7],description:"22 works best with 2, 4, 8, and 9"},25:{compatible:[1,2,3,4,5,6,7,8,9],description:"25 works with all numbers"}},ac=n=>{if([22,16,25].includes(n))return n;for(;n>9;)n=n.toString().split("").reduce((e,t)=>e+parseInt(t),0);return n},YV=n=>{if(!n)return 0;let e=0;for(const t of n.toUpperCase())$m[t]&&(e+=$m[t]);return e},$V=(n,e)=>{const t=ac(n),r=BV[t]||{compatible:[],description:`No specific compatibility rules for ${t}`},s=r.compatible.length===0?!1:r.compatible.includes(e);return{compatible:s,nameValue:t,description:s?`Your name number ${t} is compatible with your birth number ${e}!`:`Your name number ${t} is not compatible with your birth number ${e}. ${r.description}`}},zV=n=>{if(!n)return{firstNum:0,secondNum:0};try{const[e,t,r]=n.split("-").map(Number);let s=ac(r);const i=n.replace(/\D/g,"").split("").map(Number);let o=ac(i.reduce((l,c)=>l+c,0));return{firstNum:Math.max(1,Math.min(9,s)),secondNum:Math.max(1,Math.min(9,o))}}catch(e){return console.error("Calculation error:",e),{firstNum:0,secondNum:0}}},qV=(n,e)=>{try{const t=UV.find(r=>r.numbers[0]===n&&r.numbers[1]===e);return t?t.traits:["You have unique leadership qualities that inspire others","You possess special talents that make you stand out","Sometimes you need to work on balancing your strong personality","Your unique combination requires patience to fully develop"]}catch(t){return console.error("Traits error:",t),["You have special qualities that make you unique","Your personality has wonderful potential for growth","Like everyone, you have areas that need gentle attention","Your journey of self-discovery is ongoing and valuable"]}},HV=n=>{if(!n)return 0;const e=new Date().getFullYear(),[t,r,s]=n.split("-").map(Number);let i=s+r+e;for(;i>9;)i=i.toString().split("").reduce((o,l)=>o+parseInt(l),0);return i},GV=n=>({1:{percentage:90,description:"This is a fresh start year full of new opportunities. Take initiative on projects you've been putting off - this is the perfect time to begin. Your leadership skills will shine if you step forward confidently."},2:{percentage:60,description:"A sensitive year where decisions feel difficult. You may second-guess yourself often. When confused, pause and reflect before choosing - don't force answers immediately. Relationships need extra patience this year."},3:{percentage:65,description:"You'll face more obstacles than usual this year. When problems arise, tackle them one at a time instead of feeling overwhelmed. Creative solutions work best - think outside the box when stuck."},4:{percentage:70,description:"Progress comes slowly but surely this year. Focus on doing small, consistent actions rather than expecting quick results. Building strong foundations now will help you in future years."},5:{percentage:95,description:"This is your most fortunate year with excellent opportunities. Stay alert for lucky breaks and don't hesitate to take calculated risks. Positive changes happen easily - go with the flow but stay grounded."},6:{percentage:85,description:"Your choices determine everything this year. Think carefully before deciding, as both good and bad options have stronger consequences. Choose wisely - your decisions create lasting effects."},7:{percentage:55,description:"Be extra cautious this year as deception is more likely. Double-check all information and agreements. If something seems too good to be true, it probably is - listen to your gut feelings."},8:{percentage:50,description:"A year requiring much effort for gradual results. Don't get discouraged by slow progress - keep working steadily. Your persistence will eventually be rewarded, even if it takes time."},9:{percentage:20,description:"This challenging year tests your resilience. When facing difficulties, focus on basic needs first - don't overwhelm yourself. Remember tough times are temporary and make you stronger."}})[n]||{percentage:50,description:"Neutral year with mixed experiences"},WV=({percentage:n})=>{const[e,t]=I.useState(0);I.useEffect(()=>{const l=Date.now(),c=()=>{const u=Date.now()-l,d=Math.min(u/2e3,1);t(Math.floor(d*n)),d<1&&requestAnimationFrame(c)};c()},[n]);const r=40,s=2*Math.PI*r,i=s-e/100*s;return h.jsx("div",{className:"relative w-36 h-36 mx-auto mb-4",children:h.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[h.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"#e2e8f0",strokeWidth:"20"}),h.jsx("circle",{cx:"50",cy:"50",r,fill:"none",stroke:"url(#waterGradient)",strokeWidth:"15",strokeLinecap:"round",strokeDasharray:s,strokeDashoffset:i,transform:"rotate(-90 50 50)",style:{transition:"stroke-dashoffset 0.5s ease-out"}}),h.jsx("defs",{children:h.jsxs("linearGradient",{id:"waterGradient",x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[h.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),h.jsx("stop",{offset:"100%",stopColor:"#1d4ed8"})]})}),h.jsxs("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",fontSize:"18",fontWeight:"bold",fill:"#3b82f6",children:[e,"%"]})]})})},KV=n=>{if(!n||!Array.isArray(n))return null;const e=n.slice(0,2),t=n.slice(2,4);return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border-l-4 border-green-400",children:[h.jsx("h4",{className:"font-semibold text-green-800 mb-2",children:"✨ Your Strengths:"}),h.jsx("ul",{className:"list-disc pl-5 space-y-1",children:e.map((r,s)=>h.jsx("li",{className:"text-green-700",children:r},s))})]}),h.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border-l-4 border-orange-400",children:[h.jsx("h4",{className:"font-semibold text-orange-800 mb-2",children:"🌱 Areas for Growth:"}),h.jsx("ul",{className:"list-disc pl-5 space-y-1",children:t.map((r,s)=>h.jsx("li",{className:"text-orange-700",children:r},s))})]})]})},QV=({formData:n={},onReset:e=()=>{}})=>{const[t,r]=I.useState(!1),[s,i]=I.useState(!1),{firstNum:o,secondNum:l}=zV(n==null?void 0:n.birthDate),c=qV(o,l),u=YV(n==null?void 0:n.name),d=$V(u,o),m=HV(n==null?void 0:n.birthDate),g=GV(m);return n!=null&&n.birthDate?h.jsxs(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6 max-w-3xl mx-auto",children:[h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[h.jsx("h2",{className:"text-2xl font-bold text-center text-orange-600 mb-3",children:"Your Numerology Profile"}),h.jsxs("div",{className:"text-center mb-4",children:[h.jsxs("p",{className:"text-gray-600",children:["For: ",h.jsx("span",{className:"font-medium text-orange-600",children:(n==null?void 0:n.name)||"Unknown"})]}),h.jsxs("p",{className:"text-gray-600",children:["Born: ",h.jsx("span",{className:"font-medium text-orange-600",children:new Date(n.birthDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})})]})]}),(n==null?void 0:n.name)&&h.jsxs("div",{className:`flex items-center justify-center mb-2 ${d.compatible?"text-green-600":"text-red-600"}`,children:[h.jsx("span",{className:"text-xl mr-2",children:d.compatible?"✓":"✗"}),h.jsx("span",{className:"font-medium",children:d.compatible?"Your name value is compatible with you":"Your name value is not compatible with you"})]}),(n==null?void 0:n.name)&&!d.compatible&&h.jsx("div",{className:"text-center mb-4",children:h.jsxs(Yt,{children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{className:"bg-orange-500 hover:bg-orange-600 text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105",children:"Book Consultation for Name Correction"})}),h.jsxs(Ct,{className:"rounded-lg max-w-[90vw] sm:max-w-md",children:[h.jsxs(Pt,{children:[h.jsx(St,{className:"text-xl font-bold text-orange-600",children:"Name Correction Consultation"}),h.jsx(Rt,{className:"text-orange-500",children:"Our experts will analyze your name and suggest improvements for better compatibility"})]}),h.jsx(Tn,{onSuccess:()=>r(!1),defaultName:(n==null?void 0:n.name)||"",defaultBirthDate:(n==null?void 0:n.birthDate)||"",isNameCorrection:!0})]})]})}),h.jsxs("div",{className:"bg-orange-50 rounded-lg p-5 border border-orange-100",children:[h.jsx("h3",{className:"font-semibold text-lg mb-3 text-orange-600",children:"Your Personality Traits:"}),KV(c)]}),h.jsxs("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-100 mt-4",children:[h.jsxs("h3",{className:"font-semibold text-lg mb-3 text-blue-600 text-center",children:["Your ",new Date().getFullYear()," Fortune Meter"]}),h.jsx(WV,{percentage:g.percentage}),h.jsx("p",{className:"text-center text-blue-700 font-medium mt-4",children:g.description})]}),h.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border-l-4 border-yellow-400 rounded",children:h.jsxs("p",{className:"text-sm text-yellow-700",children:[h.jsx("span",{className:"font-semibold",children:"Note:"})," This analysis considers basic factors only. For complete accuracy, book an appointment with our experts."]})})]}),h.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[h.jsx("h3",{className:"text-xl font-semibold text-center text-orange-600 mb-3",children:"Want Deeper Insights?"}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[h.jsx(ae,{onClick:e,variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-50",children:"New Analysis"}),h.jsx(ae,{className:"bg-orange-500 hover:bg-orange-600 text-white hover:orange-gradient-hover transition-transform duration-300 ease-in-out hover:scale-105",onClick:()=>r(!0),children:"Full Report"})]})]}),h.jsx(Yt,{open:t,onOpenChange:r,children:h.jsxs(Ct,{className:"rounded-lg max-w-[90vw] sm:max-w-md",children:[h.jsxs(Pt,{children:[h.jsx(St,{className:"text-xl font-bold text-orange-600",children:"Complete Numerology Reading"}),h.jsx(Rt,{className:"text-orange-500",children:"Includes detailed analysis of your core numbers and cycles"})]}),h.jsx(Tn,{onSuccess:()=>r(!1),defaultName:(n==null?void 0:n.name)||"",defaultBirthDate:(n==null?void 0:n.birthDate)||""})]})}),h.jsx(Yt,{open:s,onOpenChange:i,children:h.jsxs(Ct,{className:"rounded-lg max-w-[90vw] sm:max-w-md",children:[h.jsxs(Pt,{children:[h.jsx(St,{className:"text-xl font-bold text-orange-600",children:"Name Correction Consultation"}),h.jsx(Rt,{className:"text-orange-500",children:"Our experts will analyze your name and suggest improvements for better compatibility"})]}),h.jsx(Tn,{onSuccess:()=>i(!1),defaultName:(n==null?void 0:n.name)||"",defaultBirthDate:(n==null?void 0:n.birthDate)||"",isNameCorrection:!0})]})})]}):h.jsxs("div",{className:"text-center p-8 bg-white rounded-lg shadow-md",children:[h.jsx("h3",{className:"text-xl font-semibold text-red-500 mb-4",children:"Birth Date Required"}),h.jsx(ae,{onClick:e,className:"bg-orange-500 hover:bg-orange-600 text-white",children:"Enter Birth Date"})]})},XV=()=>h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-orange-500"})}),JV=()=>{const[n,e]=I.useState({name:"",birthDate:""}),[t,r]=I.useState(null),{isLoaded:s,isSignedIn:i,user:o}=sr(),l=()=>{r(null),e({name:"",birthDate:""})};return s?h.jsxs(h.Fragment,{children:[h.jsxs(Xn,{children:[h.jsx("title",{children:"Numerology Calculator - Get Your Personal Reading | Bhaggya Darshhan"}),h.jsx("meta",{name:"description",content:"Calculate your life path, destiny, and soul urge numbers with our advanced numerology calculator. Get personalized insights based on your name and birth date."})]}),h.jsx("div",{className:"min-h-screen py-20",children:h.jsxs("div",{className:"container mx-auto px-4 max-w-4xl",children:[h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[h.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-white text-shadow mb-4",children:["Numerology ",h.jsx("span",{className:"text-black",children:"Calculator"})]}),h.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto",children:"Unlock your life's blueprint with our numerology calculator: reveals personality traits, fortune potential, and name compatibility for harmonious energy flow."})]}),t?h.jsx(QV,{results:t,formData:n,onReset:l}):h.jsx(FV,{user:o,isSignedIn:i,formData:n,setFormData:e,setResults:r})]})})]}):h.jsx(XV,{})},ZV=()=>h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-orange-500"})}),e2=()=>{const[n,e]=I.useState("color"),[t,r]=I.useState(!1),{isSignedIn:s,user:i,isLoaded:o}=sr(),l=ar(),c=[{color:"Red",meaning:"Energy & Passion",description:"Stimulates vitality, increases circulation, and boosts confidence.",hex:"#f87171"},{color:"Orange",meaning:"Creativity & Joy",description:"Enhances social interaction, stimulates creativity, and boosts mood.",hex:"#fb923c"},{color:"Blue",meaning:"Calm & Clarity",description:"Promotes peace, reduces stress, and enhances communication.",hex:"#60a5fa"},{color:"Green",meaning:"Balance & Healing",description:"Supports emotional balance, harmony, and rejuvenation.",hex:"#34d399"},{color:"Yellow",meaning:"Joy & Intellect",description:"Stimulates mental clarity, positivity, and learning.",hex:"#facc15"},{color:"Purple",meaning:"Spiritual Insight",description:"Encourages meditation, intuition, and deeper wisdom.",hex:"#c084fc"}],u=[{use:"Meditation Aid",description:"Enhances focus and spiritual connection when meditating under pyramids.",icon:"🧘"},{use:"Energy Balancing",description:"Used to align chakras and balance subtle energies.",icon:"⚡"},{use:"Vaastu Remedies",description:"Pyramids neutralize negative energy in homes and workspaces.",icon:"🏠"},{use:"Healing Amplifier",description:"Placed under water or food, pyramids enhance their positive properties.",icon:"💧"}];return o?h.jsxs(h.Fragment,{children:[h.jsxs(Xn,{children:[h.jsx("title",{children:"Therapies - Color & Pyramid | Bhaggya Darshhan"}),h.jsx("meta",{name:"description",content:"Explore Color Therapy and Pyramid Therapy to balance your energies and enhance well-being through ancient practices."})]}),h.jsx("div",{className:"min-h-screen py-20",children:h.jsxs("div",{className:"container mx-auto px-4",children:[h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white text-shadow mb-4",children:["Explore ",h.jsx("span",{className:"text-black",children:"Healing Therapies"})]}),h.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto",children:"Discover ancient therapeutic practices to harmonize your energy and enhance well-being"})]}),h.jsx(Q.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex justify-center mb-12",children:h.jsxs("div",{className:"bg-white rounded-2xl p-2 shadow-lg",children:[h.jsxs("button",{onClick:()=>e("color"),className:`px-8 py-3 rounded-xl font-medium transition-all duration-300 ${n==="color"?"orange-gradient text-white":"text-gray-600 hover:text-orange-500"}`,children:[h.jsx(Mp,{className:"inline-block w-5 h-5 mr-2"}),"Color"]}),h.jsxs("button",{onClick:()=>e("pyramid"),className:`px-8 py-3 rounded-xl font-medium transition-all duration-300 ${n==="pyramid"?"orange-gradient text-white":"text-gray-600 hover:text-orange-500"}`,children:[h.jsx(Op,{className:"inline-block w-5 h-5 mr-2"}),"Pyramid"]})]})}),n==="color"&&h.jsxs(Q.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-12",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",children:"🌈 What is Color Therapy?"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-700 mb-4",children:"Color Therapy (Chromotherapy) is the holistic use of color frequencies to balance physical, emotional, and spiritual well-being. Each color emits a specific vibration that can positively affect the human body and mind."}),h.jsx("p",{className:"text-gray-700 mb-6",children:"It helps you with:"}),h.jsxs("ul",{className:"space-y-3 text-gray-700",children:[h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Emotional Healing"})," - Soothes stress, anxiety, and emotional imbalances using calming colors."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Energy Rejuvenation"})," - Stimulates energy levels and vitality through warm, energizing hues."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Chakra Alignment"})," - Uses specific colors to balance and harmonize the energy centers."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Mental Clarity"})," - Enhances focus and mood by influencing brainwave activity."]})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("img",{src:"https://media.istockphoto.com/id/1027020366/vector/human-mind-brain-spirit-energy-connect-to-the-universe-power-abstract-art-watercolor.jpg?s=612x612&w=0&k=20&c=-BW7ZMgDAQvFk4hSLVH_3o5ejQIVNYQpvnWDHxgswyk=",alt:"Color Therapy Illustration",className:"w-full max-w-md mx-auto rounded-2xl shadow-lg"})})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-8 text-center",children:"Color Meanings & Benefits"}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((d,m)=>h.jsxs(Q.div,{className:"bg-gradient-to-br from-orange-50 to-white p-6 rounded-2xl border border-orange-100 hover:shadow-lg transition-shadow",style:{borderColor:d.hex},initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"text-3xl font-bold",style:{color:d.hex},children:d.color}),h.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:d.meaning})]}),h.jsx("p",{className:"text-gray-600 text-sm text-center",children:d.description})]},m))})]})]}),n==="pyramid"&&h.jsxs(Q.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.6},className:"space-y-12",children:[h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h2",{className:"text-3xl font-bold gradient-text mb-6",children:"🔺 What is Pyramid Therapy?"}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 items-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-gray-700 mb-4",children:"Pyramid Therapy utilizes the sacred geometry of pyramids to harness cosmic energy for healing and personal transformation. The structure of a pyramid amplifies and balances subtle energies."}),h.jsx("p",{className:"text-gray-700 mb-6",children:"It supports you through:"}),h.jsxs("ul",{className:"space-y-3 text-gray-700",children:[h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Meditative Enhancement"})," - Pyramids deepen your meditative state by aligning inner frequencies."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Energy Purification"})," - Neutralizes negativity and promotes energetic balance."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Space Cleansing"})," - Improves Vaastu by correcting energy distortions in your environment."]})]}),h.jsxs("li",{className:"flex items-start",children:[h.jsx(De,{className:"h-4 w-4 text-orange-500 mr-2 mt-1 flex-shrink-0"}),h.jsxs("div",{children:[h.jsx("strong",{className:"text-orange-600",children:"Healing Acceleration"})," - Elevates the vibrational quality of food, water, and surroundings."]})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("img",{src:"https://dailygalaxy.com/wp-content/uploads/2025/04/The-Great-Pyramid-of-Giza-Has-MORE-Than-Four-Sides.jpg",alt:"Pyramid Therapy Illustration",className:"w-full max-w-md mx-auto rounded-2xl shadow-lg"})})]})]}),h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-8 text-center",children:"Pyramid Applications"}),h.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((d,m)=>h.jsxs(Q.div,{className:"bg-gradient-to-br from-orange-50 to-white p-6 rounded-2xl border border-orange-100 hover:shadow-lg transition-shadow",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:m*.1},children:[h.jsxs("div",{className:"text-center mb-4",children:[h.jsx("div",{className:"text-3xl mb-2",children:d.icon}),h.jsx("h4",{className:"text-lg font-semibold text-gray-800",children:d.use})]}),h.jsx("p",{className:"text-sm text-gray-600 text-center",children:d.description})]},m))})]})]}),h.jsx(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"text-center mt-16",children:h.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h3",{className:"text-2xl font-bold gradient-text mb-4",children:"Want Personalized Therapy Guidance?"}),h.jsx("p",{className:"text-gray-600 mb-6",children:"Discover your ideal therapy colors or pyramid placements with our tools"}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[h.jsx(ae,{asChild:!0,className:"orange-gradient text-white transition-transform duration-300 ease-in-out hover:scale-105 hover:orange-gradient-hover rounded-xl",children:h.jsxs(fn,{to:"/calculator",children:[h.jsx(mn,{className:"inline-block w-5 h-5 mr-2"})," Try Calculator"]})}),s?h.jsxs(Yt,{open:t,onOpenChange:r,children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{variant:"outline",className:"border-orange-500 text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 hover:bg-orange-500 hover:text-white rounded-xl",children:"Book Therapy Session"})}),h.jsxs(Ct,{className:"sm:max-w-[425px]",children:[h.jsxs(Pt,{children:[h.jsx(St,{children:"Book a Therapy Session"}),h.jsx(Rt,{children:"Fill out the form below and we'll contact you shortly"})]}),h.jsx(Tn,{onSuccess:()=>r(!1)})]})]}):h.jsx(Ft,{mode:"modal",redirectUrl:l.pathname,children:h.jsx(ae,{variant:"outline",className:"border-orange-500 text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 hover:bg-orange-500 hover:text-white rounded-xl",children:"Book Therapy Session"})})]})]})})]})})]}):h.jsx(ZV,{})},t2=()=>h.jsx("div",{className:"min-h-screen flex items-center justify-center",children:h.jsx("div",{className:"animate-spin rounded-full h-20 w-20 border-b-4 border-orange-500"})}),n2=()=>{const[n,e]=I.useState(!1),{isSignedIn:t,isLoaded:r}=sr(),s=ar(),i=[{title:"Numerology",description:"Discover your life path number and understand your core personality traits, strengths, and challenges through the ancient science of numbers.",img:"https://plus.unsplash.com/premium_photo-1717717670034-0d673f50f895?w=600&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8OXx8bnVtZXJvbG9neXxlbnwwfHwwfHx8MA%3D%3D",icon:h.jsx(mn,{className:"w-6 h-6"})},{title:"Name Correction",description:"Enhance your luck and align your name's vibrations with your birth number for better life outcomes and success.",img:"https://plus.unsplash.com/premium_photo-1666739032615-ecbd14dfb543?fm=jpg&q=60&w=3000&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8YWxwaGFiZXR8ZW58MHx8MHx8fDA%3D",icon:h.jsx(Ux,{className:"w-6 h-6"})},{title:"Residential Vaastu",description:"Align your home's energy to bring peace, prosperity, and good health to your family through proper space arrangement.",img:"https://aurorealty.com/blog/wp-content/uploads/2019/10/vastu-shastra-for-home.jpg",icon:h.jsx(Dp,{className:"w-6 h-6"})},{title:"Commercial Vaastu",description:"Attract success in business by balancing energies in shops, offices, and workspaces for optimal financial growth.",img:"https://www.vasthusubramanyam.com/wp-content/uploads/2019/09/commercial-e1568478793888.jpg",icon:h.jsx(ed,{className:"w-6 h-6"})},{title:"Industrial Vaastu",description:"Optimize industrial spaces for increased productivity, safety, and positive outcomes through proper energy flow.",img:"https://www.azumuta.com/wp-content/uploads/2024/05/petrochemical-industry-with-twilight-sky-2-1536x1024-1.jpeg",icon:h.jsx(ed,{className:"w-6 h-6"})},{title:"Color Therapy",description:"Use the vibration of colors to heal, balance emotions, and enhance well-being through chromotherapy techniques.",img:"https://www.shutterstock.com/image-illustration/human-spirit-powerful-energy-connect-600nw-1416917957.jpg",icon:h.jsx(Mp,{className:"w-6 h-6"})},{title:"Pyramid Therapy",description:"Harness the ancient power of pyramids to neutralize negativity and amplify positivity in your environment.",img:"https://dailygalaxy.com/wp-content/uploads/2025/04/The-Great-Pyramid-of-Giza-Has-MORE-Than-Four-Sides.jpg",icon:h.jsx(Op,{className:"w-6 h-6"})}];return r?h.jsxs(h.Fragment,{children:[h.jsxs(Xn,{children:[h.jsx("title",{children:"Our Services | Vaastu Guru - Numerology & Vaastu Consultancy"}),h.jsx("meta",{name:"description",content:"Explore our range of numerology and vaastu services designed to bring balance, prosperity, and harmony to your life."})]}),h.jsxs("div",{className:"min-h-screen py-20",children:[h.jsx("section",{className:"relative px-4 text-center",children:h.jsx("div",{className:"container mx-auto max-w-6xl",children:h.jsxs(Q.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"space-y-4",children:[h.jsxs("h1",{className:"text-5xl md:text-7xl font-bold text-white text-shadow mb-2",children:["Our ",h.jsx("span",{className:"text-black",children:"Services"})]}),h.jsx("p",{className:"text-xl text-white max-w-3xl mx-auto",children:"Professional numerology and vaastu services to transform your living and working spaces"})]})})}),h.jsx("section",{className:"py-12",children:h.jsx("div",{className:"container mx-auto px-4 text-center",children:h.jsx("div",{className:"bg-white rounded-2xl shadow-md p-8 border border-gray-100",children:h.jsx(Q.div,{initial:{opacity:0},whileInView:{opacity:1},transition:{duration:.5},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:i.map((o,l)=>h.jsxs(Q.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.5,delay:l*.1},whileHover:{y:-5},className:"bg-white max-w-sm mx-auto rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-all duration-300 cursor-pointer border border-gray-100",children:[h.jsx("div",{className:"h-45 overflow-hidden",children:h.jsx("img",{src:o.img,alt:o.title,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"p-6",children:[h.jsxs("div",{className:"flex items-center mb-4",children:[h.jsx("div",{className:"bg-orange-100 p-2 rounded-full mr-4",children:o.icon}),h.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:o.title})]}),h.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:o.description})]})]},l))})})})}),h.jsx("section",{className:"py-16",children:h.jsx("div",{className:"container mx-auto px-4 text-center",children:h.jsxs(Q.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},className:"bg-white rounded-2xl p-8 shadow-lg card-shadow",children:[h.jsx("h2",{className:"text-3xl font-bold gradient-text mb-4",children:"Personalized Guidance Available"}),h.jsx("p",{className:"text-gray-600 mb-8 max-w-2xl mx-auto",children:"Our experts provide customized solutions tailored to your specific needs and challenges."}),h.jsxs("div",{className:"flex flex-wrap justify-center gap-4",children:[t?h.jsxs(Yt,{open:n,onOpenChange:e,children:[h.jsx(Gr,{asChild:!0,children:h.jsx(ae,{className:"hover:bg-white transition-transform duration-300 ease-in-out hover:scale-105 orange-gradient text-white hover:orange-gradient-hover px-8 py-3 text-lg rounded-xl",children:"Book Consultation"})}),h.jsxs(Ct,{className:"sm:max-w-[425px]",children:[h.jsxs(Pt,{children:[h.jsx(St,{children:"Book a Consultation"}),h.jsx(Rt,{children:"Fill out the form below and we'll contact you shortly"})]}),h.jsx(Tn,{onSuccess:()=>e(!1)})]})]}):h.jsx(Ft,{mode:"modal",redirectUrl:s.pathname,children:h.jsx(ae,{className:"hover:bg-white hover:text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105 orange-gradient text-white hover:orange-gradient-hover px-8 py-3 text-lg rounded-xl",children:"Book Consultation"})}),h.jsx(ae,{asChild:!0,variant:"outline",className:"border-orange-500 text-orange-500 hover:bg-orange-500 hover:text-white px-8 py-3 text-lg rounded-xl hover:bg-white hover:text-orange-500 transition-transform duration-300 ease-in-out hover:scale-105",children:h.jsxs(fn,{to:"/calculator",children:[h.jsx(mn,{className:"inline-block w-5 h-5 mr-2"})," Try Our Analysis Tool"]})})]})]})})})]})]}):h.jsx(t2,{})},r2=()=>{const[n,e]=I.useState([]);return I.useEffect(()=>{const t=()=>{const s=[],i=[1,2,3,4,5,6,7,8,9,11,22,33];for(let o=0;o<25;o++)s.push({id:o,number:i[Math.floor(Math.random()*i.length)],left:Math.random()*100,delay:Math.random()*15,size:Math.random()*2+1});e(s)};t();const r=setInterval(t,15e3);return()=>clearInterval(r)},[]),h.jsx("div",{className:"floating-numbers",children:n.map(t=>h.jsx("div",{className:"floating-number",style:{left:`${t.left}%`,animationDelay:`${t.delay}s`,fontSize:`${t.size}rem`},children:t.number},t.id))})},s2=()=>{const[n,e]=I.useState(!1),[t,r]=I.useState([{id:1,text:"Hello! I'm your AI assistant for Vaastu Guru. I can help you with questions about numerology, vaastu, and our services. How can I assist you today?",isBot:!0}]),[s,i]=I.useState(""),o={numerology:"Numerology is the study of numbers and their mystical relationship with life events. Each number from 1-9 has unique vibrations and meanings. Your birth date and name can reveal insights about your personality, life path, and destiny.",vaastu:"Vaastu Shastra is an ancient Indian science of architecture and space arrangement. It focuses on harmonizing human dwellings with natural forces and cosmic energies to bring prosperity, health, and happiness.",consultants:"Our expert consultants are Yashraj guruji and Rishabh Goel. Both have years of experience in numerology and vaastu consultation, helping thousands of clients achieve harmony in their lives.",contact:"You can contact at mobile number +919650881509 or click on book appointment button to schedule a consultation.",services:"We offer personalized numerology readings, vaastu consultations for homes and offices, name correction suggestions, and guidance for important life decisions based on numerical analysis.",calculator:"Our numerology calculator analyzes your birth date and name to provide insights into your life path number, destiny number, and personality traits. You'll need to sign up to access this feature.",default:"I understand you're interested in learning more. Could you please ask about numerology, vaastu, our consultants, services, or the calculator? I'm here to help with any specific questions!"},l=()=>{if(!s.trim())return;const u={id:Date.now(),text:s,isBot:!1};r(d=>[...d,u]),setTimeout(()=>{const d=s.toLowerCase();let m=o.default;d.includes("numerology")||d.includes("number")?m=o.numerology:d.includes("vaastu")||d.includes("vastu")?m=o.vaastu:d.includes("consultant")||d.includes("expert")?m=o.consultants:d.includes("service")||d.includes("help")?m=o.services:d.includes("calculator")||d.includes("calculate")?m=o.calculator:(d.includes("contact")||d.includes("reach")||d.includes("phone"))&&(m=o.contact);const g={id:Date.now()+1,text:m,isBot:!0};r(y=>[...y,g])},1e3),i("")},c=u=>{u.key==="Enter"&&l()};return h.jsxs(h.Fragment,{children:[h.jsx(Q.button,{onClick:()=>e(!n),className:"fixed bottom-24 right-6 z-50 w-14 h-14 orange-gradient rounded-full shadow-lg flex items-center justify-center text-white hover:orange-gradient-hover transition-all duration-300",whileHover:{scale:1.1},whileTap:{scale:.9},children:h.jsx(Vl,{mode:"wait",children:n?h.jsx(Q.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:h.jsx(Lp,{className:"h-6 w-6"})},"close"):h.jsx(Q.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:h.jsx(Fx,{className:"h-6 w-6"})},"chat")})}),h.jsx(Vl,{children:n&&h.jsxs(Q.div,{initial:{opacity:0,y:20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.9},className:"fixed bottom-40 right-6 z-40 w-80 h-96 bg-white rounded-lg shadow-xl border border-gray-200 flex flex-col",children:[h.jsx("div",{className:"orange-gradient text-white p-4 rounded-t-lg",children:h.jsxs("div",{className:"flex items-center space-x-2",children:[h.jsx(Ox,{className:"h-5 w-5"}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold",children:"AI Assistant"}),h.jsx("p",{className:"text-xs opacity-90",children:"Ask me about numerology & vaastu"})]})]})}),h.jsx("div",{className:"flex-1 p-4 overflow-y-auto space-y-3",children:t.map(u=>h.jsx("div",{className:`flex ${u.isBot?"justify-start":"justify-end"}`,children:h.jsx("div",{className:`max-w-xs p-3 rounded-lg text-sm ${u.isBot?"bg-gray-100 text-gray-800":"orange-gradient text-white"}`,children:u.text})},u.id))}),h.jsx("div",{className:"p-4 border-t border-gray-200",children:h.jsxs("div",{className:"flex space-x-2",children:[h.jsx(Hr,{value:s,onChange:u=>i(u.target.value),onKeyPress:c,placeholder:"Ask me anything...",className:"flex-1 text-sm"}),h.jsx(ae,{onClick:l,size:"sm",className:"orange-gradient text-white hover:orange-gradient-hover",children:h.jsx(Yx,{className:"h-4 w-4"})})]})})]})})]})},i2="/images/QRcode.jpg",o2=()=>{const[n,e]=I.useState(!1),[t,r]=I.useState(!1),[s,i]=I.useState(1),{isLoaded:o,isSignedIn:l}=sr(),c=499,u=2099,d="+919650881509",m=()=>{r(!0),Se({title:"Connecting to Consultant",description:"Please wait while we connect your call..."}),setTimeout(()=>{window.location.href=`tel:${d}`,r(!1),e(!1),i(1)},2e3)},g=y=>{e(y),y||i(1)};return h.jsxs(h.Fragment,{children:[h.jsx(Q.button,{onClick:()=>e(!0),className:"fixed bottom-6 right-6 z-50 w-14 h-14 bg-gradient-to-r from-orange-500 to-orange-600 rounded-full shadow-lg flex items-center justify-center text-white hover:from-orange-600 hover:to-orange-700 transition-all duration-300",whileHover:{scale:1.1},whileTap:{scale:.9},title:"Call Consultant",children:h.jsx(Hi,{className:"h-6 w-6"})}),h.jsx(Yt,{open:n,onOpenChange:g,children:h.jsxs(Ct,{className:"sm:max-w-md rounded-xl",children:[h.jsxs(Pt,{children:[h.jsxs(St,{className:"flex items-center gap-2 text-orange-600",children:[h.jsx(Hi,{className:"h-5 w-5"}),"Call Consultation"]}),h.jsx(Rt,{children:"Connect directly with our expert consultant."})]}),h.jsx("div",{className:"py-4",children:o?l?h.jsxs(h.Fragment,{children:[s===1&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-orange-50 p-4 rounded-xl border border-orange-200",children:[h.jsx("h3",{className:"font-semibold text-orange-800 mb-2",children:"Call Consultation Details"}),h.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[h.jsx("li",{children:"• Direct call with Consultant"}),h.jsx("li",{children:"• Accepts one DOB"}),h.jsx("li",{children:"• Personalized guidance"}),h.jsx("li",{children:"• Immediate connection after payment"})]})]}),h.jsxs("div",{className:"bg-gray-50 p-4 rounded-xl",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"font-medium",children:"Consultation Fee:"}),h.jsxs("div",{className:"flex flex-col items-end",children:[h.jsxs("span",{className:"text-sm text-gray-500 line-through",children:["₹",u]}),h.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:["₹",c]})]})]}),h.jsxs("div",{className:"mt-2 text-xs text-green-600 font-medium text-center",children:["Special discount applied! Save ₹",u-c]}),h.jsxs(ae,{onClick:()=>i(2),className:"orange-gradient text-white hover:orange-gradient-hover w-full mt-4 py-3 text-lg rounded-xl",children:["Pay ₹",c," & Proceed to Call"]})]})]}),s===2&&h.jsxs("div",{className:"text-center space-y-4 animate-in fade-in-50",children:[h.jsx("img",{src:i2,alt:"UPI Payment QR Code",className:"w-48 h-48 mx-auto rounded-lg border p-1 bg-white"}),h.jsxs("div",{className:"font-bold text-3xl text-gray-800",children:["Pay ₹",c]}),h.jsx("p",{className:"text-sm text-gray-500 px-4",children:"You can scan this QR to pay fee before connecting to our consultant."}),h.jsxs(ae,{onClick:m,disabled:t,className:"w-full py-3 text-lg rounded-xl bg-green-600 hover:bg-green-700 text-white flex items-center justify-center gap-2",children:[h.jsx(Hi,{className:"h-5 w-5"}),t?"Connecting...":"Call Now"]})]})]}):h.jsxs("div",{className:"text-center py-4",children:[h.jsx("p",{className:"mb-4",children:"Please sign in to book a call consultation."}),h.jsx(Ft,{mode:"modal",children:h.jsx(ae,{className:"orange-gradient text-white hover:orange-gradient-hover px-6 py-2 text-md rounded-xl",children:"Sign In"})})]}):h.jsx("div",{className:"text-center py-4",children:"Loading..."})})]})})]})},a2="pk_test_a25vd2luZy1sb2N1c3QtMjguY2xlcmsuYWNjb3VudHMuZGV2JA";function l2(){return h.jsx(Lw,{publishableKey:a2,appearance:{baseTheme:void 0,variables:{colorPrimary:"#f97316"}},children:h.jsx(M_,{children:h.jsxs("div",{className:"min-h-screen relative",children:[h.jsx(r2,{}),h.jsx(y1,{}),h.jsx("main",{className:"relative z-1",children:h.jsxs(S_,{children:[h.jsx(_r,{path:"/",element:h.jsx(DV,{})}),h.jsx(_r,{path:"/learn",element:h.jsx(OV,{})}),h.jsx(_r,{path:"/calculator",element:h.jsx(JV,{})}),h.jsx(_r,{path:"/therapy",element:h.jsx(e2,{})}),h.jsx(_r,{path:"/services",element:h.jsx(n2,{})})]})}),h.jsx(s2,{}),h.jsx(o2,{}),h.jsx(Zx,{})]})})})}hl.createRoot(document.getElementById("root")).render(h.jsx(Fe.StrictMode,{children:h.jsx(l2,{})}));
